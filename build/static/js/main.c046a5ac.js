/*! For license information please see main.c046a5ac.js.LICENSE.txt */
!function(){var e={318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},862:function(e,t,n){var r=n(8).default;function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(a,u,s):a[u]=e[u]}return a.default=e,n&&n.set(e,a),a},e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},757:function(e,t,n){e.exports=n(727)},531:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}function i(e){if("string"!==typeof e)throw new Error(r(7));return e.charAt(0).toUpperCase()+e.slice(1)}function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}n.r(t),n.d(t,{capitalize:function(){return i},createChainedFunction:function(){return a},createSvgIcon:function(){return Rr},debounce:function(){return Dr},deprecatedPropType:function(){return Or},isMuiElement:function(){return Lr},ownerDocument:function(){return Mr},ownerWindow:function(){return Fr},requirePropFactory:function(){return Ur},setRef:function(){return Vr},unstable_useId:function(){return Kr},unsupportedProp:function(){return jr},useControlled:function(){return Zr},useEventCallback:function(){return zr},useForkRef:function(){return qr},useIsFocusVisible:function(){return ni}});var o=n(462),u=n(791);function s(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function c(e,t){if(null==e)return{};var n,r,i=s(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l(e){var t,n,r="";if("string"===typeof e||"number"===typeof e)r+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=l(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function f(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=l(e))&&(r&&(r+=" "),r+=t);return r}var h=n(110),d=n.n(h),p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v="object"===("undefined"===typeof window?"undefined":p(window))&&"object"===("undefined"===typeof document?"undefined":p(document))&&9===document.nodeType,m=n(144),y=n(611);function g(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,y.Z)(e,t)}var k=n(326),b={}.constructor;function w(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(w);if(e.constructor!==b)return e;var t={};for(var n in e)t[n]=w(e[n]);return t}function x(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=w(t),a=r.plugins.onCreateRule(e,i,n);return a||(e[0],null)}var _=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},S=function(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=_(e[r]," ");else n=_(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n};function I(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function E(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function T(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,a=void 0===i?0:i,o=t.fallbacks;!1===n.format&&(a=-1/0);var u=I(n),s=u.linebreak,c=u.space;if(e&&a++,o)if(Array.isArray(o))for(var l=0;l<o.length;l++){var f=o[l];for(var h in f){var d=f[h];null!=d&&(r&&(r+=s),r+=E(h+":"+c+S(d)+";",a))}}else for(var p in o){var v=o[p];null!=v&&(r&&(r+=s),r+=E(p+":"+c+S(v)+";",a))}for(var m in t){var y=t[m];null!=y&&"fallbacks"!==m&&(r&&(r+=s),r+=E(m+":"+c+S(y)+";",a))}return(r||n.allowEmpty)&&e?(r&&(r=""+s+r+s),E(""+e+c+"{"+r,--a)+E("}",a)):r}var C=/([[\].#*$><+~=|^:(),"'`\s])/g,N="undefined"!==typeof CSS&&CSS.escape,A=function(e){return N?N(e):e.replace(C,"\\$1")},P=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var a=null==i||!1===i,o=e in this.style;if(a&&!o&&!r)return this;var u=a&&o;if(u?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var s=this.options.sheet;return s&&s.attached,this},e}(),R=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var a=r.selector,o=r.scoped,u=r.sheet,s=r.generateId;return a?i.selectorText=a:!1!==o&&(i.id=s((0,k.Z)((0,k.Z)(i)),u),i.selectorText="."+A(i.id)),i}g(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=S(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,o.Z)({},e,{allowEmpty:!0}):e;return T(this.selectorText,this.style,n)},(0,m.Z)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(P),D={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new R(e,t,n)}},O={indent:1,children:!0},L=/@([\w-]+)/,M=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(L);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new oe((0,o.Z)({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=O);var t=I(e).linebreak;if(null==e.indent&&(e.indent=O.indent),null==e.children&&(e.children=O.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),F=/@media|@supports\s+/,U={onCreateRule:function(e,t,n){return F.test(e)?new M(e,t,n):null}},V={indent:1,children:!0},j=/@keyframes\s+([\w-]+)/,Z=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(j);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,a=n.sheet,u=n.generateId;for(var s in this.id=!1===i?this.name:A(u(this,a)),this.rules=new oe((0,o.Z)({},n,{parent:this})),t)this.rules.add(s,t[s],(0,o.Z)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=V);var t=I(e).linebreak;if(null==e.indent&&(e.indent=V.indent),null==e.children&&(e.children=V.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),B=/@keyframes\s+/,z=/\$([\w-]+)/g,q=function(e,t){return"string"===typeof e?e.replace(z,(function(e,n){return n in t?t[n]:e})):e},K=function(e,t,n){var r=e[t],i=q(r,n);i!==r&&(e[t]=i)},W={onCreateRule:function(e,t,n){return"string"===typeof e&&B.test(e)?new Z(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&K(e,"animation-name",n.keyframes),"animation"in e&&K(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return q(e,r.keyframes);default:return e}}},G=function(e){function t(){return e.apply(this,arguments)||this}return g(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,o.Z)({},e,{allowEmpty:!0}):e;return T(this.key,this.style,n)},t}(P),H={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new G(e,t,n):null}},Q=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=I(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=T(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return T(this.at,this.style,e)},e}(),$=/@font-face/,Y={onCreateRule:function(e,t,n){return $.test(e)?new Q(e,t,n):null}},X=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return T(this.key,this.style,e)},e}(),J={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new X(e,t,n):null}},ee=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),te={"@charset":!0,"@import":!0,"@namespace":!0},ne={onCreateRule:function(e,t,n){return e in te?new ee(e,t,n):null}},re=[D,U,W,H,Y,J,ne],ie={process:!0},ae={force:!0,process:!0},oe=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,i=r.parent,a=r.sheet,u=r.jss,s=r.Renderer,c=r.generateId,l=r.scoped,f=(0,o.Z)({classes:this.classes,parent:i,sheet:a,jss:u,Renderer:s,generateId:c,scoped:l,name:e,keyframes:this.keyframes,selector:void 0},n),h=e;e in this.raw&&(h=e+"-d"+this.counter++),this.raw[h]=t,h in this.classes&&(f.selector="."+A(this.classes[h]));var d=x(h,t,f);if(!d)return null;this.register(d);var p=void 0===f.index?this.index.length:f.index;return this.index.splice(p,0,d),d},t.replace=function(e,t,n){var r=this.get(e),i=this.index.indexOf(r);r&&this.remove(r);var a=n;return-1!==i&&(a=(0,o.Z)({},n,{index:i})),this.add(e,t,a)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof R?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof Z&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof R?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof Z&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=ie);var i=this.options,a=i.jss.plugins,o=i.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var u=t.style;if(a.onUpdate(n,t,o,r),r.process&&u&&u!==t.style){for(var s in a.onProcessStyle(t.style,t,o),t.style){var c=t.style[s];c!==u[s]&&t.prop(s,c,ae)}for(var l in u){var f=t.style[l],h=u[l];null==f&&f!==h&&t.prop(l,null,ae)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=I(e).linebreak,a=0;a<this.index.length;a++){var o=this.index[a].toString(e);(o||r)&&(t&&(t+=i),t+=o)}return t},e}(),ue=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,o.Z)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new oe(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(this.renderer&&(i?r.renderable&&this.renderer.replaceRule(r.renderable,i):this.renderer.deleteRule(r)),i):i:(this.deployed=!1,i)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),se=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),ce=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=s(t,["attached"]),i=I(r).linebreak,a="",o=0;o<this.registry.length;o++){var u=this.registry[o];null!=n&&u.attached!==n||(a&&(a+=i),a+=u.toString(r))}return a},(0,m.Z)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),le=new ce,fe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),he="2f1acc6c3a606b082e5eef5e54414ffb";null==fe[he]&&(fe[he]=0);var de=fe[he]++,pe=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",a="";return r&&(r.options.classNamePrefix&&(a=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(a||"c")+de+i+t:a+n.key+"-"+de+(i?"-"+i:"")+"-"+t}},ve=function(e){var t;return function(){return t||(t=e()),t}},me=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},ye=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=S(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,r):e.style.setProperty(t,r)}catch(i){return!1}return!0},ge=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},ke=function(e,t){return e.selectorText=t,e.selectorText===t},be=ve((function(){return document.querySelector("head")}));function we(e){var t=le.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var i=function(e){for(var t=be(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var xe=ve((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),_e=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},Se=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},Ie=function(){function e(e){this.getPropertyValue=me,this.setProperty=ye,this.removeProperty=ge,this.setSelector=ke,this.hasInsertedRules=!1,this.cssRules=[],e&&le.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,i=t.element;this.element=i||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var a=xe();a&&this.element.setAttribute("nonce",a)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=we(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var i=n,a=i.parentNode;a&&a.insertBefore(e,i.nextSibling)}else be().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;if("conditional"===e.type||"keyframes"===e.type){var a=Se(n,t);if(!1===(i=_e(n,r.toString({children:!1}),a)))return!1;this.refCssRule(e,a,i)}return this.insertRules(r.rules,i),i}var o=e.toString();if(!o)return!1;var u=Se(n,t),s=_e(n,o,u);return!1!==s&&(this.hasInsertedRules=!0,this.refCssRule(e,u,s),s)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof ue&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),Ee=0,Te=function(){function e(e){this.id=Ee++,this.version="10.9.0",this.plugins=new se,this.options={id:{minify:!1},createGenerateId:pe,Renderer:v?Ie:null,plugins:[]},this.generateId=pe({minify:!1});for(var t=0;t<re.length;t++)this.plugins.use(re[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=(0,o.Z)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===le.index?0:le.index+1);var r=new ue(e,(0,o.Z)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),le.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=(0,o.Z)({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=x(e,t,r);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),Ce=function(e){return new Te(e)},Ne="object"===typeof CSS&&null!=CSS&&"number"in CSS;function Ae(e){var t=null;for(var n in e){var r=e[n],i=typeof r;if("function"===i)t||(t={}),t[n]=r;else if("object"===i&&null!==r&&!Array.isArray(r)){var a=Ae(r);a&&(t||(t={}),t[n]=a)}}return t}Ce();function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=(0,o.Z)({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}var Re={set:function(e,t,n,r){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},De=Re;var Oe=u.createContext(null);function Le(){return u.useContext(Oe)}var Me="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",Fe=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var Ue=Date.now(),Ve="fnValues"+Ue,je="fnStyle"+ ++Ue,Ze=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=x(e,{},n);return r[je]=t,r},onProcessStyle:function(e,t){if(Ve in t||je in t)return e;var n={};for(var r in e){var i=e[r];"function"===typeof i&&(delete e[r],n[r]=i)}return t[Ve]=n,e},onUpdate:function(e,t,n,r){var i=t,a=i[je];a&&(i.style=a(e)||{});var o=i[Ve];if(o)for(var u in o)i.prop(u,o[u](e),r)}}},Be="@global",ze="@global ",qe=function(){function e(e,t,n){for(var r in this.type="global",this.at=Be,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new oe((0,o.Z)({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),Ke=function(){function e(e,t,n){this.type="global",this.at=Be,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr(ze.length);this.rule=n.jss.createRule(r,t,(0,o.Z)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),We=/\s*,\s*/g;function Ge(e,t){for(var n=e.split(We),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var He=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===Be)return new qe(e,t,n);if("@"===e[0]&&e.substr(0,ze.length)===ze)return new Ke(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,i=r?r[Be]:null;if(i){for(var a in i)t.addRule(a,i[a],(0,o.Z)({},n,{selector:Ge(a,e.selector)}));delete r[Be]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var i in r)if("@"===i[0]&&i.substr(0,Be.length)===Be){var a=Ge(i.substr(Be.length),e.selector);t.addRule(a,r[i],(0,o.Z)({},n,{selector:a})),delete r[i]}}(e,t))}}},Qe=/\s*,\s*/g,$e=/&/g,Ye=/\$([\w-]+)/g;var Xe=function(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?i.selector:r}}function t(e,t){for(var n=t.split(Qe),r=e.split(Qe),i="",a=0;a<n.length;a++)for(var o=n[a],u=0;u<r.length;u++){var s=r[u];i&&(i+=", "),i+=-1!==s.indexOf("&")?s.replace($e,o):o+" "+s}return i}function n(e,t,n){if(n)return(0,o.Z)({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var i=(0,o.Z)({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(r,i,a){if("style"!==i.type)return r;var u,s,c=i,l=c.options.parent;for(var f in r){var h=-1!==f.indexOf("&"),d="@"===f[0];if(h||d){if(u=n(c,l,u),h){var p=t(f,c.selector);s||(s=e(l,a)),p=p.replace(Ye,s);var v=c.key+"-"+f;"replaceRule"in l?l.replaceRule(v,r[f],(0,o.Z)({},u,{selector:p})):l.addRule(v,r[f],(0,o.Z)({},u,{selector:p}))}else d&&l.addRule(f,{},u).addRule(c.key,r[f],{selector:c.selector});delete r[f]}}return r}}},Je=/[A-Z]/g,et=/^ms-/,tt={};function nt(e){return"-"+e.toLowerCase()}var rt=function(e){if(tt.hasOwnProperty(e))return tt[e];var t=e.replace(Je,nt);return tt[e]=et.test(t)?"-"+t:t};function it(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:rt(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(it):t.fallbacks=it(e.fallbacks)),t}var at=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=it(e[t]);return e}return it(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=rt(t);return t===r?e:(n.prop(r,e),null)}}},ot=Ne&&CSS?CSS.px:"px",ut=Ne&&CSS?CSS.ms:"ms",st=Ne&&CSS?CSS.percent:"%";function ct(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}var lt=ct({"animation-delay":ut,"animation-duration":ut,"background-position":ot,"background-position-x":ot,"background-position-y":ot,"background-size":ot,border:ot,"border-bottom":ot,"border-bottom-left-radius":ot,"border-bottom-right-radius":ot,"border-bottom-width":ot,"border-left":ot,"border-left-width":ot,"border-radius":ot,"border-right":ot,"border-right-width":ot,"border-top":ot,"border-top-left-radius":ot,"border-top-right-radius":ot,"border-top-width":ot,"border-width":ot,"border-block":ot,"border-block-end":ot,"border-block-end-width":ot,"border-block-start":ot,"border-block-start-width":ot,"border-block-width":ot,"border-inline":ot,"border-inline-end":ot,"border-inline-end-width":ot,"border-inline-start":ot,"border-inline-start-width":ot,"border-inline-width":ot,"border-start-start-radius":ot,"border-start-end-radius":ot,"border-end-start-radius":ot,"border-end-end-radius":ot,margin:ot,"margin-bottom":ot,"margin-left":ot,"margin-right":ot,"margin-top":ot,"margin-block":ot,"margin-block-end":ot,"margin-block-start":ot,"margin-inline":ot,"margin-inline-end":ot,"margin-inline-start":ot,padding:ot,"padding-bottom":ot,"padding-left":ot,"padding-right":ot,"padding-top":ot,"padding-block":ot,"padding-block-end":ot,"padding-block-start":ot,"padding-inline":ot,"padding-inline-end":ot,"padding-inline-start":ot,"mask-position-x":ot,"mask-position-y":ot,"mask-size":ot,height:ot,width:ot,"min-height":ot,"max-height":ot,"min-width":ot,"max-width":ot,bottom:ot,left:ot,top:ot,right:ot,inset:ot,"inset-block":ot,"inset-block-end":ot,"inset-block-start":ot,"inset-inline":ot,"inset-inline-end":ot,"inset-inline-start":ot,"box-shadow":ot,"text-shadow":ot,"column-gap":ot,"column-rule":ot,"column-rule-width":ot,"column-width":ot,"font-size":ot,"font-size-delta":ot,"letter-spacing":ot,"text-decoration-thickness":ot,"text-indent":ot,"text-stroke":ot,"text-stroke-width":ot,"word-spacing":ot,motion:ot,"motion-offset":ot,outline:ot,"outline-offset":ot,"outline-width":ot,perspective:ot,"perspective-origin-x":st,"perspective-origin-y":st,"transform-origin":st,"transform-origin-x":st,"transform-origin-y":st,"transform-origin-z":st,"transition-delay":ut,"transition-duration":ut,"vertical-align":ot,"flex-basis":ot,"shape-margin":ot,size:ot,gap:ot,grid:ot,"grid-gap":ot,"row-gap":ot,"grid-row-gap":ot,"grid-column-gap":ot,"grid-template-rows":ot,"grid-template-columns":ot,"grid-auto-rows":ot,"grid-auto-columns":ot,"box-shadow-x":ot,"box-shadow-y":ot,"box-shadow-blur":ot,"box-shadow-spread":ot,"font-line-height":ot,"text-shadow-x":ot,"text-shadow-y":ot,"text-shadow-blur":ot});function ft(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=ft(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var i in t)t[i]=ft(i,t[i],n);else for(var a in t)t[a]=ft(e+"-"+a,t[a],n);else if("number"===typeof t&&!1===isNaN(t)){var o=n[e]||lt[e];return!o||0===t&&o===ot?t.toString():"function"===typeof o?o(t).toString():""+t+o}return t}var ht=function(e){void 0===e&&(e={});var t=ct(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=ft(r,e[r],t);return e},onChangeValue:function(e,n){return ft(n,e,t)}}},dt=n(433),pt="",vt="",mt="",yt="",gt=v&&"ontouchstart"in document.documentElement;if(v){var kt={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},bt=document.createElement("p").style;for(var wt in kt)if(wt+"Transform"in bt){pt=wt,vt=kt[wt];break}"Webkit"===pt&&"msHyphens"in bt&&(pt="ms",vt=kt.ms,yt="edge"),"Webkit"===pt&&"-apple-trailing-word"in bt&&(mt="apple")}var xt=pt,_t=vt,St=mt,It=yt,Et=gt;var Tt={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===xt?"-webkit-"+e:_t+e)}},Ct={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===xt?_t+"print-"+e:e)}},Nt=/[-\s]+(.)?/g;function At(e,t){return t?t.toUpperCase():""}function Pt(e){return e.replace(Nt,At)}function Rt(e){return Pt("-"+e)}var Dt,Ot={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===xt){var n="mask-image";if(Pt(n)in t)return e;if(xt+Rt(n)in t)return _t+e}return e}},Lt={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==St||Et?e:_t+e)}},Mt={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:_t+e)}},Ft={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:_t+e)}},Ut={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===xt||"ms"===xt&&"edge"!==It?_t+e:e)}},Vt={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===xt||"ms"===xt||"apple"===St?_t+e:e)}},jt={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===xt?"WebkitColumn"+Rt(e)in t&&_t+"column-"+e:"Moz"===xt&&("page"+Rt(e)in t&&"page-"+e))}},Zt={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===xt)return e;var n=e.replace("-inline","");return xt+Rt(n)in t&&_t+n}},Bt={supportedProperty:function(e,t){return Pt(e)in t&&e}},zt={supportedProperty:function(e,t){var n=Rt(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:xt+n in t?_t+e:"Webkit"!==xt&&"Webkit"+n in t&&"-webkit-"+e}},qt={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===xt?""+_t+e:e)}},Kt={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===xt?_t+"scroll-chaining":e)}},Wt={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Gt={supportedProperty:function(e,t){var n=Wt[e];return!!n&&(xt+Rt(n)in t&&_t+n)}},Ht={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Qt=Object.keys(Ht),$t=function(e){return _t+e},Yt={supportedProperty:function(e,t,n){var r=n.multiple;if(Qt.indexOf(e)>-1){var i=Ht[e];if(!Array.isArray(i))return xt+Rt(i)in t&&_t+i;if(!r)return!1;for(var a=0;a<i.length;a++)if(!(xt+Rt(i[0])in t))return!1;return i.map($t)}return!1}},Xt=[Tt,Ct,Ot,Lt,Mt,Ft,Ut,Vt,jt,Zt,Bt,zt,qt,Kt,Gt,Yt],Jt=Xt.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),en=Xt.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,(0,dt.Z)(t.noPrefill)),e}),[]),tn={};if(v){Dt=document.createElement("p");var nn=window.getComputedStyle(document.documentElement,"");for(var rn in nn)isNaN(rn)||(tn[nn[rn]]=nn[rn]);en.forEach((function(e){return delete tn[e]}))}function an(e,t){if(void 0===t&&(t={}),!Dt)return e;if(null!=tn[e])return tn[e];"transition"!==e&&"transform"!==e||(t[e]=e in Dt.style);for(var n=0;n<Jt.length&&(tn[e]=Jt[n](e,Dt.style,t),!tn[e]);n++);try{Dt.style[e]=""}catch(r){return!1}return tn[e]}var on,un={},sn={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},cn=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function ln(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?an(t):", "+an(n);return r||(t||n)}function fn(e,t){var n=t;if(!on||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=un[r])return un[r];try{on.style[e]=n}catch(i){return un[r]=!1,!1}if(sn[e])n=n.replace(cn,ln);else if(""===on.style[e]&&("-ms-flex"===(n=_t+n)&&(on.style[e]="-ms-flexbox"),on.style[e]=n,""===on.style[e]))return un[r]=!1,!1;return on.style[e]="",un[r]=n,un[r]}v&&(on=document.createElement("p"));var hn=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var i=!1,a=an(n);a&&a!==n&&(i=!0);var o=!1,u=fn(a,S(r));u&&u!==r&&(o=!0),(i||o)&&(i&&delete t[n],t[a||n]=u||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===xt?e:"@"+_t+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return fn(t,S(e))||e}}};var dn=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},i=Object.keys(t).sort(e),a=0;a<i.length;a++)r[i[a]]=t[i[a]];return r}}};var pn=Ce({plugins:[Ze(),He(),Xe(),at(),ht(),"undefined"===typeof window?null:hn(),dn()]}),vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,i=void 0===r?"jss":r,a=e.seed,o=void 0===a?"":a,u=""===o?"":"".concat(o,"-"),s=0,c=function(){return s+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==Fe.indexOf(e.key))return"Mui-".concat(e.key);var a="".concat(u).concat(r,"-").concat(e.key);return t.options.theme[Me]&&""===o?"".concat(a,"-").concat(c()):a}return"".concat(u).concat(i).concat(c())}}(),mn={disableGeneration:!1,generateClassName:vn,jss:pn,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},yn=u.createContext(mn);var gn=-1e9;function kn(){return gn+=1}var bn=n(2);function wn(e){return e&&"object"===(0,bn.Z)(e)&&e.constructor===Object}function xn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?(0,o.Z)({},e):e;return wn(e)&&wn(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(wn(t[i])&&i in e?r[i]=xn(e[i],t[i],n):r[i]=t[i])})),r}function _n(e){var t="function"===typeof e;return{create:function(n,r){var i;try{i=t?e(n):e}catch(s){throw s}if(!r||!n.overrides||!n.overrides[r])return i;var a=n.overrides[r],u=(0,o.Z)({},i);return Object.keys(a).forEach((function(e){u[e]=xn(u[e],a[e])})),u},options:{}}}var Sn={};function In(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,i=!0),i&&(r.cacheClasses.value=Pe({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function En(e,t){var n=e.state,r=e.theme,i=e.stylesOptions,a=e.stylesCreator,u=e.name;if(!i.disableGeneration){var s=De.get(i.sheetsManager,a,r);s||(s={refs:0,staticSheet:null,dynamicStyles:null},De.set(i.sheetsManager,a,r,s));var c=(0,o.Z)({},a.options,i,{theme:r,flip:"boolean"===typeof i.flip?i.flip:"rtl"===r.direction});c.generateId=c.serverGenerateClassName||c.generateClassName;var l=i.sheetsRegistry;if(0===s.refs){var f;i.sheetsCache&&(f=De.get(i.sheetsCache,a,r));var h=a.create(r,u);f||((f=i.jss.createStyleSheet(h,(0,o.Z)({link:!1},c))).attach(),i.sheetsCache&&De.set(i.sheetsCache,a,r,f)),l&&l.add(f),s.staticSheet=f,s.dynamicStyles=Ae(h)}if(s.dynamicStyles){var d=i.jss.createStyleSheet(s.dynamicStyles,(0,o.Z)({link:!0},c));d.update(t),d.attach(),n.dynamicSheet=d,n.classes=Pe({baseClasses:s.staticSheet.classes,newClasses:d.classes}),l&&l.add(d)}else n.classes=s.staticSheet.classes;s.refs+=1}}function Tn(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function Cn(e){var t=e.state,n=e.theme,r=e.stylesOptions,i=e.stylesCreator;if(!r.disableGeneration){var a=De.get(r.sheetsManager,i,n);a.refs-=1;var o=r.sheetsRegistry;0===a.refs&&(De.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(a.staticSheet),o&&o.remove(a.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}function Nn(e,t){var n,r=u.useRef([]),i=u.useMemo((function(){return{}}),t);r.current!==i&&(r.current=i,n=e()),u.useEffect((function(){return function(){n&&n()}}),[i])}function An(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,r=t.classNamePrefix,i=t.Component,a=t.defaultTheme,s=void 0===a?Sn:a,l=c(t,["name","classNamePrefix","Component","defaultTheme"]),f=_n(e),h=n||r||"makeStyles";f.options={index:kn(),name:n,meta:h,classNamePrefix:h};var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Le()||s,r=(0,o.Z)({},u.useContext(yn),l),a=u.useRef(),c=u.useRef();Nn((function(){var i={name:n,state:{},stylesCreator:f,stylesOptions:r,theme:t};return En(i,e),c.current=!1,a.current=i,function(){Cn(i)}}),[t,f]),u.useEffect((function(){c.current&&Tn(a.current,e),c.current=!0}));var h=In(a.current,e.classes,i);return h};return d}function Pn(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,a=t.props[n];for(i in a)void 0===r[i]&&(r[i]=a[i]);return r}var Rn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=t.defaultTheme,i=t.withTheme,a=void 0!==i&&i,s=t.name,l=c(t,["defaultTheme","withTheme","name"]);var f=s,h=An(e,(0,o.Z)({defaultTheme:r,Component:n,name:s||n.displayName,classNamePrefix:f},l)),p=u.forwardRef((function(e,t){e.classes;var i,l=e.innerRef,f=c(e,["classes","innerRef"]),d=h((0,o.Z)({},n.defaultProps,e)),p=f;return("string"===typeof s||a)&&(i=Le()||r,s&&(p=Pn({theme:i,name:s,props:f})),a&&!p.theme&&(p.theme=i)),u.createElement(n,(0,o.Z)({ref:l||t,classes:d},p))}));return d()(p,n),p}},Dn=["xs","sm","md","lg","xl"];function On(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,i=void 0===r?"px":r,a=e.step,u=void 0===a?5:a,s=c(e,["values","unit","step"]);function l(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function f(e,t){var r=Dn.indexOf(t);return r===Dn.length-1?l(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[Dn[r+1]]?n[Dn[r+1]]:t)-u/100).concat(i,")")}return(0,o.Z)({keys:Dn,values:n,up:l,down:function(e){var t=Dn.indexOf(e)+1,r=n[Dn[t]];return t===Dn.length?l("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-u/100).concat(i,")")},between:f,only:function(e){return f(e,e)},width:function(e){return n[e]}},s)}var Ln=n(942);function Mn(e,t,n){var r;return(0,o.Z)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),(0,o.Z)({paddingLeft:t(2),paddingRight:t(2)},n,(0,Ln.Z)({},e.up("sm"),(0,o.Z)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},(0,Ln.Z)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,Ln.Z)(r,e.up("sm"),{minHeight:64}),r)},n)}var Fn={black:"#000",white:"#fff"},Un={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},Vn={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},jn={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},Zn={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Bn={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},zn={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},qn={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function Kn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Wn(e){if(e.type)return e;if("#"===e.charAt(0))return Wn(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(r(3,e));var i=e.substring(t+1,e.length-1).split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)}))}}function Gn(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function Hn(e){var t="hsl"===(e=Wn(e)).type?Wn(function(e){var t=(e=Wn(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)},u="rgb",s=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(u+="a",s.push(t[3])),Gn({type:u,values:s})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Qn(e,t){if(e=Wn(e),t=Kn(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return Gn(e)}function $n(e,t){if(e=Wn(e),t=Kn(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return Gn(e)}var Yn={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Fn.white,default:Un[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Xn={text:{primary:Fn.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:Un[800],default:"#303030"},action:{active:Fn.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Jn(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=$n(e.main,i):"dark"===t&&(e.dark=Qn(e.main,a)))}function er(e){var t=e.primary,n=void 0===t?{light:Vn[300],main:Vn[500],dark:Vn[700]}:t,i=e.secondary,a=void 0===i?{light:jn.A200,main:jn.A400,dark:jn.A700}:i,u=e.error,s=void 0===u?{light:Zn[300],main:Zn[500],dark:Zn[700]}:u,l=e.warning,f=void 0===l?{light:Bn[300],main:Bn[500],dark:Bn[700]}:l,h=e.info,d=void 0===h?{light:zn[300],main:zn[500],dark:zn[700]}:h,p=e.success,v=void 0===p?{light:qn[300],main:qn[500],dark:qn[700]}:p,m=e.type,y=void 0===m?"light":m,g=e.contrastThreshold,k=void 0===g?3:g,b=e.tonalOffset,w=void 0===b?.2:b,x=c(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function _(e){var t=function(e,t){var n=Hn(e),r=Hn(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Xn.text.primary)>=k?Xn.text.primary:Yn.text.primary;return t}var S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=(0,o.Z)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(r(4,t));if("string"!==typeof e.main)throw new Error(r(5,JSON.stringify(e.main)));return Jn(e,"light",n,w),Jn(e,"dark",i,w),e.contrastText||(e.contrastText=_(e.main)),e},I={dark:Xn,light:Yn};return xn((0,o.Z)({common:Fn,type:y,primary:S(n),secondary:S(a,"A400","A200","A700"),error:S(s),warning:S(f),info:S(d),success:S(v),grey:Un,contrastThreshold:k,getContrastText:_,augmentColor:S,tonalOffset:w},I[y]),x)}function tr(e){return Math.round(1e5*e)/1e5}function nr(e){return tr(e)}var rr={textTransform:"uppercase"},ir='"Roboto", "Helvetica", "Arial", sans-serif';function ar(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?ir:r,a=n.fontSize,u=void 0===a?14:a,s=n.fontWeightLight,l=void 0===s?300:s,f=n.fontWeightRegular,h=void 0===f?400:f,d=n.fontWeightMedium,p=void 0===d?500:d,v=n.fontWeightBold,m=void 0===v?700:v,y=n.htmlFontSize,g=void 0===y?16:y,k=n.allVariants,b=n.pxToRem,w=c(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var x=u/14,_=b||function(e){return"".concat(e/g*x,"rem")},S=function(e,t,n,r,a){return(0,o.Z)({fontFamily:i,fontWeight:e,fontSize:_(t),lineHeight:n},i===ir?{letterSpacing:"".concat(tr(r/t),"em")}:{},a,k)},I={h1:S(l,96,1.167,-1.5),h2:S(l,60,1.2,-.5),h3:S(h,48,1.167,0),h4:S(h,34,1.235,.25),h5:S(h,24,1.334,0),h6:S(p,20,1.6,.15),subtitle1:S(h,16,1.75,.15),subtitle2:S(p,14,1.57,.1),body1:S(h,16,1.5,.15),body2:S(h,14,1.43,.15),button:S(p,14,1.75,.4,rr),caption:S(h,12,1.66,.4),overline:S(h,12,2.66,1,rr)};return xn((0,o.Z)({htmlFontSize:g,pxToRem:_,round:nr,fontFamily:i,fontSize:u,fontWeightLight:l,fontWeightRegular:h,fontWeightMedium:p,fontWeightBold:m},I),w,{clone:!1})}function or(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var ur=["none",or(0,2,1,-1,0,1,1,0,0,1,3,0),or(0,3,1,-2,0,2,2,0,0,1,5,0),or(0,3,3,-2,0,3,4,0,0,1,8,0),or(0,2,4,-1,0,4,5,0,0,1,10,0),or(0,3,5,-1,0,5,8,0,0,1,14,0),or(0,3,5,-1,0,6,10,0,0,1,18,0),or(0,4,5,-2,0,7,10,1,0,2,16,1),or(0,5,5,-3,0,8,10,1,0,3,14,2),or(0,5,6,-3,0,9,12,1,0,3,16,2),or(0,6,6,-3,0,10,14,1,0,4,18,3),or(0,6,7,-4,0,11,15,1,0,4,20,3),or(0,7,8,-4,0,12,17,2,0,5,22,4),or(0,7,8,-4,0,13,19,2,0,5,24,4),or(0,7,9,-4,0,14,21,2,0,5,26,4),or(0,8,9,-5,0,15,22,2,0,6,28,5),or(0,8,10,-5,0,16,24,2,0,6,30,5),or(0,8,11,-5,0,17,26,2,0,6,32,5),or(0,9,11,-5,0,18,28,2,0,7,34,6),or(0,9,12,-6,0,19,29,2,0,7,36,6),or(0,10,13,-6,0,20,31,3,0,8,38,7),or(0,10,13,-6,0,21,33,3,0,8,40,7),or(0,10,14,-6,0,22,35,3,0,8,42,7),or(0,11,14,-7,0,23,36,3,0,9,44,8),or(0,11,15,-7,0,24,38,3,0,9,46,8)],sr={borderRadius:4},cr=n(439),lr={xs:0,sm:600,md:960,lg:1280,xl:1920},fr={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(lr[e],"px)")}};var hr=function(e,t){return t?xn(e,t,{clone:!1}):e};var dr={m:"margin",p:"padding"},pr={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},vr={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},mr=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!vr[e])return[e];e=vr[e]}var t=e.split(""),n=(0,cr.Z)(t,2),r=n[0],i=n[1],a=dr[r],o=pr[i]||"";return Array.isArray(o)?o.map((function(e){return a+e})):[a+o]})),yr=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function gr(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function kr(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function br(e){var t=gr(e.theme);return Object.keys(e).map((function(n){if(-1===yr.indexOf(n))return null;var r=kr(mr(n),t),i=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||fr;return t.reduce((function(e,i,a){return e[r.up(r.keys[a])]=n(t[a]),e}),{})}if("object"===(0,bn.Z)(t)){var i=e.theme.breakpoints||fr;return Object.keys(t).reduce((function(e,r){return e[i.up(r)]=n(t[r]),e}),{})}return n(t)}(e,i,r)})).reduce(hr,{})}br.propTypes={},br.filterProps=yr;function wr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=gr({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var xr={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},_r={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Sr(e){return"".concat(Math.round(e),"ms")}var Ir={easing:xr,duration:_r,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?_r.standard:n,i=t.easing,a=void 0===i?xr.easeInOut:i,o=t.delay,u=void 0===o?0:o;c(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:Sr(r)," ").concat(a," ").concat("string"===typeof u?u:Sr(u))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},Er={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Tr(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,i=void 0===r?{}:r,a=e.palette,o=void 0===a?{}:a,u=e.spacing,s=e.typography,l=void 0===s?{}:s,f=c(e,["breakpoints","mixins","palette","spacing","typography"]),h=er(o),d=On(n),p=wr(u),v=xn({breakpoints:d,direction:"ltr",mixins:Mn(d,p,i),overrides:{},palette:h,props:{},shadows:ur,typography:ar(h,l),spacing:p,shape:sr,transitions:Ir,zIndex:Er},f),m=arguments.length,y=new Array(m>1?m-1:0),g=1;g<m;g++)y[g-1]=arguments[g];return v=y.reduce((function(e,t){return xn(e,t)}),v)}var Cr=Tr();var Nr=function(e,t){return Rn(e,(0,o.Z)({defaultTheme:Cr},t))},Ar=u.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,s=e.color,l=void 0===s?"inherit":s,h=e.component,d=void 0===h?"svg":h,p=e.fontSize,v=void 0===p?"medium":p,m=e.htmlColor,y=e.titleAccess,g=e.viewBox,k=void 0===g?"0 0 24 24":g,b=c(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return u.createElement(d,(0,o.Z)({className:f(r.root,a,"inherit"!==l&&r["color".concat(i(l))],"default"!==v&&"medium"!==v&&r["fontSize".concat(i(v))]),focusable:"false",viewBox:k,color:m,"aria-hidden":!y||void 0,role:y?"img":void 0,ref:t},b),n,y?u.createElement("title",null,y):null)}));Ar.muiName="SvgIcon";var Pr=Nr((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(Ar);function Rr(e,t){var n=function(t,n){return u.createElement(Pr,(0,o.Z)({ref:n},t),e)};return n.muiName=Pr.muiName,u.memo(u.forwardRef(n))}function Dr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=this,u=function(){e.apply(o,i)};clearTimeout(t),t=setTimeout(u,n)}return r.clear=function(){clearTimeout(t)},r}function Or(e,t){return function(){return null}}function Lr(e,t){return u.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}function Mr(e){return e&&e.ownerDocument||document}function Fr(e){return Mr(e).defaultView||window}function Ur(e){return function(){return null}}function Vr(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function jr(e,t,n,r,i){return null}function Zr(e){var t=e.controlled,n=e.default,r=(e.name,e.state,u.useRef(void 0!==t).current),i=u.useState(n),a=i[0],o=i[1];return[r?t:a,u.useCallback((function(e){r||o(e)}),[])]}var Br="undefined"!==typeof window?u.useLayoutEffect:u.useEffect;function zr(e){var t=u.useRef(e);return Br((function(){t.current=e})),u.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}function qr(e,t){return u.useMemo((function(){return null==e&&null==t?null:function(n){Vr(e,n),Vr(t,n)}}),[e,t])}function Kr(e){var t=u.useState(e),n=t[0],r=t[1],i=e||n;return u.useEffect((function(){null==n&&r("mui-".concat(Math.round(1e5*Math.random())))}),[n]),i}var Wr=n(164),Gr=!0,Hr=!1,Qr=null,$r={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Yr(e){e.metaKey||e.altKey||e.ctrlKey||(Gr=!0)}function Xr(){Gr=!1}function Jr(){"hidden"===this.visibilityState&&Hr&&(Gr=!0)}function ei(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return Gr||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!$r[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function ti(){Hr=!0,window.clearTimeout(Qr),Qr=window.setTimeout((function(){Hr=!1}),100)}function ni(){return{isFocusVisible:ei,onBlurVisible:ti,ref:u.useCallback((function(e){var t,n=Wr.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",Yr,!0),t.addEventListener("mousedown",Xr,!0),t.addEventListener("pointerdown",Xr,!0),t.addEventListener("touchstart",Xr,!0),t.addEventListener("visibilitychange",Jr,!0))}),[])}}},880:function(e,t,n){"use strict";var r=n(318),i=n(862);t.Z=void 0;var a=i(n(791)),o=(0,r(n(894)).default)(a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.Z=o},86:function(e,t,n){"use strict";var r=n(318),i=n(862);t.Z=void 0;var a=i(n(791)),o=(0,r(n(894)).default)(a.createElement("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"}),"ShoppingCart");t.Z=o},894:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(531)},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},482:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=s(n(7)),o=s(n(791)),u=n(432);function s(e){return e&&e.__esModule?e:{default:e}}var c={thousandSeparator:a.default.oneOfType([a.default.string,a.default.oneOf([!0])]),thousandSpacing:a.default.oneOf(["2","2s","3","4"]),decimalSeparator:a.default.string,decimalScale:a.default.number,fixedDecimalScale:a.default.bool,displayType:a.default.oneOf(["input","text"]),prefix:a.default.string,suffix:a.default.string,format:a.default.oneOfType([a.default.string,a.default.func]),removeFormatting:a.default.func,mask:a.default.oneOfType([a.default.string,a.default.arrayOf(a.default.string)]),value:a.default.oneOfType([a.default.number,a.default.string]),isNumericString:a.default.bool,customInput:a.default.func,allowNegative:a.default.bool,onValueChange:a.default.func,onKeyDown:a.default.func,onMouseUp:a.default.func,onChange:a.default.func,onFocus:a.default.func,onBlur:a.default.func,type:a.default.oneOf(["text","tel"]),isAllowed:a.default.func,renderText:a.default.func},l={displayType:"input",decimalSeparator:".",thousandSpacing:"3",fixedDecimalScale:!1,prefix:"",suffix:"",allowNegative:!0,isNumericString:!1,type:"text",onValueChange:u.noop,onChange:u.noop,onKeyDown:u.noop,onMouseUp:u.noop,onFocus:u.noop,onBlur:u.noop,isAllowed:u.returnTrue},f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.validateProps();var r=n.formatValueProp();return n.state={value:r,numAsString:n.removeFormatting(r)},n.onChange=n.onChange.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidUpdate",value:function(e){this.updateValueIfRequired(e)}},{key:"updateValueIfRequired",value:function(e){var t=this.props,n=this.state;if(e!==t){this.validateProps();var r=n.value,i=n.numAsString||"",a=void 0===t.value?this.formatNumString(i):this.formatValueProp();a!==r&&this.setState({value:a,numAsString:this.removeFormatting(a)})}}},{key:"getFloatString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.getSeparators(),n=t.decimalSeparator,r=this.getNumberRegex(!0),i="-"===e[0];i&&(e=e.replace("-",""));var a=(e=(e.match(r)||[]).join("").replace(n,".")).indexOf(".");return-1!==a&&(e=e.substring(0,a)+"."+e.substring(a+1,e.length).replace(new RegExp((0,u.escapeRegExp)(n),"g"),"")),i&&(e="-"+e),e}},{key:"getNumberRegex",value:function(e,t){var n=this.props,r=n.format,i=n.decimalScale,a=this.getSeparators().decimalSeparator;return new RegExp("\\d"+(!a||0===i||t||r?"":"|"+(0,u.escapeRegExp)(a)),e?"g":void 0)}},{key:"getSeparators",value:function(){var e=this.props,t=e.decimalSeparator,n=e.thousandSpacing,r=this.props.thousandSeparator;return!0===r&&(r=","),{decimalSeparator:t,thousandSeparator:r,thousandSpacing:n}}},{key:"getMaskAtIndex",value:function(e){var t=this.props.mask,n=void 0===t?" ":t;return"string"===typeof n?n:n[e]||" "}},{key:"validateProps",value:function(){var e=this.props.mask,t=this.getSeparators(),n=t.decimalSeparator,r=t.thousandSeparator;if(n===r)throw new Error("\n          Decimal separator can't be same as thousand separator.\n\n          thousandSeparator: "+r+' (thousandSeparator = {true} is same as thousandSeparator = ",")\n          decimalSeparator: '+n+" (default value for decimalSeparator is .)\n       ");if(e&&("string"===e?e:e.toString()).match(/\d/g))throw new Error("\n          Mask "+e+" should not contain numeric character;\n        ")}},{key:"splitDecimal",value:function(e){var t=this.props.allowNegative,n="-"===e[0],r=n&&t,i=(e=e.replace("-","")).split(".");return{beforeDecimal:i[0],afterDecimal:i[1]||"",hasNagation:n,addNegation:r}}},{key:"setPatchedCaretPosition",value:function(e,t,n){(0,u.setCaretPosition)(e,t),setTimeout((function(){e.value===n&&(0,u.setCaretPosition)(e,t)}),0)}},{key:"correctCaretPosition",value:function(e,t,n){var r=this.props,i=r.prefix,a=r.suffix,o=r.format;if(!o){var s="-"===e[0];return Math.min(Math.max(t,i.length+(s?1:0)),e.length-a.length)}if("function"===typeof o)return t;if("#"===o[t]&&(0,u.charIsNumber)(e[t]))return t;if("#"===o[t-1]&&(0,u.charIsNumber)(e[t-1]))return t;var c=o.indexOf("#"),l=o.lastIndexOf("#");t=Math.min(Math.max(t,c),l+1);for(var f=o.substring(t,o.length).indexOf("#"),h=t,d=t+(-1===f?0:f);h>c&&("#"!==o[h]||!(0,u.charIsNumber)(e[h]));)h-=1;return!(0,u.charIsNumber)(e[d])||"left"===n&&t!==c||t-h<d-t?h+1:d}},{key:"getCaretPosition",value:function(e,t,n){var r=this.props.format,i=this.state.value,a=this.getNumberRegex(!0),o=(e.match(a)||[]).join(""),u=(t.match(a)||[]).join(""),s=void 0,c=void 0;for(s=0,c=0;c<n;c++){var l=e[c]||"",f=t[s]||"";if((l.match(a)||l===f)&&("0"!==l||!f.match(a)||"0"===f||o.length===u.length)){for(;l!==t[s]&&s<t.length;)s++;s++}}return"string"!==typeof r||i||(s=t.length),s=this.correctCaretPosition(t,s)}},{key:"removePrefixAndSuffix",value:function(e){var t=this.props,n=t.format,r=t.prefix,i=t.suffix;if(!n&&e){var a="-"===e[0];a&&(e=e.substring(1,e.length));var o=(e=r&&0===e.indexOf(r)?e.substring(r.length,e.length):e).lastIndexOf(i);e=i&&-1!==o&&o===e.length-i.length?e.substring(0,o):e,a&&(e="-"+e)}return e}},{key:"removePatternFormatting",value:function(e){for(var t=this.props.format.split("#").filter((function(e){return""!==e})),n=0,r="",i=0,a=t.length;i<=a;i++){var o=t[i]||"",u=i===a?e.length:e.indexOf(o,n);if(-1===u){r=e;break}r+=e.substring(n,u),n=u+o.length}return(r.match(/\d/g)||[]).join("")}},{key:"removeFormatting",value:function(e){var t=this.props,n=t.format,r=t.removeFormatting;return e?(n?e="string"===typeof n?this.removePatternFormatting(e):"function"===typeof r?r(e):(e.match(/\d/g)||[]).join(""):(e=this.removePrefixAndSuffix(e),e=this.getFloatString(e)),e):e}},{key:"formatWithPattern",value:function(e){for(var t=this.props.format,n=0,r=t.split(""),i=0,a=t.length;i<a;i++)"#"===t[i]&&(r[i]=e[n]||this.getMaskAtIndex(n),n+=1);return r.join("")}},{key:"formatThousand",value:function(e,t,n){var r=void 0;switch(n){case u.thousandGroupSpacing.two:r=/(\d)(?=(\d{2})+(?!\d))/g;break;case u.thousandGroupSpacing.twoScaled:r=/(\d)(?=(((\d{2})+)(\d{1})(?!\d)))/g;break;case u.thousandGroupSpacing.four:r=/(\d)(?=(\d{4})+(?!\d))/g;break;default:r=/(\d)(?=(\d{3})+(?!\d))/g}return e.replace(r,"$1"+t)}},{key:"formatAsNumber",value:function(e){var t=this.props,n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix,a=t.suffix,o=this.getSeparators(),s=o.thousandSeparator,c=o.decimalSeparator,l=o.thousandSpacing,f=-1!==e.indexOf(".")||n&&r,h=this.splitDecimal(e),d=h.beforeDecimal,p=h.afterDecimal,v=h.addNegation;return void 0!==n&&(p=(0,u.limitToScale)(p,n,r)),s&&(d=this.formatThousand(d,s,l)),i&&(d=i+d),a&&(p+=a),v&&(d="-"+d),e=d+(f&&c||"")+p}},{key:"formatNumString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.format,n=e;return""===e?n="":"-"!==e||t?n="string"===typeof t?this.formatWithPattern(n):"function"===typeof t?t(n):this.formatAsNumber(n):(n="-",e=""),n}},{key:"formatValueProp",value:function(){var e=this.props,t=e.format,n=e.decimalScale,r=e.fixedDecimalScale,i=this.props,a=i.value,o=i.isNumericString;return void 0===a?"":("number"===typeof a&&(a=a.toString(),o=!0),o&&!t&&"number"===typeof n&&(a=(0,u.roundToPrecision)(a,n,r)),o?this.formatNumString(a):this.formatInput(a))}},{key:"formatNegation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.allowNegative,n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),a=r.test(e);return e=e.replace(/-/g,""),i&&!a&&t&&(e="-"+e),e}},{key:"formatInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.format;return t||(e=this.formatNegation(e)),e=this.removeFormatting(e),this.formatNumString(e)}},{key:"isCharacterAFormat",value:function(e,t){var n=this.props,r=n.format,i=n.prefix,a=n.suffix,o=n.decimalScale,u=n.fixedDecimalScale,s=this.getSeparators().decimalSeparator;return"string"===typeof r&&"#"!==r[e]||!(r||!(e<i.length||e>=t.length-a.length||o&&u&&t[e]===s))}},{key:"checkIfFormatGotDeleted",value:function(e,t,n){for(var r=e;r<t;r++)if(this.isCharacterAFormat(r,n))return!0;return!1}},{key:"correctInputValue",value:function(e,t,n){var r=this.props.format,i=this.state.numAsString||"";if(n.length>=t.length||!n.length)return n;var a=e,o=(0,u.splitString)(t,e),s=(0,u.splitString)(n,e),c=o[1].lastIndexOf(s[1]),l=a+(-1!==c?o[1].substring(0,c):"").length;if(this.checkIfFormatGotDeleted(a,l,t)&&(n=t),!r){var f=this.removeFormatting(n),h=this.splitDecimal(f),d=h.beforeDecimal,p=h.afterDecimal,v=h.addNegation;if(f.length<i.length&&""===d&&!parseFloat(p))return v?"-":""}return n}},{key:"onChange",value:function(e){e.persist();var t=e.target,n=t.value,r=this.state,i=this.props,a=i.isAllowed,o=r.value||"",u=Math.max(t.selectionStart,t.selectionEnd);n=this.correctInputValue(u,o,n);var s=this.formatInput(n)||"",c=this.removeFormatting(s),l={formattedValue:s,value:c,floatValue:parseFloat(c)};a(l)||(s=o),t.value=s;var f=this.getCaretPosition(n,s,u);this.setPatchedCaretPosition(t,f,s),s!==o?this.setState({value:s,numAsString:c},(function(){i.onValueChange(l),i.onChange(e)})):i.onChange(e)}},{key:"onBlur",value:function(e){var t=this.props,n=this.state,r=t.format,i=t.onBlur,a=n.numAsString,o=n.value;if(!r){a=(0,u.fixLeadingZero)(a);var s=this.formatNumString(a),c={formattedValue:s,value:a,floatValue:parseFloat(a)};if(s!==o)return e.persist(),void this.setState({value:s,numAsString:a},(function(){t.onValueChange(c),i(e)}))}i(e)}},{key:"onKeyDown",value:function(e){var t=e.target,n=e.key,r=t.selectionEnd,i=t.value,a=t.selectionStart,o=void 0,u=this.props,s=u.decimalScale,c=u.fixedDecimalScale,l=u.prefix,f=u.suffix,h=u.format,d=u.onKeyDown,p=void 0!==s&&c,v=this.getNumberRegex(!1,p),m=new RegExp("-"),y="string"===typeof h;if("ArrowLeft"===n||"Backspace"===n?o=a-1:"ArrowRight"===n?o=a+1:"Delete"===n&&(o=a),void 0!==o&&a===r){var g=o,k=y?h.indexOf("#"):l.length,b=y?h.lastIndexOf("#")+1:i.length-f.length;if("ArrowLeft"===n||"ArrowRight"===n){var w="ArrowLeft"===n?"left":"right";g=this.correctCaretPosition(i,o,w)}else if("Delete"!==n||v.test(i[o])||m.test(i[o])){if("Backspace"===n&&!v.test(i[o])&&!m.test(i[o])){for(;!v.test(i[g-1])&&g>k;)g--;g=this.correctCaretPosition(i,g,"left")}}else for(;!v.test(i[g])&&g<b;)g++;(g!==o||o<k||o>b)&&(e.preventDefault(),this.setPatchedCaretPosition(t,g,i)),e.isUnitTestRun&&this.setPatchedCaretPosition(t,g,i),this.props.onKeyDown(e)}else d(e)}},{key:"onMouseUp",value:function(e){var t=e.target,n=t.selectionStart,r=t.selectionEnd,i=t.value;if(n===r){var a=this.correctCaretPosition(i,n);a!==n&&this.setPatchedCaretPosition(t,a,i)}this.props.onMouseUp(e)}},{key:"onFocus",value:function(e){var t=this;e.persist(),setTimeout((function(){var n=e.target,r=n.selectionStart,i=n.value,a=t.correctCaretPosition(i,r);a!==r&&t.setPatchedCaretPosition(n,a,i),t.props.onFocus(e)}))}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.displayType,i=e.customInput,a=e.renderText,s=this.state.value,l=(0,u.omit)(this.props,c),f=r({},l,{type:t,value:s,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp,onFocus:this.onFocus,onBlur:this.onBlur});if("text"===n)return a?a(s)||null:o.default.createElement("span",l,s);if(i){var h=i;return o.default.createElement(h,f)}return o.default.createElement("input",f)}}]),t}(o.default.Component);f.propTypes=c,f.defaultProps=l,e.exports=f},432:function(e,t){"use strict";function n(e,t,n){for(var r="",i=n?"0":"",a=0;a<=t-1;a++)r+=e[a]||i;return r}Object.defineProperty(t,"__esModule",{value:!0}),t.noop=function(){},t.returnTrue=function(){return!0},t.charIsNumber=function(e){return!!(e||"").match(/\d/)},t.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},t.fixLeadingZero=function(e){if(!e)return e;var t="-"===e[0];t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")},t.splitString=function(e,t){return[e.substring(0,t),e.substring(t)]},t.limitToScale=n,t.roundToPrecision=function(e,t,r){var i=e.split("."),a=parseFloat("0."+(i[1]||"0")).toFixed(t).split("."),o=i[0].split("").reverse().reduce((function(e,t,n){return e.length>n?(Number(e[0])+Number(t)).toString()+e.substring(1,e.length):t+e}),a[0]),u=n(a[1]||"",(i[1]||"").length,r);return o+(u?"."+u:"")},t.omit=function(e,t){var n={};return Object.keys(e).forEach((function(r){t[r]||(n[r]=e[r])})),n},t.setCaretPosition=function(e,t){if(e.value=e.value,null!==e){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}};t.thousandGroupSpacing={two:"2",twoScaled:"2s",three:"3",four:"4"}},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function Z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case I:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function H(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&H(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ae(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Se=null;function Ie(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ee(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Te(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Se)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function Ze(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qe(i),e;if(o===r)return qe(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,St,It,Et=!1,Tt=[],Ct=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void It(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Et=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(Vt),Rt.forEach(Vt)}function Zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return Zt(t,e)}if(0<Tt.length){Zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Zt(Ct,e),null!==Nt&&Zt(Nt,e),null!==At&&Zt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var zt=b.ReactCurrentBatchConfig,qt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Wt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,Ht,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Qt(e,t,n,r))&&qr(e,t,r,Ht,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Ht=null;function Qt(e,t,n,r){if(Ht=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function In(){return Sn}var En=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function Hn(e){Ur(e,0)}function Qn(e){if(G(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(l){var Xn;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Xn=Jn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Gn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Kn(t,Gn,e,we(e)),Pe(Hn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function ar(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=H();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=H((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==H(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Sr={};function Ir(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return _r[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Nr=Ir("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),s(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Er,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Zr]){e[Zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zr]||(t[Zr]=!0,jr("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Wt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Er:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Hr(o,u,s,l,!1),null!==c&&null!==f&&Hr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(qn(u))if(Yn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,Bn=!0)),0<(y=Wr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Jt=Xt=Yt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Re(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Si(e){return{current:e}}function Ii(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ei(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Si(Ti),Ni=Si(!1),Ai=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ii(Ni),Ii(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(Ci),Ei(Ci,e)):Ii(Ni),Ei(Ni,n)}var Ui=null,Vi=!1,ji=!1;function Zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Je,Bi),i}finally{kt=t,ji=!1}}return null}var zi=b.ReactCurrentBatchConfig;function qi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ki=Si(null),Wi=null,Gi=null,Hi=null;function Qi(){Hi=Gi=Wi=null}function $i(e){var t=Ki.current;Ii(Ki),e._currentValue=t}function Yi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Xi(e,t){Wi=e,Hi=Gi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Ji(e){var t=e._currentValue;if(Hi!==e)if(e={context:e,memoizedValue:t,next:null},null===Gi){if(null===Wi)throw Error(a(308));Gi=e,Wi.dependencies={lanes:0,firstContext:e}}else Gi=Gi.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sa(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:ta=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ds|=o,e.lanes=o,e.memoizedState=f}}function ca(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var la=(new r.Component).refs;function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ha={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ys(),i=Xs(e),a=ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Js(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ys(),i=Xs(e),a=ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Js(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ys(),r=Xs(e),i=ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),aa(e,i),null!==(t=Js(e,r,n))&&oa(t,e,r)}};function da(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function pa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ji(a):(i=Ri(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ha,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ha.enqueueReplaceState(t,t.state,null)}function ma(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=la,na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ji(a):(a=Ri(t)?Ai:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(fa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ha.enqueueReplaceState(i,i.state,null),sa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var ya=[],ga=0,ka=null,ba=0,wa=[],xa=0,_a=null,Sa=1,Ia="";function Ea(e,t){ya[ga++]=ba,ya[ga++]=ka,ka=e,ba=t}function Ta(e,t,n){wa[xa++]=Sa,wa[xa++]=Ia,wa[xa++]=_a,_a=e;var r=Sa;e=Ia;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Sa=1<<32-ot(t)+i|n<<i|r,Ia=a+e}else Sa=1<<a|n<<i|r,Ia=e}function Ca(e){null!==e.return&&(Ea(e,1),Ta(e,1,0))}function Na(e){for(;e===ka;)ka=ya[--ga],ya[ga]=null,ba=ya[--ga],ya[ga]=null;for(;e===_a;)_a=wa[--xa],wa[xa]=null,Ia=wa[--xa],wa[xa]=null,Sa=wa[--xa],wa[xa]=null}var Aa=null,Pa=null,Ra=!1,Da=null;function Oa(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function La(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Aa=e,Pa=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Aa=e,Pa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==_a?{id:Sa,overflow:Ia}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Aa=e,Pa=null,!0);default:return!1}}function Ma(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Fa(e){if(Ra){var t=Pa;if(t){var n=t;if(!La(e,t)){if(Ma(e))throw Error(a(418));t=ci(n.nextSibling);var r=Aa;t&&La(e,t)?Oa(r,n):(e.flags=-4097&e.flags|2,Ra=!1,Aa=e)}}else{if(Ma(e))throw Error(a(418));e.flags=-4097&e.flags|2,Ra=!1,Aa=e}}}function Ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Aa=e}function Va(e){if(e!==Aa)return!1;if(!Ra)return Ua(e),Ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Pa)){if(Ma(e)){for(e=Pa;e;)e=ci(e.nextSibling);throw Error(a(418))}for(;t;)Oa(e,t),t=ci(t.nextSibling)}if(Ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Pa=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Pa=null}}else Pa=Aa?ci(e.stateNode.nextSibling):null;return!0}function ja(){Pa=Aa=null,Ra=!1}function Za(e){null===Da?Da=[e]:Da.push(e)}function Ba(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===la&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function za(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qa(e){return(0,e._init)(e._payload)}function Ka(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&qa(a)===t.type)?((r=i(t,n.props)).ref=Ba(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Ba(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Ba(e,null,t),n.return=e,n;case x:return(t=Fc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Oc(t,e.mode,n,null)).return=e,t;za(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);za(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);za(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),Ra&&Ea(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Ra&&Ea(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),Ra&&Ea(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),Ra&&Ea(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return Ra&&Ea(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Ra&&Ea(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ba(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Oc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Dc(o.type,o.key,o.props,null,r.mode,s)).ref=Ba(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);za(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Wa=Ka(!0),Ga=Ka(!1),Ha={},Qa=Si(Ha),$a=Si(Ha),Ya=Si(Ha);function Xa(e){if(e===Ha)throw Error(a(174));return e}function Ja(e,t){switch(Ei(Ya,t),Ei($a,e),Ei(Qa,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Qa),Ei(Qa,t)}function eo(){Ii(Qa),Ii($a),Ii(Ya)}function to(e){Xa(Ya.current);var t=Xa(Qa.current),n=se(t,e.type);t!==n&&(Ei($a,e),Ei(Qa,n))}function no(e){$a.current===e&&(Ii(Qa),Ii($a))}var ro=Si(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var uo=b.ReactCurrentDispatcher,so=b.ReactCurrentBatchConfig,co=0,lo=null,fo=null,ho=null,po=!1,vo=!1,mo=0,yo=0;function go(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function bo(e,t,n,r,i,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=null===e||null===e.memoizedState?ru:iu,e=n(r,i),vo){o=0;do{if(vo=!1,mo=0,25<=o)throw Error(a(301));o+=1,ho=fo=null,t.updateQueue=null,uo.current=au,e=n(r,i)}while(vo)}if(uo.current=nu,t=null!==fo&&null!==fo.next,co=0,ho=fo=lo=null,po=!1,t)throw Error(a(300));return e}function wo(){var e=0!==mo;return mo=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?lo.memoizedState=ho=e:ho=ho.next=e,ho}function _o(){if(null===fo){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?lo.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?lo.memoizedState=ho=e:ho=ho.next=e}return ho}function So(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=_o(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((co&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,lo.lanes|=f,Ds|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,lo.lanes|=o,Ds|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=_o(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function Co(e,t){var n=lo,r=_o(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Vo(Po.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Oo(9,Ao.bind(null,n,r,i,t),void 0,null),null===Es)throw Error(a(349));0!==(30&co)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ao(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&Js(e,1,-1)}function Po(e,t,n){return n((function(){Ro(t)&&Js(e,1,-1)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Do(e){var t=xo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,lo,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return _o().memoizedState}function Mo(e,t,n,r){var i=xo();lo.flags|=e,i.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function Fo(e,t,n,r){var i=_o();r=void 0===r?null:r;var a=void 0;if(null!==fo){var o=fo.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Oo(t,n,a,r))}lo.flags|=e,i.memoizedState=Oo(1|t,n,a,r)}function Uo(e,t){return Mo(8390656,8,e,t)}function Vo(e,t){return Fo(2048,8,e,t)}function jo(e,t){return Fo(4,2,e,t)}function Zo(e,t){return Fo(4,4,e,t)}function Bo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,Bo.bind(null,t,e),n)}function qo(){}function Ko(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Go(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),lo.lanes|=n,Ds|=n,e.baseState=!0),t)}function Ho(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{kt=n,so.transition=r}}function Qo(){return _o().memoizedState}function $o(e,t,n){var r=Xs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xo(e)?Jo(t,n):(eu(e,t,n),null!==(e=Js(e,r,n=Ys()))&&tu(e,t,r))}function Yo(e,t,n){var r=Xs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xo(e))Jo(t,i);else{eu(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o))return}catch(s){}null!==(e=Js(e,r,n=Ys()))&&tu(e,t,r)}}function Xo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function Jo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eu(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function tu(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var nu={readContext:Ji,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ru={readContext:Ji,useCallback:function(e,t){return xo().memoizedState=[e,void 0===t?null:t],e},useContext:Ji,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,Bo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=xo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$o.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xo().memoizedState=e},useState:Do,useDebugValue:qo,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Ho.bind(null,e[1]),xo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,i=xo();if(Ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Es)throw Error(a(349));0!==(30&co)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Po.bind(null,r,o,e),[e]),r.flags|=2048,Oo(9,Ao.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=xo(),t=Es.identifierPrefix;if(Ra){var n=Ia;t=":"+t+"R"+(n=(Sa&~(1<<32-ot(Sa)-1)).toString(32)+n),0<(n=mo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=yo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iu={readContext:Ji,useCallback:Ko,useContext:Ji,useEffect:Vo,useImperativeHandle:zo,useInsertionEffect:jo,useLayoutEffect:Zo,useMemo:Wo,useReducer:Io,useRef:Lo,useState:function(){return Io(So)},useDebugValue:qo,useDeferredValue:function(e){return Go(_o(),fo.memoizedState,e)},useTransition:function(){return[Io(So)[0],_o().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Qo,unstable_isNewReconciler:!1},au={readContext:Ji,useCallback:Ko,useContext:Ji,useEffect:Vo,useImperativeHandle:zo,useInsertionEffect:jo,useLayoutEffect:Zo,useMemo:Wo,useReducer:Eo,useRef:Lo,useState:function(){return Eo(So)},useDebugValue:qo,useDeferredValue:function(e){var t=_o();return null===fo?t.memoizedState=e:Go(t,fo.memoizedState,e)},useTransition:function(){return[Eo(So)[0],_o().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Qo,unstable_isNewReconciler:!1};function ou(e,t){try{var n="",r=t;do{n+=Z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var su,cu,lu,fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zs||(Zs=!0,Bs=r),uu(0,t)},n}function du(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uu(0,t),"function"!==typeof r&&(null===zs?zs=new Set([this]):zs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function vu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function mu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function yu(e,t){if(!Ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ku(e,t,n){var r=t.pendingProps;switch(Na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gu(t),null;case 1:case 17:return Ri(t.type)&&Di(),gu(t),null;case 3:return r=t.stateNode,eo(),Ii(Ni),Ii(Ci),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Va(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Da&&(ac(Da),Da=null))),gu(t),null;case 5:no(t);var i=Xa(Ya.current);if(n=t.type,null!==e&&null!=t.stateNode)cu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return gu(t),null}if(e=Xa(Qa.current),Va(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":W(r),J(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,su(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Q(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),J(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return gu(t),null;case 6:if(e&&null!=t.stateNode)lu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Xa(Ya.current),Xa(Qa.current),Va(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=Aa))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return gu(t),null;case 13:if(Ii(ro),r=t.memoizedState,Ra&&null!==Pa&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Pa;r;)r=ci(r.nextSibling);return ja(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Va(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[hi]=t}else ja(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return gu(t),null}return null!==Da&&(ac(Da),Da=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Va(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Ps&&(Ps=3):pc())),null!==t.updateQueue&&(t.flags|=4),gu(t),null);case 4:return eo(),null===e&&Br(t.stateNode.containerInfo),gu(t),null;case 10:return $i(t.type._context),gu(t),null;case 19:if(Ii(ro),null===(o=t.memoizedState))return gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)yu(o,!1);else{if(0!==Ps||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=io(e))){for(t.flags|=128,yu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>Vs&&(t.flags|=128,r=!0,yu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),yu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Ra)return gu(t),null}else 2*Ye()-o.renderingStartTime>Vs&&1073741824!==n&&(t.flags|=128,r=!0,yu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=ro.current,Ei(ro,r?1&n|2:1&n),t):(gu(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ns)&&(gu(t),6&t.subtreeFlags&&(t.flags|=8192)):gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}su=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xa(Qa.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var bu=b.ReactCurrentOwner,wu=!1;function xu(e,t,n,r){t.child=null===e?Ga(t,null,n,r):Wa(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Xi(t,i),r=bo(e,t,n,r,a,i),n=wo(),null===e||wu?(Ra&&n&&Ca(t),t.flags|=1,xu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qu(e,t,i))}function Su(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return qu(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,qu(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Cu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(As,Ns),Ns|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(As,Ns),Ns|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(As,Ns),Ns|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(As,Ns),Ns|=r;return xu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,i){var a=Ri(n)?Ai:Ci.current;return a=Pi(t,a),Xi(t,i),n=bo(e,t,n,r,a,i),r=wo(),null===e||wu?(Ra&&r&&Ca(t),t.flags|=1,xu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qu(e,t,i))}function Nu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Xi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ma(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ji(c):c=Pi(t,c=Ri(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&va(t,o,r,c),ta=!1;var h=t.memoizedState;o.state=h,sa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||ta?("function"===typeof l&&(fa(t,n,l,r),s=t.memoizedState),(u=ta||da(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:qi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ji(s):s=Pi(t,s=Ri(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&va(t,o,r,s),ta=!1,h=t.memoizedState,o.state=h,sa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||ta?("function"===typeof d&&(fa(t,n,d,r),p=t.memoizedState),(c=ta||da(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),qu(e,t,a);r=t.stateNode,bu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Wa(t,e.child,null,a),t.child=Wa(t,null,u,a)):xu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Pu(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Ja(e,t.containerInfo)}function Ru(e,t,n,r,i){return ja(),Za(i),t.flags|=256,xu(e,t,n,r),t.child}var Du={dehydrated:null,treeContext:null,retryLane:0};function Ou(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lu(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Mu(e,t,n){var r,i=t.pendingProps,o=ro.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(ro,1&o),null===e)return Fa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Lc(o,i,0,null),e=Oc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Ou(n),t.memoizedState=Du,e):Fu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,ju(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Lc({mode:"visible",children:i.children},o,0,null),(u=Oc(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&Wa(t,e.child,null,n),t.child.memoizedState=Ou(n),t.memoizedState=Du,u);if(0===(1&t.mode))t=ju(e,t,n,null);else if("$!"===r.data)t=ju(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),wu||i){if(null!==(i=Es)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Js(e,i,-1))}pc(),t=ju(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Pa=ci(r.nextSibling),Aa=t,Ra=!0,Da=null,null!==n&&(wa[xa++]=Sa,wa[xa++]=Ia,wa[xa++]=_a,Sa=n.id,Ia=n.overflow,_a=t),(t=Fu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Vu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Du,i):(n=Uu(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Vu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Du,i):(n=Uu(e,t,i.children,n),t.memoizedState=null,n)}function Fu(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){var i=e.child;return e=i.sibling,n=Rc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Vu(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=Rc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Rc(o,r):(r=Oc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ju(e,t,n,r){return null!==r&&Za(r),Wa(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Yi(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(xu(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Zu(e,n,t);else if(19===e.tag)Zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ds|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){switch(Na(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ii(Ni),Ii(Ci),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ii(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ja()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(ro),null;case 4:return eo(),null;case 10:return $i(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var Wu=!1,Gu=!1,Hu="function"===typeof WeakSet?WeakSet:Set,Qu=null;function $u(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function Yu(e,t,n){try{n()}catch(r){_c(e,t,r)}}var Xu=!1;function Ju(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Yu(t,n,a)}i=i.next}while(i!==r)}}function es(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ts(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ns(e){var t=e.alternate;null!==t&&(e.alternate=null,ns(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rs(e){return 5===e.tag||3===e.tag||4===e.tag}function is(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function as(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(as(e,t,n),e=e.sibling;null!==e;)as(e,t,n),e=e.sibling}function os(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(os(e,t,n),e=e.sibling;null!==e;)os(e,t,n),e=e.sibling}var us=null,ss=!1;function cs(e,t,n){for(n=n.child;null!==n;)ls(e,t,n),n=n.sibling}function ls(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Gu||$u(n,t);case 6:var r=us,i=ss;us=null,cs(e,t,n),ss=i,null!==(us=r)&&(ss?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ss?(e=us,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(us,n.stateNode));break;case 4:r=us,i=ss,us=n.stateNode.containerInfo,ss=!0,cs(e,t,n),us=r,ss=i;break;case 0:case 11:case 14:case 15:if(!Gu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Yu(n,t,o),i=i.next}while(i!==r)}cs(e,t,n);break;case 1:if(!Gu&&($u(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){_c(n,t,u)}cs(e,t,n);break;case 21:cs(e,t,n);break;case 22:1&n.mode?(Gu=(r=Gu)||null!==n.memoizedState,cs(e,t,n),Gu=r):cs(e,t,n);break;default:cs(e,t,n)}}function fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Hu),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ss=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ss=!0;break e}s=s.return}if(null===us)throw Error(a(160));ls(o,u,i),us=null,ss=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){_c(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ds(t,e),t=t.sibling}function ds(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hs(t,e),ps(e),4&r){try{Ju(3,e,e.return),es(3,e)}catch(v){_c(e,e.return,v)}try{Ju(5,e,e.return)}catch(v){_c(e,e.return,v)}}break;case 1:hs(t,e),ps(e),512&r&&null!==n&&$u(n,n.return);break;case 5:if(hs(t,e),ps(e),512&r&&null!==n&&$u(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(v){_c(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&Y(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(v){_c(e,e.return,v)}}break;case 6:if(hs(t,e),ps(e),4&r){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(v){_c(e,e.return,v)}}break;case 3:if(hs(t,e),ps(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(v){_c(e,e.return,v)}break;case 4:default:hs(t,e),ps(e);break;case 13:hs(t,e),ps(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(Us=Ye()),4&r&&fs(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Gu=(f=Gu)||l,hs(t,e),Gu=f):hs(t,e),ps(e),8192&r){f=null!==e.memoizedState;e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,f?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=d.stateNode,u=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(v){_c(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(v){_c(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(f&&!l&&0!==(1&e.mode))for(Qu=e,e=e.child;null!==e;){for(l=Qu=e;null!==Qu;){switch(h=(f=Qu).child,f.tag){case 0:case 11:case 14:case 15:Ju(4,f,f.return);break;case 1:if($u(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){d=f,p=f.return;try{i=d,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(v){_c(d,p,v)}}break;case 5:$u(f,f.return);break;case 22:if(null!==f.memoizedState){gs(l);continue}}null!==h?(h.return=f,Qu=h):gs(l)}e=e.sibling}}break;case 19:hs(t,e),ps(e),4&r&&fs(e);case 21:}}function ps(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rs(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),os(e,is(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;as(e,is(e),o);break;default:throw Error(a(161))}}catch(u){_c(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vs(e,t,n){Qu=e,ms(e,t,n)}function ms(e,t,n){for(var r=0!==(1&e.mode);null!==Qu;){var i=Qu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Wu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Gu;u=Wu;var c=Gu;if(Wu=o,(Gu=s)&&!c)for(Qu=i;null!==Qu;)s=(o=Qu).child,22===o.tag&&null!==o.memoizedState?ks(i):null!==s?(s.return=o,Qu=s):ks(i);for(;null!==a;)Qu=a,ms(a,t,n),a=a.sibling;Qu=i,Wu=u,Gu=c}ys(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Qu=a):ys(e)}}function ys(e){for(;null!==Qu;){var t=Qu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Gu||es(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Gu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:qi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ca(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ca(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Gu||512&t.flags&&ts(t)}catch(d){_c(t,t.return,d)}}if(t===e){Qu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qu=n;break}Qu=t.return}}function gs(e){for(;null!==Qu;){var t=Qu;if(t===e){Qu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qu=n;break}Qu=t.return}}function ks(e){for(;null!==Qu;){var t=Qu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{es(4,t)}catch(s){_c(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){_c(t,i,s)}}var a=t.return;try{ts(t)}catch(s){_c(t,a,s)}break;case 5:var o=t.return;try{ts(t)}catch(s){_c(t,o,s)}}}catch(s){_c(t,t.return,s)}if(t===e){Qu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Qu=u;break}Qu=t.return}}var bs,ws=Math.ceil,xs=b.ReactCurrentDispatcher,_s=b.ReactCurrentOwner,Ss=b.ReactCurrentBatchConfig,Is=0,Es=null,Ts=null,Cs=0,Ns=0,As=Si(0),Ps=0,Rs=null,Ds=0,Os=0,Ls=0,Ms=null,Fs=null,Us=0,Vs=1/0,js=null,Zs=!1,Bs=null,zs=null,qs=!1,Ks=null,Ws=0,Gs=0,Hs=null,Qs=-1,$s=0;function Ys(){return 0!==(6&Is)?Ye():-1!==Qs?Qs:Qs=Ye()}function Xs(e){return 0===(1&e.mode)?1:0!==(2&Is)&&0!==Cs?Cs&-Cs:null!==zi.transition?(0===$s&&($s=vt()),$s):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function Js(e,t,n){if(50<Gs)throw Gs=0,Hs=null,Error(a(185));var r=ec(e,t);return null===r?null:(yt(r,t,n),0!==(2&Is)&&r===Es||(r===Es&&(0===(2&Is)&&(Os|=t),4===Ps&&oc(r,Cs)),nc(r,n),1===t&&0===Is&&0===(1&e.mode)&&(Vs=Ye()+500,Vi&&Bi())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Es||null!==ea)&&0!==(1&e.mode)&&0===(2&Is)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Es?Cs:0);if(0===r)null!==n&&He(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&He(n),1===t)0===e.tag?function(e){Vi=!0,Zi(e)}(uc.bind(null,e)):Zi(uc.bind(null,e)),oi((function(){0===Is&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Qs=-1,$s=0,0!==(6&Is))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===Es?Cs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Is;Is|=2;var o=dc();for(Es===e&&Cs===t||(js=null,Vs=Ye()+500,fc(e,t));;)try{yc();break}catch(s){hc(e,s)}Qi(),xs.current=o,Is=i,null!==Ts?t=0:(Es=null,Cs=0,t=Ps)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Rs,fc(e,0),oc(e,r),nc(e,Ye()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Rs,fc(e,0),oc(e,r),nc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Fs,js);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Us+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Ys(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Fs,js),t);break}bc(e,Fs,js);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ws(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Fs,js),r);break}bc(e,Fs,js);break;default:throw Error(a(329))}}}return nc(e,Ye()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Ms;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Fs,Fs=n,null!==t&&ac(t)),e}function ac(e){null===Fs?Fs=e:Fs.push.apply(Fs,e)}function oc(e,t){for(t&=~Ls,t&=~Os,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Is))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,Ye()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Rs,fc(e,0),oc(e,t),nc(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Fs,js),nc(e,Ye()),null}function sc(e,t){var n=Is;Is|=1;try{return e(t)}finally{0===(Is=n)&&(Vs=Ye()+500,Vi&&Bi())}}function cc(e){null!==Ks&&0===Ks.tag&&0===(6&Is)&&wc();var t=Is;Is|=1;var n=Ss.transition,r=kt;try{if(Ss.transition=null,kt=1,e)return e()}finally{kt=r,Ss.transition=n,0===(6&(Is=t))&&Bi()}}function lc(){Ns=As.current,Ii(As)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ts)for(n=Ts.return;null!==n;){var r=n;switch(Na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:eo(),Ii(Ni),Ii(Ci),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ii(ro);break;case 10:$i(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Es=e,Ts=e=Rc(e.current,null),Cs=Ns=t,Ps=0,Rs=null,Ls=Os=Ds=0,Fs=Ms=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function hc(e,t){for(;;){var n=Ts;try{if(Qi(),uo.current=nu,po){for(var r=lo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,ho=fo=lo=null,vo=!1,mo=0,_s.current=null,null===n||null===n.return){Ps=1,Rs=t,Ts=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Cs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vu(u);if(null!==p){p.flags&=-257,mu(p,u,s,0,t),1&p.mode&&pu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){pu(o,l,t),pc();break e}c=Error(a(426))}else if(Ra&&1&s.mode){var y=vu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),mu(y,u,s,0,t),Za(c);break e}}o=c,4!==Ps&&(Ps=2),null===Ms?Ms=[o]:Ms.push(o),c=ou(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ua(s,hu(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===zs||!zs.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ua(s,du(s,o,t));break e}}s=s.return}while(null!==s)}kc(n)}catch(b){t=b,Ts===n&&null!==n&&(Ts=n=n.return);continue}break}}function dc(){var e=xs.current;return xs.current=nu,null===e?nu:e}function pc(){0!==Ps&&3!==Ps&&2!==Ps||(Ps=4),null===Es||0===(268435455&Ds)&&0===(268435455&Os)||oc(Es,Cs)}function vc(e,t){var n=Is;Is|=2;var r=dc();for(Es===e&&Cs===t||(js=null,fc(e,t));;)try{mc();break}catch(i){hc(e,i)}if(Qi(),Is=n,xs.current=r,null!==Ts)throw Error(a(261));return Es=null,Cs=0,Ps}function mc(){for(;null!==Ts;)gc(Ts)}function yc(){for(;null!==Ts&&!Qe();)gc(Ts)}function gc(e){var t=bs(e.alternate,e,Ns);e.memoizedProps=e.pendingProps,null===t?kc(e):Ts=t,_s.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ku(n,t,Ns)))return void(Ts=n)}else{if(null!==(n=Ku(n,t)))return n.flags&=32767,void(Ts=n);if(null===e)return Ps=6,void(Ts=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ts=t);Ts=t=e}while(null!==t);0===Ps&&(Ps=5)}function bc(e,t,n){var r=kt,i=Ss.transition;try{Ss.transition=null,kt=1,function(e,t,n,r){do{wc()}while(null!==Ks);if(0!==(6&Is))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Es&&(Ts=Es=null,Cs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qs||(qs=!0,Cc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ss.transition,Ss.transition=null;var u=kt;kt=1;var s=Is;Is|=4,_s.current=null,function(e,t){if(ei=qt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Qu=t;null!==Qu;)if(e=(t=Qu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qu=e;else for(;null!==Qu;){t=Qu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:qi(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;if(1===b.nodeType)b.textContent="";else if(9===b.nodeType){var w=b.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(x){_c(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Qu=e;break}Qu=t.return}v=Xu,Xu=!1}(e,n),ds(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,vs(n,e,i),$e(),Is=s,kt=u,Ss.transition=o}else e.current=n;if(qs&&(qs=!1,Ks=e,Ws=i),0===(o=e.pendingLanes)&&(zs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Zs)throw Zs=!1,e=Bs,Bs=null,e;0!==(1&Ws)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Hs?Gs++:(Gs=0,Hs=e):Gs=0,Bi()}(e,t,n,r)}finally{Ss.transition=i,kt=r}return null}function wc(){if(null!==Ks){var e=bt(Ws),t=Ss.transition,n=kt;try{if(Ss.transition=null,kt=16>e?16:e,null===Ks)var r=!1;else{if(e=Ks,Ks=null,Ws=0,0!==(6&Is))throw Error(a(331));var i=Is;for(Is|=4,Qu=e.current;null!==Qu;){var o=Qu,u=o.child;if(0!==(16&Qu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Qu=l;null!==Qu;){var f=Qu;switch(f.tag){case 0:case 11:case 15:Ju(8,f,o)}var h=f.child;if(null!==h)h.return=f,Qu=h;else for(;null!==Qu;){var d=(f=Qu).sibling,p=f.return;if(ns(f),f===l){Qu=null;break}if(null!==d){d.return=p,Qu=d;break}Qu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Qu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Qu=u;else e:for(;null!==Qu;){if(0!==(2048&(o=Qu).flags))switch(o.tag){case 0:case 11:case 15:Ju(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Qu=g;break e}Qu=o.return}}var k=e.current;for(Qu=k;null!==Qu;){var b=(u=Qu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Qu=b;else e:for(u=k;null!==Qu;){if(0!==(2048&(s=Qu).flags))try{switch(s.tag){case 0:case 11:case 15:es(9,s)}}catch(x){_c(s,s.return,x)}if(s===u){Qu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Qu=w;break e}Qu=s.return}}if(Is=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Ss.transition=t}}return!1}function xc(e,t,n){aa(e,t=hu(0,t=ou(n,t),1)),t=Ys(),null!==(e=ec(e,1))&&(yt(e,1,t),nc(e,t))}function _c(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zs||!zs.has(r))){aa(t,e=du(t,e=ou(n,e),1)),e=Ys(),null!==(t=ec(t,1))&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Ys(),e.pingedLanes|=e.suspendedLanes&n,Es===e&&(Cs&n)===n&&(4===Ps||3===Ps&&(130023424&Cs)===Cs&&500>Ye()-Us?fc(e,0):Ls|=n),nc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Ys();null!==(e=ec(e,t))&&(yt(e,t,n),nc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Cc(e,t){return Ge(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Nc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Oc(n.children,i,o,t);case S:u=8,i|=8;break;case I:return(e=Ac(12,n,t,2|i)).elementType=I,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Ac(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case C:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function jc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Zc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=Zc(null),n=e.current,(a=ia(r=Ys(),i=Xs(n))).callback=void 0!==t&&null!==t?t:null,aa(n,a),e.current.lanes=i,yt(e,i,r),nc(e,r),e}function zc(e,t,n,r){var i=t.current,a=Ys(),o=Xs(i);return n=Zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=Js(i,o,a))&&oa(e,i,o),o}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}bs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Pu(t),ja();break;case 5:to(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Ja(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(Ki,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Ei(ro,1&ro.current),null!==(e=qu(e,t,n))?e.sibling:null);Ei(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return qu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,Ra&&0!==(1048576&t.flags)&&Ta(t,ba,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Pi(t,Ci.current);Xi(t,n),i=bo(null,t,r,e,i,n);var o=wo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=ha,t.stateNode=i,i._reactInternals=t,ma(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,Ra&&o&&Ca(t),xu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=qi(r,e),i){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=Nu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=Su(null,t,r,qi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:qi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Nu(e,t,r,i=t.elementType===r?i:qi(r,i),n);case 3:e:{if(Pu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),sa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Ru(e,t,r,n,i=Error(a(424)));break e}for(Pa=ci(t.stateNode.containerInfo.firstChild),Aa=t,Ra=!0,Da=null,n=Ga(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ja(),r===i){t=qu(e,t,n);break e}xu(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Fa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),xu(e,t,u,n),t.child;case 6:return null===e&&Fa(t),null;case 13:return Mu(e,t,n);case 4:return Ja(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Wa(t,null,r,n):xu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:qi(r,i),n);case 7:return xu(e,t,t.pendingProps,n),t.child;case 8:case 12:return xu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(Ki,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=qu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ia(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Yi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Yi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}xu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Xi(t,n),r=r(i=Ji(i)),t.flags|=1,xu(e,t,r,n),t.child;case 14:return i=qi(r=t.type,t.pendingProps),Su(e,t,r,i=qi(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:qi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Xi(t,n),pa(t,r,i),ma(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Hc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Jc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=qc(o);u.call(e)}}zc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=qc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=qc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),cc((function(){zc(t,s,n,r)})),s}(n,t,e,i,r);return qc(o)}Qc.prototype.render=Hc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zc(e,t,null,null)},Qc.prototype.unmount=Hc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){zc(null,e,null,null)})),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),nc(t,Ye()),0===(6&Is)&&(Vs=Ye()+500,Bi()))}break;case 13:var r=Ys();cc((function(){return Js(e,1,r)})),Wc(e,1)}},xt=function(e){13===e.tag&&(Js(e,134217728,Ys()),Wc(e,134217728))},_t=function(e){if(13===e.tag){var t=Ys(),n=Xs(e);Js(e,n,t),Wc(e,n)}},St=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=sc,Ne=cc;var el={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ee,Te,sc]},tl={findFiberByHostInstance:gi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{it=rl.inject(nl),at=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return jc(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Hc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(a(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(a(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(a(40));return!!e._reactRootContainer&&(cc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=sc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Jc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.1.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(P){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};s(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var x=g.prototype=m.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=g,s(x,"constructor",g),s(g,"constructor",y),y.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(S.prototype),s(S.prototype,o,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new S(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,D(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(E),E=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,I=null,E=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?_():(S=!1,I=null)}}else S=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,_=function(){R.postMessage(null)}}else _=function(){y(A,0)};function D(e){I=e,S||(S=!0,_())}function O(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(E),E=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},144:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return i}})},942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},462:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(878);var i=n(181),a=n(267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||(0,i.Z)(e,t)||(0,a.Z)()}},433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var i=n(199),a=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ce},SDK_VERSION:function(){return Bt},_DEFAULT_ENTRY_NAME:function(){return Nt},_addComponent:function(){return Dt},_addOrOverwriteComponent:function(){return Ot},_apps:function(){return Pt},_clearComponents:function(){return Ut},_components:function(){return Rt},_getProvider:function(){return Mt},_registerComponent:function(){return Lt},_removeServiceInstance:function(){return Ft},deleteApp:function(){return Wt},getApp:function(){return qt},getApps:function(){return Kt},initializeApp:function(){return zt},onLog:function(){return Qt},registerVersion:function(){return Ht},setLogLevel:function(){return $t}});var t=n(791),r=n(250);var i,a=n(439),o=n(880),u=n(86),s=n(462);!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));var c=function(e){return e};var l="beforeunload",f="popstate";function h(e){e.preventDefault(),e.returnValue=""}function d(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function p(){return Math.random().toString(36).substr(2,8)}function v(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function m(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var y=(0,t.createContext)(null);var g=(0,t.createContext)(null);var k=(0,t.createContext)({outlet:null,matches:[]});function b(e,t){if(!e)throw new Error(t)}function w(e,t,n){void 0===n&&(n="/");var r=N(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;var i=x(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=E(i[o],r);return a}function x(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||b(!1),a.relativePath=a.relativePath.slice(r.length));var o=A([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&b(!1),x(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:I(o,e.index),routesMeta:u})})),t}var _=/^:\w+$/,S=function(e){return"*"===e};function I(e,t){var n=e.split("/"),r=n.length;return n.some(S)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!S(e)})).reduce((function(e,t){return e+(_.test(t)?3:""===t?1:10)}),r)}function E(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=T({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:A([i,l.pathname]),pathnameBase:P(A([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=A([i,l.pathnameBase]))}return a}function T(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=(0,a.Z)(n,2),i=r[0],o=r[1],u=t.match(i);if(!u)return null;var s=u[0],c=s.replace(/(.)\/+$/,"$1"),l=u.slice(1);return{params:o.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:s,pathnameBase:c,pattern:e}}function C(e,t,n){var r,i="string"===typeof e?m(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?m(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:R(a),hash:D(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var A=function(e){return e.join("/").replace(/\/\/+/g,"/")},P=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},R=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},D=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function O(e){L()||b(!1);var n=(0,t.useContext)(y),r=n.basename,i=n.navigator,a=U(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?m(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?r+(f?"/":""):A([r,u])}return i.createHref({pathname:c,search:s,hash:o})}function L(){return null!=(0,t.useContext)(g)}function M(){return L()||b(!1),(0,t.useContext)(g).location}function F(){L()||b(!1);var e=(0,t.useContext)(y),n=e.basename,r=e.navigator,i=(0,t.useContext)(k).matches,a=M().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=C(e,JSON.parse(o),a);"/"!==n&&(i.pathname=A([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}function U(e){var n=(0,t.useContext)(k).matches,r=M().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return C(e,JSON.parse(i),r)}),[e,i,r])}function V(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(k.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function j(e){b(!1)}function Z(e){var n=e.basename,r=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?i.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;L()&&b(!1);var d=P(r),p=(0,t.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=m(u));var v=u,k=v.pathname,w=void 0===k?"/":k,x=v.search,_=void 0===x?"":x,S=v.hash,I=void 0===S?"":S,E=v.state,T=void 0===E?null:E,C=v.key,A=void 0===C?"default":C,R=(0,t.useMemo)((function(){var e=N(w,d);return null==e?null:{pathname:e,search:_,hash:I,state:T,key:A}}),[d,w,_,I,T,A]);return null==R?null:(0,t.createElement)(y.Provider,{value:p},(0,t.createElement)(g.Provider,{children:o,value:{location:R,navigationType:c}}))}function B(e){var n=e.children,r=e.location;return function(e,n){L()||b(!1);var r,i=(0,t.useContext)(k).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,M());if(n){var c,l="string"===typeof n?m(n):n;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||b(!1),r=l}else r=s;var f=r.pathname||"/",h=w(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return V(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:A([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:A([u,e.pathnameBase])})})),i)}(z(n),r)}function z(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==j&&b(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=z(e.props.children)),n.push(r)}else n.push.apply(n,z(e.props.children))})),n}function q(){return q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}function K(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var W=["onClick","reloadDocument","replace","state","target","to"];function G(e){var n=e.basename,r=e.children,o=e.window,u=(0,t.useRef)();null==u.current&&(u.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function a(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,c({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;n.addEventListener(f,(function(){if(o)w.call(o),o=null;else{var e=i.Pop,t=a(),n=t[0],r=t[1];if(w.length){if(null!=n){var u=g-n;u&&(o={action:e,location:r,retry:function(){T(-1*u)}},T(u))}}else E(e)}}));var u=i.Pop,y=a(),g=y[0],k=y[1],b=d(),w=d();function x(e){return"string"===typeof e?e:v(e)}function _(e,t){return void 0===t&&(t=null),c((0,s.Z)({pathname:k.pathname,hash:"",search:""},"string"===typeof e?m(e):e,{state:t,key:p()}))}function S(e,t){return[{usr:e.state,key:e.key,idx:t},x(e)]}function I(e,t,n){return!w.length||(w.call({action:e,location:t,retry:n}),!1)}function E(e){u=e;var t=a();g=t[0],k=t[1],b.call({action:u,location:k})}function T(e){r.go(e)}null==g&&(g=0,r.replaceState((0,s.Z)({},r.state,{idx:g}),""));var C={get action(){return u},get location(){return k},createHref:x,push:function e(t,a){var o=i.Push,u=_(t,a);if(I(o,u,(function(){e(t,a)}))){var s=S(u,g+1),c=s[0],l=s[1];try{r.pushState(c,"",l)}catch(f){n.location.assign(l)}E(o)}},replace:function e(t,n){var a=i.Replace,o=_(t,n);if(I(a,o,(function(){e(t,n)}))){var u=S(o,g),s=u[0],c=u[1];r.replaceState(s,"",c),E(a)}},go:T,back:function(){T(-1)},forward:function(){T(1)},listen:function(e){return b.push(e)},block:function(e){var t=w.push(e);return 1===w.length&&n.addEventListener(l,h),function(){t(),w.length||n.removeEventListener(l,h)}}};return C}({window:o}));var y=u.current,g=(0,t.useState)({action:y.action,location:y.location}),k=(0,a.Z)(g,2),b=k[0],w=k[1];return(0,t.useLayoutEffect)((function(){return y.listen(w)}),[y]),(0,t.createElement)(Z,{basename:n,children:r,location:b.location,navigationType:b.action,navigator:y})}var H=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=K(e,W),f=O(c),h=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=F(),s=M(),c=U(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||v(s)===v(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,t.createElement)("a",q({},l,{href:f,onClick:function(e){r&&r(e),e.defaultPrevented||i||h(e)},ref:n,target:s}))}));var Q=n(184),$=(0,t.createContext)(),Y=function(e){var n=e.reducer,r=e.initialState,i=e.children;return(0,Q.jsx)($.Provider,{value:(0,t.useReducer)(n,r),children:i})},X=function(){return(0,t.useContext)($)},J=n(942);function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var te=n(144),ne=n(181);function re(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,ne.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}var ie=n(326),ae=n(611);function oe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,ae.Z)(e,t)}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}function se(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var ce=n(2);function le(e,t){if(t&&("object"===(0,ce.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,ie.Z)(e)}function fe(e){var t=se();return function(){var n,r=ue(e);if(t){var i=ue(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return le(this,n)}}function he(e,t,n){return he=se()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&(0,ae.Z)(i,n.prototype),i},he.apply(null,arguments)}function de(e){var t="function"===typeof Map?new Map:void 0;return de=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return he(e,arguments,ue(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,ae.Z)(n,e)},de(e)}var pe=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(pe(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},me=function(e){return function(e){var t=pe(e);return ve.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ye=function(e){try{return ve.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ge(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ge(e[n],t[n]));return e}var ke=function(){function e(){var t=this;ee(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return(0,te.Z)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function be(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(a)),""].join(".")}function we(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function xe(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function _e(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Se(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ie(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ee(){var e=we();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Te(){return"object"===typeof indexedDB}var Ce=function(e){oe(n,e);var t=fe(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf((0,ie.Z)(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,ie.Z)(a),Ne.prototype.create),a}return(0,te.Z)(n)}(de(Error)),Ne=function(){function e(t,n,r){ee(this,e),this.service=t,this.serviceName=n,this.errors=r}return(0,te.Z)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ae(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ce(n,a,t);return o}}]),e}();function Ae(e,t){return e.replace(Pe,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Pe=/\{\$([^}]+)}/g;function Re(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function De(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Oe(u)&&Oe(s)){if(!De(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Oe(e){return null!==e&&"object"===typeof e}function Le(e){for(var t=[],n=function(){var e=(0,a.Z)(i[r],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Me(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=(0,a.Z)(n,2),i=r[0],o=r[1];t[decodeURIComponent(i)]=decodeURIComponent(o)}})),t}function Fe(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Ue(e,t){var n=new Ve(e,t);return n.subscribe.bind(n)}var Ve=function(){function e(t,n){var r=this;ee(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return(0,te.Z)(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=re(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=je),void 0===r.error&&(r.error=je),void 0===r.complete&&(r.complete=je);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function je(){}function Ze(e){return e&&e._delegate?e._delegate:e}var Be=n(433);function ze(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function qe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ze(a,r,i,o,u,"next",e)}function u(e){ze(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Ke=n(757),We=n.n(Ke),Ge=function(){function e(t,n,r){ee(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return(0,te.Z)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),He="[DEFAULT]",Qe=function(){function e(t,n){ee(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return(0,te.Z)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ke;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:He})}catch(c){}var t,n=re(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,a.Z)(t.value,2),i=r[0],o=r[1],u=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:u});o.resolve(s)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=qe(Ke.mark((function e(){var t;return Ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,Be.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,Be.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,o=this.getOrInitializeService({instanceIdentifier:r,options:n}),u=re(this.instancesDeferred.entries());try{for(u.s();!(i=u.n()).done;){var s=(0,a.Z)(i.value,2),c=s[0],l=s[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(o)}}catch(h){u.e(h)}finally{u.f()}return o}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=re(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(e_){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===He?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(e_){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;return this.component?this.component.multipleInstances?e:He:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var $e,Ye,Xe=function(){function e(t){ee(this,e),this.name=t,this.providers=new Map}return(0,te.Z)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Qe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Je=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ye||(Ye={}));var et={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},tt=Ye.INFO,nt=($e={},(0,J.Z)($e,Ye.DEBUG,"log"),(0,J.Z)($e,Ye.VERBOSE,"log"),(0,J.Z)($e,Ye.INFO,"info"),(0,J.Z)($e,Ye.WARN,"warn"),(0,J.Z)($e,Ye.ERROR,"error"),$e),rt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=nt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},it=function(){function e(t){ee(this,e),this.name=t,this._logLevel=tt,this._logHandler=rt,this._userLogHandler=null,Je.push(this)}return(0,te.Z)(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ye))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?et[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ye.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ye.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ye.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ye.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ye.INFO].concat(t)),this._logHandler.apply(this,[this,Ye.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ye.WARN].concat(t)),this._logHandler.apply(this,[this,Ye.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ye.ERROR].concat(t)),this._logHandler.apply(this,[this,Ye.ERROR].concat(t))}}]),e}();function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){(0,J.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ut,st;var ct=new WeakMap,lt=new WeakMap,ft=new WeakMap,ht=new WeakMap,dt=new WeakMap;var pt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return lt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ft.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function vt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(st||(st=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(gt(this),n),yt(ct.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yt(e.apply(gt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[gt(this),t].concat(r));return ft.set(a,t.sort?t.sort():[t]),yt(a)}}function mt(e){return"function"===typeof e?vt(e):(e instanceof IDBTransaction&&function(e){if(!lt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));lt.set(e,t)}}(e),t=e,(ut||(ut=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,pt):e);var t}function yt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(yt(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&ct.set(t,e)})).catch((function(){})),dt.set(t,e),t}(e);if(ht.has(e))return ht.get(e);var t=mt(e);return t!==e&&(ht.set(e,t),dt.set(t,e)),t}var gt=function(e){return dt.get(e)};var kt,bt,wt=["get","getKey","getAll","getAllKeys","count"],xt=["put","add","delete","clear"],_t=new Map;function St(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(_t.get(t))return _t.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=xt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||wt.includes(n))){var a=function(){var e=qe(Ke.mark((function e(t){var a,o,u,s,c,l,f=arguments;return Ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return _t.set(t,a),a}}}pt=function(e){return ot(ot({},e),{},{get:function(t,n,r){return St(t,n)||e.get(t,n,r)},has:function(t,n){return!!St(t,n)||e.has(t,n)}})}(pt);var It=function(){function e(t){ee(this,e),this.container=t}return(0,te.Z)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Et="@firebase/app",Tt="0.7.24",Ct=new it("@firebase/app"),Nt="[DEFAULT]",At=(kt={},(0,J.Z)(kt,Et,"fire-core"),(0,J.Z)(kt,"@firebase/app-compat","fire-core-compat"),(0,J.Z)(kt,"@firebase/analytics","fire-analytics"),(0,J.Z)(kt,"@firebase/analytics-compat","fire-analytics-compat"),(0,J.Z)(kt,"@firebase/app-check","fire-app-check"),(0,J.Z)(kt,"@firebase/app-check-compat","fire-app-check-compat"),(0,J.Z)(kt,"@firebase/auth","fire-auth"),(0,J.Z)(kt,"@firebase/auth-compat","fire-auth-compat"),(0,J.Z)(kt,"@firebase/database","fire-rtdb"),(0,J.Z)(kt,"@firebase/database-compat","fire-rtdb-compat"),(0,J.Z)(kt,"@firebase/functions","fire-fn"),(0,J.Z)(kt,"@firebase/functions-compat","fire-fn-compat"),(0,J.Z)(kt,"@firebase/installations","fire-iid"),(0,J.Z)(kt,"@firebase/installations-compat","fire-iid-compat"),(0,J.Z)(kt,"@firebase/messaging","fire-fcm"),(0,J.Z)(kt,"@firebase/messaging-compat","fire-fcm-compat"),(0,J.Z)(kt,"@firebase/performance","fire-perf"),(0,J.Z)(kt,"@firebase/performance-compat","fire-perf-compat"),(0,J.Z)(kt,"@firebase/remote-config","fire-rc"),(0,J.Z)(kt,"@firebase/remote-config-compat","fire-rc-compat"),(0,J.Z)(kt,"@firebase/storage","fire-gcs"),(0,J.Z)(kt,"@firebase/storage-compat","fire-gcs-compat"),(0,J.Z)(kt,"@firebase/firestore","fire-fst"),(0,J.Z)(kt,"@firebase/firestore-compat","fire-fst-compat"),(0,J.Z)(kt,"fire-js","fire-js"),(0,J.Z)(kt,"firebase","fire-js-all"),kt),Pt=new Map,Rt=new Map;function Dt(e,t){try{e.container.addComponent(t)}catch(n){Ct.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ot(e,t){e.container.addOrOverwriteComponent(t)}function Lt(e){var t=e.name;if(Rt.has(t))return Ct.debug("There were multiple attempts to register component ".concat(t,".")),!1;Rt.set(t,e);var n,r=re(Pt.values());try{for(r.s();!(n=r.n()).done;){Dt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Mt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ft(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nt;Mt(e,t).clearInstance(n)}function Ut(){Rt.clear()}var Vt=(bt={},(0,J.Z)(bt,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,J.Z)(bt,"bad-app-name","Illegal App name: '{$appName}"),(0,J.Z)(bt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,J.Z)(bt,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,J.Z)(bt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,J.Z)(bt,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,J.Z)(bt,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,J.Z)(bt,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,J.Z)(bt,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,J.Z)(bt,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),bt),jt=new Ne("app","Firebase",Vt),Zt=function(){function e(t,n,r){var i=this;ee(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ge("app",(function(){return i}),"PUBLIC"))}return(0,te.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw jt.create("app-deleted",{appName:this._name})}}]),e}(),Bt="9.8.1";function zt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Nt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw jt.create("bad-app-name",{appName:String(i)});var a=Pt.get(i);if(a){if(De(e,a.options)&&De(r,a.config))return a;throw jt.create("duplicate-app",{appName:i})}var o,u=new Xe(i),s=re(Rt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Zt(e,r,u);return Pt.set(i,l),l}function qt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=Pt.get(e);if(!t)throw jt.create("no-app",{appName:e});return t}function Kt(){return Array.from(Pt.values())}function Wt(e){return Gt.apply(this,arguments)}function Gt(){return(Gt=qe(Ke.mark((function e(t){var n;return Ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Pt.has(n)){e.next=6;break}return Pt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(e,t,n){var r,i=null!==(r=At[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ct.warn(u.join(" "))}Lt(new Ge("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Qt(e,t){if(null!==e&&"function"!==typeof e)throw jt.create("invalid-log-argument");!function(e,t){var n,r=re(Je);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=et[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ye[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function $t(e){var t;t=e,Je.forEach((function(e){e.setLogLevel(t)}))}var Yt="firebase-heartbeat-store",Xt=null;function Jt(){return Xt||(Xt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=yt(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(yt(u.result),e.oldVersion,e.newVersion,yt(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Yt)}}).catch((function(e){throw jt.create("storage-open",{originalErrorMessage:e.message})}))),Xt}function en(e){return tn.apply(this,arguments)}function tn(){return tn=qe(Ke.mark((function e(t){var n;return Ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt();case 3:return n=e.sent,e.abrupt("return",n.transaction(Yt).objectStore(Yt).get(an(t)));case 7:throw e.prev=7,e.t0=e.catch(0),jt.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),tn.apply(this,arguments)}function nn(e,t){return rn.apply(this,arguments)}function rn(){return rn=qe(Ke.mark((function e(t,n){var r,i,a;return Ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt();case 3:return r=e.sent,i=r.transaction(Yt,"readwrite"),a=i.objectStore(Yt),e.next=8,a.put(n,an(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),jt.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),rn.apply(this,arguments)}function an(e){return"".concat(e.name,"!").concat(e.options.appId)}var on=function(){function e(t){var n=this;ee(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new fn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return(0,te.Z)(e,[{key:"triggerHeartbeat",value:function(){var e=qe(Ke.mark((function e(){var t,n,r;return Ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=un(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=qe(Ke.mark((function e(){var t,n,r,i,a;return Ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=un(),n=sn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=me(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function un(){return(new Date).toISOString().substring(0,10)}function sn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=re(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),hn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),hn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var cn,ln,fn=function(){function e(t){ee(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return(0,te.Z)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=qe(Ke.mark((function e(){return Ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=qe(Ke.mark((function e(){var t;return Ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,en(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=qe(Ke.mark((function e(t){var n,r;return Ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",nn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=qe(Ke.mark((function e(t){var n,r;return Ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",nn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,Be.Z)(r.heartbeats),(0,Be.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function hn(e){return me(JSON.stringify({version:2,heartbeats:e})).length}cn="",Lt(new Ge("platform-logger",(function(e){return new It(e)}),"PRIVATE")),Lt(new Ge("heartbeat",(function(e){return new on(e)}),"PRIVATE")),Ht(Et,Tt,cn),Ht(Et,Tt,"esm2017"),Ht("fire-js","");var dn=function(){function e(t,n){var r=this;ee(this,e),this._delegate=t,this.firebase=n,Dt(t,new Ge("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return(0,te.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Wt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Dt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ot(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),pn=(ln={},(0,J.Z)(ln,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,J.Z)(ln,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ln),vn=new Ne("app-compat","Firebase",pn);var mn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=zt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Re(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ht,setLogLevel:$t,onLog:Qt,apps:null,SDK_VERSION:Bt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Lt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw vn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ge(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Re(n,e=e||Nt))throw vn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(dn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ge(n,e)},createSubscribe:Ue,ErrorFactory:Ne,deepExtend:ge}),n}(),yn=new it("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){yn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var gn=self.firebase.SDK_VERSION;gn&&gn.indexOf("LITE")>=0&&yn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var kn=mn;!function(e){Ht("@firebase/app-compat","0.1.25",e)}();kn.registerVersion("firebase","9.8.1","app-compat");var bn=n(878),wn=n(199),xn=n(267);function _n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ue(e)););return e}function Sn(){return Sn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_n(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Sn.apply(this,arguments)}function In(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var En;Object.create;var Tn="facebook.com",Cn="github.com",Nn="google.com",An="password",Pn="twitter.com",Rn="EMAIL_SIGNIN",Dn="PASSWORD_RESET",On="RECOVER_EMAIL",Ln="REVERT_SECOND_FACTOR_ADDITION",Mn="VERIFY_AND_CHANGE_EMAIL",Fn="VERIFY_EMAIL";function Un(){return(0,J.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Vn=function(){var e;return e={},(0,J.Z)(e,"admin-restricted-operation","This operation is restricted to administrators only."),(0,J.Z)(e,"argument-error",""),(0,J.Z)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,J.Z)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,J.Z)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,J.Z)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,J.Z)(e,"cordova-not-ready","Cordova framework is not ready."),(0,J.Z)(e,"cors-unsupported","This browser is not supported."),(0,J.Z)(e,"credential-already-in-use","This credential is already associated with a different user account."),(0,J.Z)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,J.Z)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,J.Z)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,J.Z)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,J.Z)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,J.Z)(e,"email-already-in-use","The email address is already in use by another account."),(0,J.Z)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,J.Z)(e,"expired-action-code","The action code has expired."),(0,J.Z)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,J.Z)(e,"internal-error","An internal AuthError has occurred."),(0,J.Z)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,J.Z)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,J.Z)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,J.Z)(e,"invalid-auth-event","An internal AuthError has occurred."),(0,J.Z)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,J.Z)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,J.Z)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,J.Z)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,J.Z)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,J.Z)(e,"invalid-email","The email address is badly formatted."),(0,J.Z)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,J.Z)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,J.Z)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,J.Z)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,J.Z)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,J.Z)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,J.Z)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,J.Z)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,J.Z)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,J.Z)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,J.Z)(e,"wrong-password","The password is invalid or the user does not have a password."),(0,J.Z)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,J.Z)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,J.Z)(e,"invalid-provider-id","The specified provider ID is invalid."),(0,J.Z)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,J.Z)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,J.Z)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,J.Z)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,J.Z)(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),(0,J.Z)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,J.Z)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,J.Z)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,J.Z)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,J.Z)(e,"missing-continue-uri","A continue URL must be provided in the request."),(0,J.Z)(e,"missing-iframe-start","An internal AuthError has occurred."),(0,J.Z)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,J.Z)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,J.Z)(e,"missing-multi-factor-info","No second factor identifier is provided."),(0,J.Z)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,J.Z)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,J.Z)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,J.Z)(e,"app-deleted","This instance of FirebaseApp has been deleted."),(0,J.Z)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,J.Z)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,J.Z)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,J.Z)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,J.Z)(e,"no-auth-event","An internal AuthError has occurred."),(0,J.Z)(e,"no-such-provider","User was not linked to an account with the given provider."),(0,J.Z)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,J.Z)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,J.Z)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,J.Z)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,J.Z)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,J.Z)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,J.Z)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,J.Z)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,J.Z)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,J.Z)(e,"rejected-credential","The request contains malformed or mismatching credentials."),(0,J.Z)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,J.Z)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,J.Z)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,J.Z)(e,"timeout","The operation has timed out."),(0,J.Z)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,J.Z)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,J.Z)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,J.Z)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,J.Z)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,J.Z)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,J.Z)(e,"unverified-email","The operation requires a verified email."),(0,J.Z)(e,"user-cancelled","The user did not grant your application the permissions it requested."),(0,J.Z)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,J.Z)(e,"user-disabled","The user account has been disabled by an administrator."),(0,J.Z)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,J.Z)(e,"user-signed-out",""),(0,J.Z)(e,"weak-password","The password must be 6 characters long or more."),(0,J.Z)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,J.Z)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},jn=Un,Zn=new Ne("auth","Firebase",Un()),Bn=new it("@firebase/auth");function zn(e){if(Bn.logLevel<=Ye.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Bn.error.apply(Bn,["Auth (".concat(Bt,"): ").concat(e)].concat(n))}}function qn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Hn.apply(void 0,[e].concat(n))}function Kn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Hn.apply(void 0,[e].concat(n))}function Wn(e,t,n){var r=Object.assign(Object.assign({},jn()),(0,J.Z)({},t,n));return new Ne("auth","Firebase",r).create(t,{appName:e.name})}function Gn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&qn(e,"argument-error"),Wn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Hn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=(0,Be.Z)(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat((0,Be.Z)(o)))}return Zn.create.apply(Zn,[e].concat(n))}function Qn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Hn.apply(void 0,[t].concat(r))}}function $n(e){var t="INTERNAL ASSERTION FAILED: "+e;throw zn(t),new Error(t)}function Yn(e,t){e||$n(t)}var Xn=new Map;function Jn(e){Yn(e instanceof Function,"Expected a class definition");var t=Xn.get(e);return t?(Yn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Xn.set(e,t),t)}function er(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function tr(){return"http:"===nr()||"https:"===nr()}function nr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var rr=function(){function e(t,n){ee(this,e),this.shortDelay=t,this.longDelay=n,Yn(n>t,"Short delay should be less than long delay!"),this.isMobile=xe()||Ie()}return(0,te.Z)(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(tr()||Se()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ir(e,t){Yn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ar=function(){function e(){ee(this,e)}return(0,te.Z)(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void $n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void $n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void $n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),or=(En={},(0,J.Z)(En,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,J.Z)(En,"MISSING_CUSTOM_TOKEN","internal-error"),(0,J.Z)(En,"INVALID_IDENTIFIER","invalid-email"),(0,J.Z)(En,"MISSING_CONTINUE_URI","internal-error"),(0,J.Z)(En,"INVALID_PASSWORD","wrong-password"),(0,J.Z)(En,"MISSING_PASSWORD","internal-error"),(0,J.Z)(En,"EMAIL_EXISTS","email-already-in-use"),(0,J.Z)(En,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,J.Z)(En,"INVALID_IDP_RESPONSE","invalid-credential"),(0,J.Z)(En,"INVALID_PENDING_TOKEN","invalid-credential"),(0,J.Z)(En,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,J.Z)(En,"MISSING_REQ_TYPE","internal-error"),(0,J.Z)(En,"EMAIL_NOT_FOUND","user-not-found"),(0,J.Z)(En,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,J.Z)(En,"EXPIRED_OOB_CODE","expired-action-code"),(0,J.Z)(En,"INVALID_OOB_CODE","invalid-action-code"),(0,J.Z)(En,"MISSING_OOB_CODE","internal-error"),(0,J.Z)(En,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,J.Z)(En,"INVALID_ID_TOKEN","invalid-user-token"),(0,J.Z)(En,"TOKEN_EXPIRED","user-token-expired"),(0,J.Z)(En,"USER_NOT_FOUND","user-token-expired"),(0,J.Z)(En,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,J.Z)(En,"INVALID_CODE","invalid-verification-code"),(0,J.Z)(En,"INVALID_SESSION_INFO","invalid-verification-id"),(0,J.Z)(En,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,J.Z)(En,"MISSING_SESSION_INFO","missing-verification-id"),(0,J.Z)(En,"SESSION_EXPIRED","code-expired"),(0,J.Z)(En,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,J.Z)(En,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,J.Z)(En,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,J.Z)(En,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,J.Z)(En,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,J.Z)(En,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,J.Z)(En,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,J.Z)(En,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,J.Z)(En,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,J.Z)(En,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,J.Z)(En,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),En),ur=new rr(3e4,6e4);function sr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function cr(e,t,n,r){return lr.apply(this,arguments)}function lr(){return lr=qe(We().mark((function e(t,n,r,i){var a,o=arguments;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",fr(t,a,qe(We().mark((function e(){var a,o,u,s;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Le(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ar.fetch()(vr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),lr.apply(this,arguments)}function fr(e,t,n){return hr.apply(this,arguments)}function hr(){return hr=qe(We().mark((function e(t,n,r){var i,o,u,s,c,l,f,h,d,p;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},or),n),e.prev=2,o=new mr(t),e.next=6,Promise.race([r(),o.promise]);case 6:return u=e.sent,o.clearNetworkTimeout(),e.next=10,u.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw yr(t,"account-exists-with-different-credential",s);case 13:if(!u.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=u.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=(0,a.Z)(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw yr(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=25;break}throw yr(t,"email-already-in-use",s);case 25:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw Wn(t,p,d);case 30:qn(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Ce)){e.next=37;break}throw e.t0;case 37:qn(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),hr.apply(this,arguments)}function dr(e,t,n,r){return pr.apply(this,arguments)}function pr(){return pr=qe(We().mark((function e(t,n,r,i){var a,o,u=arguments;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,cr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&qn(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),pr.apply(this,arguments)}function vr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ir(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var mr=function(){function e(t){var n=this;ee(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Kn(n.auth,"network-request-failed"))}),ur.get())}))}return(0,te.Z)(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function yr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Kn(e,t,r);return i.customData._tokenResponse=n,i}function gr(e,t){return kr.apply(this,arguments)}function kr(){return kr=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),kr.apply(this,arguments)}function br(e,t){return wr.apply(this,arguments)}function wr(){return wr=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),wr.apply(this,arguments)}function xr(e,t){return _r.apply(this,arguments)}function _r(){return _r=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),_r.apply(this,arguments)}function Sr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ir(){return Ir=qe(We().mark((function e(t){var n,r,i,a,o,u,s=arguments;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Ze(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Qn((a=Tr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Sr(Er(a.auth_time)),issuedAtTime:Sr(Er(a.iat)),expirationTime:Sr(Er(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ir.apply(this,arguments)}function Er(e){return 1e3*Number(e)}function Tr(e){var t=e.split("."),n=(0,a.Z)(t,3),r=n[0],i=n[1],o=n[2];if(void 0===r||void 0===i||void 0===o)return zn("JWT malformed, contained fewer than 3 sections"),null;try{var u=ye(i);return u?JSON.parse(u):(zn("Failed to decode base64 JWT payload"),null)}catch(s){return zn("Caught error parsing JWT payload as JSON",s),null}}function Cr(e,t){return Nr.apply(this,arguments)}function Nr(){return Nr=qe(We().mark((function e(t,n){var r=arguments;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ce&&Ar(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Nr.apply(this,arguments)}function Ar(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Pr=function(){function e(t){ee(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return(0,te.Z)(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(qe(We().mark((function t(){return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Rr=function(){function e(t,n){ee(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return(0,te.Z)(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Sr(this.lastLoginAt),this.creationTime=Sr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Dr(e){return Or.apply(this,arguments)}function Or(){return Or=qe(We().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Cr(t,xr(r,{idToken:i}));case 6:Qn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Fr(o.providerUserInfo):[],s=Mr(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Rr(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Or.apply(this,arguments)}function Lr(){return(Lr=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ze(t),e.next=3,Dr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat((0,Be.Z)(n),(0,Be.Z)(t))}function Fr(e){return e.map((function(e){var t=e.providerId,n=In(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Ur(e,t){return Vr.apply(this,arguments)}function Vr(){return Vr=qe(We().mark((function e(t,n){var r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr(t,{},qe(We().mark((function e(){var r,i,a,o,u,s;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Le({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=vr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ar.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Vr.apply(this,arguments)}var jr=function(){function e(){ee(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return(0,te.Z)(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Qn(e.idToken,"internal-error"),Qn("undefined"!==typeof e.idToken,"internal-error"),Qn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Tr(e);return Qn(t,"internal-error"),Qn("undefined"!==typeof t.exp,"internal-error"),Qn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=qe(We().mark((function e(t){var n,r=arguments;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Qn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=qe(We().mark((function e(t,n){var r,i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ur(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return $n("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Qn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Qn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Qn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Zr(e,t){Qn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Br=function(){function e(t){ee(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=In(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?(0,Be.Z)(a.providerData):[],this.metadata=new Rr(a.createdAt||void 0,a.lastLoginAt||void 0)}return(0,te.Z)(e,[{key:"getIdToken",value:function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Qn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ir.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Lr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Qn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Qn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=qe(We().mark((function e(t){var n,r,i=arguments;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Dr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=qe(We().mark((function e(){var t;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Cr(this,gr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Qn(k&&_,t,"internal-error");var S=jr.fromJSON(this.name,_);Qn("string"===typeof k,t,"internal-error"),Zr(f,t.name),Zr(h,t.name),Qn("boolean"===typeof b,t,"internal-error"),Qn("boolean"===typeof w,t,"internal-error"),Zr(d,t.name),Zr(p,t.name),Zr(v,t.name),Zr(m,t.name),Zr(y,t.name),Zr(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(I.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(I._redirectEventId=m),I}},{key:"_fromIdTokenResponse",value:function(){var t=qe(We().mark((function t(n,r){var i,a,o,u=arguments;return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new jr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Dr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),zr=function(){function e(){ee(this,e),this.type="NONE",this.storage={}}return(0,te.Z)(e,[{key:"_isAvailable",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();zr.type="NONE";var qr=zr;function Kr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Wr=function(){function e(t,n,r){ee(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Kr(this.userKey,a.apiKey,o),this.fullPersistenceKey=Kr("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return(0,te.Z)(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=qe(We().mark((function e(){var t;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Br._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=qe(We().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Jn(qr),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Jn(qr),u=Kr(i,n.config.apiKey,n.name),s=null,c=re(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Br._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Gr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Yr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Hr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Jr(t))return"Blackberry";if(ei(t))return"Webos";if(Qr(t))return"Safari";if((t.includes("chrome/")||$r(t))&&!t.includes("edge/"))return"Chrome";if(Xr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/firefox\//i.test(e)}function Qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/crios\//i.test(e)}function Yr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/iemobile/i.test(e)}function Xr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/android/i.test(e)}function Jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/blackberry/i.test(e)}function ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/webos/i.test(e)}function ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/iphone|ipad|ipod/i.test(e)}function ni(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return ti(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function ri(){return Ee()&&10===document.documentMode}function ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return ti(e)||Xr(e)||ei(e)||Jr(e)||/windows phone/i.test(e)||Yr(e)}function ai(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Gr(we());break;case"Worker":t="".concat(Gr(we()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Bt,"/").concat(r)}var oi=function(){function e(t){ee(this,e),this.auth=t,this.queue=[]}return(0,te.Z)(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=qe(We().mark((function e(t){var n,r,i,a,o,u,s;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=re(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=re(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ui=function(){function e(t,n,r){ee(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ci(this),this.idTokenSubscription=new ci(this),this.beforeStateQueue=new oi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return(0,te.Z)(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Jn(t)),this._initializationPromise=this.queue(qe(We().mark((function r(){var i,a;return We().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Wr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=qe(We().mark((function e(){var t;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=qe(We().mark((function e(t){var n,r,i,a,o,u,s;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Qn(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Ze(t):null)&&Qn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=qe(We().mark((function e(t){var n,r=this,i=arguments;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Qn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(qe(We().mark((function n(){return We().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Jn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Ne("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=qe(We().mark((function e(t,n){var r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Qn(n=t&&Jn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Wr.create(this,[Jn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=qe(We().mark((function e(t){var n,r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=qe(We().mark((function e(t){var n=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Qn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Qn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ai(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=qe(We().mark((function e(){var t,n,r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,J.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function si(e){return Ze(e)}var ci=function(){function e(t){var n=this;ee(this,e),this.auth=t,this.observer=null,this.addObserver=Ue((function(e){return n.observer=e}))}return(0,te.Z)(e,[{key:"next",get:function(){return Qn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function li(e,t,n){var r=si(e);Qn(r._canInitEmulator,r,"emulator-config-failed"),Qn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=fi(t),u=function(e){var t=fi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var o=i[1];return{host:o,port:hi(r.substr(o.length+1))}}var u=r.split(":"),s=(0,a.Z)(u,2);return{host:s[0],port:hi(s[1])}}(t),s=u.host,c=u.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(o,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function hi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var di=function(){function e(t,n){ee(this,e),this.providerId=t,this.signInMethod=n}return(0,te.Z)(e,[{key:"toJSON",value:function(){return $n("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return $n("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return $n("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return $n("not implemented")}}]),e}();function pi(e,t){return vi.apply(this,arguments)}function vi(){return vi=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:resetPassword",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),vi.apply(this,arguments)}function mi(e,t){return yi.apply(this,arguments)}function yi(){return yi=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),yi.apply(this,arguments)}function gi(e,t){return ki.apply(this,arguments)}function ki(){return ki=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:update",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ki.apply(this,arguments)}function bi(e,t){return wi.apply(this,arguments)}function wi(){return wi=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithPassword",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),wi.apply(this,arguments)}function xi(e,t){return _i.apply(this,arguments)}function _i(){return _i=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:sendOobCode",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}function Si(e,t){return Ii.apply(this,arguments)}function Ii(){return Ii=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xi(t,n));case 1:case"end":return e.stop()}}),e)}))),Ii.apply(this,arguments)}function Ei(e,t){return Ti.apply(this,arguments)}function Ti(){return Ti=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xi(t,n));case 1:case"end":return e.stop()}}),e)}))),Ti.apply(this,arguments)}function Ci(e,t){return Ni.apply(this,arguments)}function Ni(){return Ni=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xi(t,n));case 1:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}function Ai(e,t){return Pi.apply(this,arguments)}function Pi(){return Pi=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xi(t,n));case 1:case"end":return e.stop()}}),e)}))),Pi.apply(this,arguments)}function Ri(e,t){return Di.apply(this,arguments)}function Di(){return Di=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithEmailLink",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Di.apply(this,arguments)}function Oi(e,t){return Li.apply(this,arguments)}function Li(){return Li=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithEmailLink",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Li.apply(this,arguments)}var Mi=function(e){oe(n,e);var t=fe(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ee(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return(0,te.Z)(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",bi(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ri(t,{email:this._email,oobCode:this._password}));case 5:qn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",mi(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Oi(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:qn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(di);function Fi(e,t){return Ui.apply(this,arguments)}function Ui(){return Ui=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithIdp",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ui.apply(this,arguments)}var Vi=function(e){oe(n,e);var t=fe(n);function n(){var e;return ee(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return(0,te.Z)(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Fi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Fi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Fi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Le(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=In(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(di);function ji(e,t){return Zi.apply(this,arguments)}function Zi(){return Zi=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:sendVerificationCode",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zi.apply(this,arguments)}function Bi(){return Bi=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithPhoneNumber",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Bi.apply(this,arguments)}function zi(){return zi=qe(We().mark((function e(t,n){var r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr(t,"POST","/v1/accounts:signInWithPhoneNumber",sr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw yr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),zi.apply(this,arguments)}var qi=(0,J.Z)({},"USER_NOT_FOUND","user-not-found");function Ki(){return Ki=qe(We().mark((function e(t,n){var r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithPhoneNumber",sr(t,r),qi));case 2:case"end":return e.stop()}}),e)}))),Ki.apply(this,arguments)}var Wi=function(e){oe(n,e);var t=fe(n);function n(e){var r;return ee(this,n),(r=t.call(this,"phone","phone")).params=e,r}return(0,te.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Bi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return zi.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ki.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(di);var Gi=function(){function e(t){var n,r,i,a,o,u;ee(this,e);var s=Me(Fe(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Qn(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return(0,te.Z)(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Me(Fe(e)).link,n=t?Me(Fe(t)).deep_link_id:null,r=Me(Fe(e)).deep_link_id;return(r?Me(Fe(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(e_){return null}}}]),e}();var Hi=function(){function e(){ee(this,e),this.providerId=e.PROVIDER_ID}return(0,te.Z)(e,null,[{key:"credential",value:function(e,t){return Mi._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Gi.parseLink(t);return Qn(n,"argument-error"),Mi._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Hi.PROVIDER_ID="password",Hi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Hi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Qi=function(){function e(t){ee(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return(0,te.Z)(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),$i=function(e){oe(n,e);var t=fe(n);function n(){var e;return ee(this,n),(e=t.apply(this,arguments)).scopes=[],e}return(0,te.Z)(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return(0,Be.Z)(this.scopes)}}]),n}(Qi),Yi=function(e){oe(n,e);var t=fe(n);function n(){return ee(this,n),t.apply(this,arguments)}return(0,te.Z)(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Qn(e.idToken||e.accessToken,"argument-error"),Vi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Qn("providerId"in t&&"signInMethod"in t,"argument-error"),Vi._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}($i),Xi=function(e){oe(n,e);var t=fe(n);function n(){return ee(this,n),t.call(this,"facebook.com")}return(0,te.Z)(n,null,[{key:"credential",value:function(e){return Vi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(e_){return null}}}]),n}($i);Xi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Xi.PROVIDER_ID="facebook.com";var Ji=function(e){oe(n,e);var t=fe(n);function n(){var e;return ee(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return(0,te.Z)(n,null,[{key:"credential",value:function(e,t){return Vi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(e_){return null}}}]),n}($i);Ji.GOOGLE_SIGN_IN_METHOD="google.com",Ji.PROVIDER_ID="google.com";var ea=function(e){oe(n,e);var t=fe(n);function n(){return ee(this,n),t.call(this,"github.com")}return(0,te.Z)(n,null,[{key:"credential",value:function(e){return Vi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(e_){return null}}}]),n}($i);ea.GITHUB_SIGN_IN_METHOD="github.com",ea.PROVIDER_ID="github.com";var ta=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return(0,te.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return Fi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Fi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Fi(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(di),na=function(e){oe(n,e);var t=fe(n);function n(e){return ee(this,n),Qn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return(0,te.Z)(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ta.fromJSON(e);return Qn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ta._create(r,n)}catch(i){return null}}}]),n}(Qi),ra=function(e){oe(n,e);var t=fe(n);function n(){return ee(this,n),t.call(this,"twitter.com")}return(0,te.Z)(n,null,[{key:"credential",value:function(e,t){return Vi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(e_){return null}}}]),n}($i);function ia(e,t){return aa.apply(this,arguments)}function aa(){return aa=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signUp",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),aa.apply(this,arguments)}ra.TWITTER_SIGN_IN_METHOD="twitter.com",ra.PROVIDER_ID="twitter.com";var oa=function(){function e(t){ee(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return(0,te.Z)(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=qe(We().mark((function t(n,r,i){var a,o,u,s,c=arguments;return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Br._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=ua(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=qe(We().mark((function t(n,r,i){var a;return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ua(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ua(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function sa(){return sa=qe(We().mark((function e(t){var n,r,i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=si(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new oa({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ia(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,oa._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),sa.apply(this,arguments)}var ca=function(e){oe(n,e);var t=fe(n);function n(e,r,i,a){var o,u;return ee(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf((0,ie.Z)(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return(0,te.Z)(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ce);function la(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw ca._fromErrorAndOperation(e,n,t,r);throw n}))}function fa(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ha(e,t){return da.apply(this,arguments)}function da(){return da=qe(We().mark((function e(t,n){var r,i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ze(t),e.next=3,ma(!0,r,n);case 3:return e.t0=br,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=fa(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),da.apply(this,arguments)}function pa(e,t){return va.apply(this,arguments)}function va(){return va=qe(We().mark((function e(t,n){var r,i,a=arguments;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Cr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",oa._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),va.apply(this,arguments)}function ma(e,t,n){return ya.apply(this,arguments)}function ya(){return(ya=qe(We().mark((function e(t,n,r){var i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr(n);case 2:i=fa(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Qn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ga(e,t){return ka.apply(this,arguments)}function ka(){return ka=qe(We().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Cr(t,la(i,a,n,t),r);case 6:return Qn((o=e.sent).idToken,i,"internal-error"),Qn(u=Tr(o.idToken),i,"internal-error"),s=u.sub,Qn(t.uid===s,i,"user-mismatch"),e.abrupt("return",oa._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&qn(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ka.apply(this,arguments)}function ba(e,t){return wa.apply(this,arguments)}function wa(){return wa=qe(We().mark((function e(t,n){var r,i,a,o,u=arguments;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,la(t,i,n);case 4:return a=e.sent,e.next=7,oa._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),wa.apply(this,arguments)}function xa(e,t){return _a.apply(this,arguments)}function _a(){return _a=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(si(t),n));case 1:case"end":return e.stop()}}),e)}))),_a.apply(this,arguments)}function Sa(e,t){return Ia.apply(this,arguments)}function Ia(){return(Ia=qe(We().mark((function e(t,n){var r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ze(t),e.next=3,ma(!1,r,n.providerId);case 3:return e.abrupt("return",pa(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ea(e,t){return Ta.apply(this,arguments)}function Ta(){return(Ta=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ga(Ze(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ca(e,t){return Na.apply(this,arguments)}function Na(){return Na=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithCustomToken",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Na.apply(this,arguments)}function Aa(){return Aa=qe(We().mark((function e(t,n){var r,i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=si(t),e.next=3,Ca(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,oa._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Aa.apply(this,arguments)}var Pa=function(){function e(t,n){ee(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return(0,te.Z)(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Ra._fromServerResponse(e,t):qn(e,"internal-error")}}]),e}(),Ra=function(e){oe(n,e);var t=fe(n);function n(e){var r;return ee(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return(0,te.Z)(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Pa);function Da(e,t,n){var r;Qn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Qn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Qn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Qn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Oa(){return Oa=qe(We().mark((function e(t,n,r){var i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ze(t),a={requestType:"PASSWORD_RESET",email:n},r&&Da(i,a,r),e.next=5,Ei(i,a);case 5:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}function La(){return La=qe(We().mark((function e(t,n,r){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pi(Ze(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),La.apply(this,arguments)}function Ma(){return Ma=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gi(Ze(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Ma.apply(this,arguments)}function Fa(e,t){return Ua.apply(this,arguments)}function Ua(){return Ua=qe(We().mark((function e(t,n){var r,i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ze(t),e.next=3,pi(r,{oobCode:n});case 3:i=e.sent,Qn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Qn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Qn(i.mfaInfo,r,"internal-error");case 13:Qn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Pa._fromServerResponse(si(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Ua.apply(this,arguments)}function Va(){return Va=qe(We().mark((function e(t,n){var r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fa(Ze(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Va.apply(this,arguments)}function ja(e,t,n){return Za.apply(this,arguments)}function Za(){return Za=qe(We().mark((function e(t,n,r){var i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=si(t),e.next=3,ia(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,oa._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Za.apply(this,arguments)}function Ba(){return Ba=qe(We().mark((function e(t,n,r){var i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ze(t),a={requestType:"EMAIL_SIGNIN",email:n},Qn(r.handleCodeInApp,i,"argument-error"),r&&Da(i,a,r),e.next=6,Ci(i,a);case 6:case"end":return e.stop()}}),e)}))),Ba.apply(this,arguments)}function za(){return za=qe(We().mark((function e(t,n,r){var i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ze(t),Qn((a=Hi.credentialWithLink(n,r||er()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",xa(i,a));case 4:case"end":return e.stop()}}),e)}))),za.apply(this,arguments)}function qa(e,t){return Ka.apply(this,arguments)}function Ka(){return Ka=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:createAuthUri",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ka.apply(this,arguments)}function Wa(){return Wa=qe(We().mark((function e(t,n){var r,i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tr()?er():"http://localhost",i={identifier:n,continueUri:r},e.next=4,qa(Ze(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function Ga(){return(Ga=qe(We().mark((function e(t,n){var r,i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ze(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Da(r.auth,a,n),e.next=8,Si(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ha(){return(Ha=qe(We().mark((function e(t,n,r){var i,a,o,u;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ze(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Da(i.auth,o,r),e.next=8,Ai(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qa(e,t){return $a.apply(this,arguments)}function $a(){return $a=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),$a.apply(this,arguments)}function Ya(){return(Ya=qe(We().mark((function e(t,n){var r,i,a,o,u,s,c;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Ze(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Cr(a,Qa(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xa(e,t,n){return Ja.apply(this,arguments)}function Ja(){return Ja=qe(We().mark((function e(t,n,r){var i,a,o,u;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Cr(t,mi(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Ja.apply(this,arguments)}var eo=(0,te.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ee(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),to=function(e){oe(n,e);var t=fe(n);function n(e,r,i,a){var o;return ee(this,n),(o=t.call(this,e,r,i)).username=a,o}return(0,te.Z)(n)}(eo),no=function(e){oe(n,e);var t=fe(n);function n(e,r){return ee(this,n),t.call(this,e,"facebook.com",r)}return(0,te.Z)(n)}(eo),ro=function(e){oe(n,e);var t=fe(n);function n(e,r){return ee(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return(0,te.Z)(n)}(to),io=function(e){oe(n,e);var t=fe(n);function n(e,r){return ee(this,n),t.call(this,e,"google.com",r)}return(0,te.Z)(n)}(eo),ao=function(e){oe(n,e);var t=fe(n);function n(e,r,i){return ee(this,n),t.call(this,e,"twitter.com",r,i)}return(0,te.Z)(n)}(to);function oo(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Tr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new eo(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new no(a,i);case"github.com":return new ro(a,i);case"google.com":return new io(a,i);case"twitter.com":return new ao(a,i,e.screenName||null);case"custom":case"anonymous":return new eo(a,null);default:return new eo(a,r,i)}}(n)}var uo=function(){function e(t,n){ee(this,e),this.type=t,this.credential=n}return(0,te.Z)(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:(0,J.Z)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),so=function(){function e(t,n,r){ee(this,e),this.session=t,this.hints=n,this.signInResolver=r}return(0,te.Z)(e,[{key:"resolveSignIn",value:function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=si(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Pa._fromServerResponse(r,e)}));Qn(i.mfaPendingCredential,r,"internal-error");var o=uo._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=qe(We().mark((function e(t){var a,u,s;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,oa._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Qn(n.user,r,"internal-error"),e.abrupt("return",oa._forOperation(n.user,n.operationType,u));case 17:qn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function co(e,t){return cr(e,"POST","/v2/accounts/mfaEnrollment:start",sr(e,t))}function lo(e,t){return cr(e,"POST","/v2/accounts/mfaEnrollment:withdraw",sr(e,t))}var fo=function(){function e(t){var n=this;ee(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Pa._fromServerResponse(t.auth,e)})))}))}return(0,te.Z)(e,[{key:"getSession",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=uo,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=qe(We().mark((function e(t,n){var r,i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Cr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=qe(We().mark((function e(t){var n,r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Cr(this.user,lo(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ho=new WeakMap;var po="__sak",vo=function(){function e(t,n){ee(this,e),this.storageRetriever=t,this.type=n}return(0,te.Z)(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(po,"1"),this.storage.removeItem(po),Promise.resolve(!0)):Promise.resolve(!1)}catch(e_){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var mo=function(e){oe(n,e);var t=fe(n);function n(){var e;return ee(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=we();return Qr(e)||ti(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ii(),e._shouldAllowMigration=!0,e}return(0,te.Z)(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);ri()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=qe(We().mark((function e(t,r){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(ue(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=qe(We().mark((function e(t){var r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(ue(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(ue(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(vo);mo.type="LOCAL";var yo=mo,go=function(e){oe(n,e);var t=fe(n);function n(){return ee(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return(0,te.Z)(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(vo);go.type="SESSION";var ko=go;function bo(e){return Promise.all(e.map(function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var wo=function(){function e(t){ee(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return(0,te.Z)(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=qe(We().mark((function e(t){var n,r,i,a,o,u,s,c;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,bo(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function xo(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}wo.receivers=[];var _o=function(){function e(t){ee(this,e),this.target=t,this.handlers=new Set}return(0,te.Z)(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=qe(We().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=xo("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function So(){return window}function Io(){return"undefined"!==typeof So().WorkerGlobalScope&&"function"===typeof So().importScripts}function Eo(){return To.apply(this,arguments)}function To(){return(To=qe(We().mark((function e(){var t;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Co(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var No="firebaseLocalStorageDb",Ao="firebaseLocalStorage",Po="fbase_key",Ro=function(){function e(t){ee(this,e),this.request=t}return(0,te.Z)(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Do(e,t){return e.transaction([Ao],t?"readwrite":"readonly").objectStore(Ao)}function Oo(){var e=indexedDB.deleteDatabase(No);return new Ro(e).toPromise()}function Lo(){var e=indexedDB.open(No,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Ao,{keyPath:Po})}catch(r){n(r)}})),e.addEventListener("success",qe(We().mark((function n(){var r;return We().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Ao)){n.next=12;break}return r.close(),n.next=5,Oo();case 5:return n.t0=t,n.next=8,Lo();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Mo(e,t,n){return Fo.apply(this,arguments)}function Fo(){return Fo=qe(We().mark((function e(t,n,r){var i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Do(t,!0).put((i={},(0,J.Z)(i,Po,n),(0,J.Z)(i,"value",r),i)),e.abrupt("return",new Ro(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Fo.apply(this,arguments)}function Uo(e,t){return Vo.apply(this,arguments)}function Vo(){return Vo=qe(We().mark((function e(t,n){var r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Do(t,!1).get(n),e.next=3,new Ro(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Vo.apply(this,arguments)}function jo(e,t){var n=Do(e,!0).delete(t);return new Ro(n).toPromise()}var Zo=function(){function e(){ee(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return(0,te.Z)(e,[{key:"_openDb",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Lo();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=qe(We().mark((function e(t){var n,r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Io()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=qe(We().mark((function e(){var t=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=wo._getInstance(Io()?self:null),this.receiver._subscribe("keyChanged",function(){var e=qe(We().mark((function e(n,r){var i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=qe(We().mark((function e(){var t,n,r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eo();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new _o(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Co()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=qe(We().mark((function e(){var t;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Lo();case 5:return t=e.sent,e.next=8,Mo(t,po,"1");case 8:return e.next=10,jo(t,po);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=qe(We().mark((function e(t,n){var r=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Mo(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Uo(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=qe(We().mark((function e(t){var n=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return jo(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=qe(We().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Do(e,!1).getAll();return new Ro(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=re(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(qe(We().mark((function t(){return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Zo.type="LOCAL";var Bo=Zo;function zo(e,t){return cr(e,"POST","/v2/accounts/mfaSignIn:start",sr(e,t))}function qo(e){return Ko.apply(this,arguments)}function Ko(){return Ko=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Ko.apply(this,arguments)}function Wo(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Kn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Go(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Ho=1e12,Qo=function(){function e(t){ee(this,e),this.auth=t,this.counter=Ho,this._widgets=new Map}return(0,te.Z)(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new $o(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Ho;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Ho;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=qe(We().mark((function e(t){var n,r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Ho,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$o=function(){function e(t,n,r){var i=this;ee(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Qn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return(0,te.Z)(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Yo=Go("rcb"),Xo=new rr(3e4,6e4),Jo="https://www.google.com/recaptcha/api.js?",eu=function(){function e(){ee(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!So().grecaptcha}return(0,te.Z)(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Qn(tu(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(So().grecaptcha):new Promise((function(r,i){var a=So().setTimeout((function(){i(Kn(e,"network-request-failed"))}),Xo.get());So()[Yo]=function(){So().clearTimeout(a),delete So()[Yo];var o=So().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Kn(e,"internal-error"))},Wo("".concat(Jo,"?").concat(Le({onload:Yo,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Kn(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!So().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function tu(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var nu=function(){function e(){ee(this,e)}return(0,te.Z)(e,[{key:"load",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Qo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),ru="recaptcha",iu={theme:"light",type:"image"},au=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},iu),r=arguments.length>2?arguments[2]:void 0;ee(this,e),this.parameters=n,this.type=ru,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=si(r),this.isInvisible="invisible"===this.parameters.size,Qn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Qn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nu:new eu,this.validateStartingState()}return(0,te.Z)(e,[{key:"verify",value:function(){var e=qe(We().mark((function e(){var t,n,r,i=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Qn(!this.parameters.sitekey,this.auth,"argument-error"),Qn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Qn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=So()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Qn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=qe(We().mark((function e(){var t,n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=qe(We().mark((function e(){var t;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qn(tr()&&!Io(),this.auth,"internal-error"),e.next=3,ou();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,qo(this.auth);case 8:Qn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Qn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function ou(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var uu=function(){function e(t,n){ee(this,e),this.verificationId=t,this.onConfirmation=n}return(0,te.Z)(e,[{key:"confirm",value:function(e){var t=Wi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function su(){return su=qe(We().mark((function e(t,n,r){var i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=si(t),e.next=3,hu(i,n,Ze(r));case 3:return a=e.sent,e.abrupt("return",new uu(a,(function(e){return xa(i,e)})));case 5:case"end":return e.stop()}}),e)}))),su.apply(this,arguments)}function cu(e,t,n){return lu.apply(this,arguments)}function lu(){return(lu=qe(We().mark((function e(t,n,r){var i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ze(t),e.next=3,ma(!1,i,"phone");case 3:return e.next=5,hu(i.auth,n,Ze(r));case 5:return a=e.sent,e.abrupt("return",new uu(a,(function(e){return Sa(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fu(){return(fu=qe(We().mark((function e(t,n,r){var i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ze(t),e.next=3,hu(i.auth,n,Ze(r));case 3:return a=e.sent,e.abrupt("return",new uu(a,(function(e){return Ea(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hu(e,t,n){return du.apply(this,arguments)}function du(){return du=qe(We().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Qn("string"===typeof a,t,"argument-error"),Qn(r.type===ru,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Qn("enroll"===u.type,t,"internal-error"),e.next=13,co(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Qn("signin"===u.type,t,"internal-error"),Qn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,zo(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ji(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),du.apply(this,arguments)}function pu(){return(pu=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa(Ze(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vu=function(){function e(t){ee(this,e),this.providerId=e.PROVIDER_ID,this.auth=si(t)}return(0,te.Z)(e,[{key:"verifyPhoneNumber",value:function(e,t){return hu(this.auth,e,Ze(t))}}],[{key:"credential",value:function(e,t){return Wi._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Wi._fromTokenResponse(n,r):null}}]),e}();function mu(e,t){return t?Jn(t):(Qn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}vu.PROVIDER_ID="phone",vu.PHONE_SIGN_IN_METHOD="phone";var yu=function(e){oe(n,e);var t=fe(n);function n(e){var r;return ee(this,n),(r=t.call(this,"custom","custom")).params=e,r}return(0,te.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return Fi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Fi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Fi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(di);function gu(e){return ba(e.auth,new yu(e),e.bypassAuthState)}function ku(e){var t=e.auth,n=e.user;return Qn(n,t,"internal-error"),ga(n,new yu(e),e.bypassAuthState)}function bu(e){return wu.apply(this,arguments)}function wu(){return wu=qe(We().mark((function e(t){var n,r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Qn(r=t.user,n,"internal-error"),e.abrupt("return",pa(r,new yu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),wu.apply(this,arguments)}var xu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ee(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return(0,te.Z)(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=qe(We().mark((function t(n,r){return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=qe(We().mark((function e(t){var n,r,i,a,o,u,s;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gu;case"linkViaPopup":case"linkViaRedirect":return bu;case"reauthViaPopup":case"reauthViaRedirect":return ku;default:qn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),_u=new rr(2e3,1e4);function Su(e,t,n){return Iu.apply(this,arguments)}function Iu(){return Iu=qe(We().mark((function e(t,n,r){var i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=si(t),Gn(t,n,Qi),a=mu(i,r),o=new Nu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Iu.apply(this,arguments)}function Eu(){return(Eu=qe(We().mark((function e(t,n,r){var i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gn((i=Ze(t)).auth,n,Qi),a=mu(i.auth,r),o=new Nu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tu(e,t,n){return Cu.apply(this,arguments)}function Cu(){return(Cu=qe(We().mark((function e(t,n,r){var i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gn((i=Ze(t)).auth,n,Qi),a=mu(i.auth,r),o=new Nu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nu=function(e){oe(n,e);var t=fe(n);function n(e,r,i,a,o){var u;return ee(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=(0,ie.Z)(u),u}return(0,te.Z)(n,[{key:"executeNotNull",value:function(){var e=qe(We().mark((function e(){var t;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Qn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=qe(We().mark((function e(){var t,n=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yn(1===this.filter.length,"Popup operations only handle one event"),t=xo(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Kn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Kn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Kn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,_u.get())}()}}]),n}(xu);Nu.currentPopupAction=null;var Au=new Map,Pu=function(e){oe(n,e);var t=fe(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ee(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return(0,te.Z)(n,[{key:"execute",value:function(){var e=qe(We().mark((function e(){var t,r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Au.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Ru(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Sn(ue(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Au.set(this.auth._key(),t);case 21:return this.bypassAuthState||Au.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=qe(We().mark((function e(t){var r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Sn(ue(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Sn(ue(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(xu);function Ru(e,t){return Du.apply(this,arguments)}function Du(){return Du=qe(We().mark((function e(t,n){var r,i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uu(n),i=Fu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Du.apply(this,arguments)}function Ou(e,t){return Lu.apply(this,arguments)}function Lu(){return Lu=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fu(t)._set(Uu(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Lu.apply(this,arguments)}function Mu(e,t){Au.set(e._key(),t)}function Fu(e){return Jn(e._redirectPersistence)}function Uu(e){return Kr("pendingRedirect",e.config.apiKey,e.name)}function Vu(e,t,n){return function(e,t,n){return ju.apply(this,arguments)}(e,t,n)}function ju(){return ju=qe(We().mark((function e(t,n,r){var i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=si(t),Gn(t,n,Qi),a=mu(i,r),e.next=5,Ou(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),ju.apply(this,arguments)}function Zu(e,t,n){return function(e,t,n){return Bu.apply(this,arguments)}(e,t,n)}function Bu(){return(Bu=qe(We().mark((function e(t,n,r){var i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gn((i=Ze(t)).auth,n,Qi),a=mu(i.auth,r),e.next=5,Ou(a,i.auth);case 5:return e.next=7,Qu(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zu(e,t,n){return function(e,t,n){return qu.apply(this,arguments)}(e,t,n)}function qu(){return(qu=qe(We().mark((function e(t,n,r){var i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gn((i=Ze(t)).auth,n,Qi),a=mu(i.auth,r),e.next=5,ma(!1,i,n.providerId);case 5:return e.next=7,Ou(a,i.auth);case 7:return e.next=9,Qu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ku(e,t){return Wu.apply(this,arguments)}function Wu(){return Wu=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,si(t)._initializationPromise;case 2:return e.abrupt("return",Gu(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}function Gu(e,t){return Hu.apply(this,arguments)}function Hu(){return Hu=qe(We().mark((function e(t,n){var r,i,a,o,u,s=arguments;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=si(t),a=mu(i,n),o=new Pu(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Hu.apply(this,arguments)}function Qu(e){return $u.apply(this,arguments)}function $u(){return($u=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xo("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yu=function(){function e(t){ee(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return(0,te.Z)(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ju(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Ju(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Kn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Xu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Xu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Ju(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function es(e){return ts.apply(this,arguments)}function ts(){return ts=qe(We().mark((function e(t){var n,r=arguments;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",cr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}var ns=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rs=/^https?/;function is(){return is=qe(We().mark((function e(t){var n,r,i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,es(t);case 4:n=e.sent,r=n.authorizedDomains,i=re(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!as(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:qn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),is.apply(this,arguments)}function as(e){var t=er(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!rs.test(r))return!1;if(ns.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var os=new rr(3e4,6e4);function us(){var e=So().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=(0,Be.Z)(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var ss=null;function cs(e){return ss=ss||function(e){return new Promise((function(t,n){var r,i,a;function o(){us(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){us(),n(Kn(e,"network-request-failed"))},timeout:os.get()})}if(null===(i=null===(r=So().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=So().gapi)||void 0===a?void 0:a.load)){var u=Go("iframefcb");return So()[u]=function(){gapi.load?o():n(Kn(e,"network-request-failed"))},Wo("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw ss=null,e}))}(e),ss}var ls=new rr(5e3,15e3),fs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ds(e){var t=e.config;Qn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ir(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Bt},i=hs.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Le(r).slice(1))}function ps(e){return vs.apply(this,arguments)}function vs(){return vs=qe(We().mark((function e(t){var n,r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cs(t);case 2:return n=e.sent,Qn(r=So().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ds(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fs,dontclear:!0},(function(e){return new Promise(function(){var n=qe(We().mark((function n(r,i){var a,o,u;return We().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){So().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Kn(t,"network-request-failed"),o=So().setTimeout((function(){i(a)}),ls.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),vs.apply(this,arguments)}var ms={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ys="_blank",gs="http://localhost",ks=function(){function e(t){ee(this,e),this.window=t,this.associatedEvent=null}return(0,te.Z)(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function bs(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",c=Object.assign(Object.assign({},ms),{width:r.toString(),height:i.toString(),top:o,left:u}),l=we().toLowerCase();n&&(s=$r(l)?ys:n),Hr(l)&&(t=t||gs,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=(0,a.Z)(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(ni(l)&&"_self"!==s)return ws(t||"",s),new ks(null);var h=window.open(t||"",s,f);Qn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new ks(h)}function ws(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var xs="__/auth/handler",_s="emulator/auth/handler";function Ss(e,t,n,r,i,o){Qn(e.config.authDomain,e,"auth-domain-config-required"),Qn(e.config.apiKey,e,"invalid-api-key");var u={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Bt,eventId:i};if(t instanceof Qi){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,c=Object.entries(o||{});s<c.length;s++){var l=(0,a.Z)(c[s],2),f=l[0],h=l[1];u[f]=h}}if(t instanceof $i){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(u.scopes=d.join(","))}e.tenantId&&(u.tid=e.tenantId);for(var p=u,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(xs);return ir(t,_s)}(e),"?").concat(Le(p).slice(1))}var Is="webStorageSupport",Es=function(){function e(){ee(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ko,this._completeRedirectFn=Gu,this._overrideRedirectResult=Mu}return(0,te.Z)(e,[{key:"_openPopup",value:function(){var e=qe(We().mark((function e(t,n,r,i){var a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Ss(t,n,r,er(),i),e.abrupt("return",bs(t,o,xo()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=qe(We().mark((function e(t,n,r,i){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Ss(t,n,r,er(),i),So().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Yn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=qe(We().mark((function e(t){var n,r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ps(t);case 2:return n=e.sent,r=new Yu(t),n.register("authEvent",(function(e){return Qn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Is,{type:Is},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),qn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return is.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ii()||Qr()||ti()}}]),e}(),Ts=Es,Cs=function(){function e(t){ee(this,e),this.factorId=t}return(0,te.Z)(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return $n("unexpected MultiFactorSessionType")}}}]),e}(),Ns=function(e){oe(n,e);var t=fe(n);function n(e){var r;return ee(this,n),(r=t.call(this,"phone")).credential=e,r}return(0,te.Z)(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return cr(e,"POST","/v2/accounts/mfaEnrollment:finalize",sr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return cr(e,"POST","/v2/accounts/mfaSignIn:finalize",sr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Cs),As=function(){function e(){ee(this,e)}return(0,te.Z)(e,null,[{key:"assertion",value:function(e){return Ns._fromCredential(e)}}]),e}();As.FACTOR_ID="phone";var Ps,Rs="@firebase/auth",Ds="0.20.1",Os=function(){function e(t){ee(this,e),this.auth=t,this.internalListeners=new Map}return(0,te.Z)(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Qn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Ls(){return window}Ps="Browser",Lt(new Ge("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Qn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Qn(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Ps,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ai(Ps)},i=new ui(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Lt(new Ge("auth-internal",(function(e){return function(e){return new Os(e)}(si(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ht(Rs,Ds,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ps)),Ht(Rs,Ds,"esm2017");function Ms(e,t,n){return Fs.apply(this,arguments)}function Fs(){return Fs=qe(We().mark((function e(t,n,r){var i,a,o,u,s;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ls(),o=a.BuildInfo,Yn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,zs(n.sessionId);case 4:return u=e.sent,s={},ti()?s.ibi=o.packageName:Xr()?s.apn=o.packageName:qn(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Ss(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Fs.apply(this,arguments)}function Us(){return Us=qe(We().mark((function e(t){var n,r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ls(),r=n.BuildInfo,i={},ti()?i.iosBundleId=r.packageName:Xr()?i.androidPackageName=r.packageName:qn(t,"operation-not-supported-in-this-environment"),e.next=5,es(t,i);case 5:case"end":return e.stop()}}),e)}))),Us.apply(this,arguments)}function Vs(e){var t=Ls().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function js(e,t,n){return Zs.apply(this,arguments)}function Zs(){return Zs=qe(We().mark((function e(t,n,r){var i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ls(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Kn(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Xr()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Zs.apply(this,arguments)}function Bs(e){var t,n,r,i,a,o,u,s,c,l,f=Ls();Qn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Qn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Qn("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Qn("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Qn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function zs(e){return qs.apply(this,arguments)}function qs(){return(qs=qe(We().mark((function e(t){var n,r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ks(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ks(e){if(Yn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Ws=function(e){oe(n,e);var t=fe(n);function n(){var e;return ee(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return(0,te.Z)(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Sn(ue(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Yu);function Gs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Xs(),postBody:null,tenantId:e.tenantId,error:Kn(e,"no-auth-event")}}function Hs(e,t){return Js()._set(ec(e),t)}function Qs(e){return $s.apply(this,arguments)}function $s(){return $s=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Js()._get(ec(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Js()._remove(ec(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),$s.apply(this,arguments)}function Ys(e,t){var n,r,i=function(e){var t=tc(e),n=t.link?decodeURIComponent(t.link):void 0,r=tc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return tc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=tc(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Kn(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Xs(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Js(){return Jn(yo)}function ec(e){return Kr("authEvent",e.config.apiKey,e.name)}function tc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=(t=n,(0,bn.Z)(t)||(0,wn.Z)(t)||(0,ne.Z)(t)||(0,xn.Z)());r[0];return Me(r.slice(1).join("?"))}var nc=function(){function e(){ee(this,e),this._redirectPersistence=ko,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gu,this._overrideRedirectResult=Mu}return(0,te.Z)(e,[{key:"_initialize",value:function(){var e=qe(We().mark((function e(t){var n,r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Ws(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){qn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=qe(We().mark((function e(t,n,r,i){var a,o,u,s;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bs(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Au.clear(),e.next=10,this._originValidation(t);case 10:return o=Gs(t,r,i),e.next=13,Hs(t,o);case 13:return e.next=15,Ms(t,o,n);case 15:return u=e.sent,e.next=18,Vs(u);case 18:return s=e.sent,e.abrupt("return",js(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Us.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Ls(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(qe(We().mark((function n(){return We().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Qs(e);case 2:t.onEvent(ic());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=qe(We().mark((function n(r){var i,a;return We().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Qs(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Ys(i,r.url)),t.onEvent(a||ic());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Ls().handleOpenURL=function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),rc=nc;function ic(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Kn("no-auth-event")}}function ac(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function oc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return!("file:"!==ac()&&"ionic:"!==ac()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function uc(){return Ee()&&11===(null===document||void 0===document?void 0:document.documentMode)}function sc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/Edge\/\d+/.test(e)}function cc(){try{var e=self.localStorage,t=xo();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return uc()||sc(e)}()||Te()}catch(n){return lc()&&Te()}return!1}function lc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function fc(){return("http:"===ac()||"https:"===ac()||Se()||oc())&&!(Ie()||_e())&&cc()&&!lc()}function hc(){return oc()&&"undefined"!==typeof document}function dc(){return pc.apply(this,arguments)}function pc(){return(pc=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vc={LOCAL:"local",NONE:"none",SESSION:"session"},mc=Qn,yc="persistence";function gc(e,t){mc(Object.values(vc).includes(t),e,"invalid-persistence-type"),Ie()?mc(t!==vc.SESSION,e,"unsupported-persistence-type"):_e()?mc(t===vc.NONE,e,"unsupported-persistence-type"):lc()?mc(t===vc.NONE||t===vc.LOCAL&&Te(),e,"unsupported-persistence-type"):mc(t===vc.NONE||cc(),e,"unsupported-persistence-type")}function kc(e){return bc.apply(this,arguments)}function bc(){return bc=qe(We().mark((function e(t){var n,r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=wc(),r=Kr(yc,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),bc.apply(this,arguments)}function wc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var xc=Qn,_c=function(){function e(){ee(this,e),this.browserResolver=Jn(Ts),this.cordovaResolver=Jn(rc),this.underlyingResolver=null,this._redirectPersistence=ko,this._completeRedirectFn=Gu,this._overrideRedirectResult=Mu}return(0,te.Z)(e,[{key:"_initialize",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=qe(We().mark((function e(t,n,r,i){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=qe(We().mark((function e(t,n,r,i){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return hc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return xc(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=qe(We().mark((function e(){var t;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,dc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Sc(e){return e.unwrap()}function Ic(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Ac(e,function(e,t){var n,r=Ze(e),i=t;return Qn(t.customData.operationType,r,"argument-error"),Qn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),so._fromError(r,i)}(e,t));else if(r){var i=Ec(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Ec(e){var t=(e instanceof Ce?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ce)&&"temporaryProof"in t&&"phoneNumber"in t)return vu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===An)return null;switch(r){case Nn:n=Ji;break;case Tn:n=Xi;break;case Cn:n=ea;break;case Pn:n=ra;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?ta._create(r,u):Vi._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Yi(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Ce?n.credentialFromError(e):n.credentialFromResult(e)}function Tc(e,t){return t.catch((function(t){throw t instanceof Ce&&Ic(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Ec(t)),additionalUserInfo:oo(e),user:Pc.getOrCreate(r)}}))}function Cc(e,t){return Nc.apply(this,arguments)}function Nc(){return Nc=qe(We().mark((function e(t,n){var r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Tc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Nc.apply(this,arguments)}var Ac=function(){function e(t,n){ee(this,e),this.resolver=n,this.auth=t.wrapped()}return(0,te.Z)(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Tc(Sc(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Pc=function(){function e(t){ee(this,e),this._delegate=t,this.multiFactor=function(e){var t=Ze(e);return ho.has(t)||ho.set(t,fo._fromUser(t)),ho.get(t)}(t)}return(0,te.Z)(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tc(this.auth,Sa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cc(this.auth,cu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tc(this.auth,Tu(this._delegate,t,_c)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kc(si(this.auth));case 2:return e.abrupt("return",zu(this._delegate,t,_c));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tc(this.auth,Ea(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Cc(this.auth,function(e,t,n){return fu.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Tc(this.auth,function(e,t,n){return Eu.apply(this,arguments)}(this._delegate,e,_c))}},{key:"reauthenticateWithRedirect",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kc(si(this.auth));case 2:return e.abrupt("return",Zu(this._delegate,t,_c));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Ga.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ha(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Xa(Ze(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Xa(Ze(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return pu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Ya.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Ha.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Pc.USER_MAP=new WeakMap;var Rc=Qn,Dc=function(){function e(t,n){if(ee(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Rc(r,"invalid-api-key",{appName:t.name}),Rc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?_c:void 0;this._delegate=n.initialize({options:{persistence:Lc(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Vn),this.linkUnderlyingAuth()}return(0,te.Z)(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Pc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){li(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Ma.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Fa(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return La.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tc(this._delegate,ja(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Wa.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Gi.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=qe(We().mark((function e(){var t;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rc(fc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ku(this._delegate,_c);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Tc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){si(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Oc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Oc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ba.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Oa.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=qe(We().mark((function e(t){var n,r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gc(this._delegate,t),e.t0=t,e.next=e.t0===vc.SESSION?4:e.t0===vc.LOCAL?6:e.t0===vc.NONE?11:13;break;case 4:return n=ko,e.abrupt("break",14);case 6:return e.next=8,Jn(Bo)._isAvailable();case 8:return r=e.sent,n=r?Bo:yo,e.abrupt("break",14);case 11:return n=qr,e.abrupt("break",14);case 13:return e.abrupt("return",qn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Tc(this._delegate,function(e){return sa.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Tc(this._delegate,xa(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Tc(this._delegate,function(e,t){return Aa.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Tc(this._delegate,function(e,t,n){return xa(Ze(e),Hi.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Tc(this._delegate,function(e,t,n){return za.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Cc(this._delegate,function(e,t,n){return su.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rc(fc(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Tc(this._delegate,Su(this._delegate,t,_c)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rc(fc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,kc(this._delegate);case 3:return e.abrupt("return",Vu(this._delegate,t,_c));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Va.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Oc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Pc.getOrCreate(e))},error:t,complete:n}}function Lc(e,t){var n=function(e,t){var n=wc();if(!n)return[];var r=Kr(yc,e,t);switch(n.getItem(r)){case vc.NONE:return[qr];case vc.LOCAL:return[Bo,ko];case vc.SESSION:return[ko];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Bo)||n.push(Bo),"undefined"!==typeof window)for(var r=0,i=[yo,ko];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(qr)||n.push(qr),n}Dc.Persistence=vc;var Mc=function(){function e(){ee(this,e),this.providerId="phone",this._delegate=new vu(Sc(kn.auth()))}return(0,te.Z)(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return vu.credential(e,t)}}]),e}();Mc.PHONE_SIGN_IN_METHOD=vu.PHONE_SIGN_IN_METHOD,Mc.PROVIDER_ID=vu.PROVIDER_ID;var Fc,Uc=Qn,Vc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kn.app();ee(this,e),Uc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new au(t,n,i.auth()),this.type=this._delegate.type}return(0,te.Z)(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Fc=kn).INTERNAL.registerComponent(new Ge("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Dc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Rn,PASSWORD_RESET:Dn,RECOVER_EMAIL:On,REVERT_SECOND_FACTOR_ADDITION:Ln,VERIFY_AND_CHANGE_EMAIL:Mn,VERIFY_EMAIL:Fn}},EmailAuthProvider:Hi,FacebookAuthProvider:Xi,GithubAuthProvider:ea,GoogleAuthProvider:Ji,OAuthProvider:Yi,SAMLAuthProvider:na,PhoneAuthProvider:Mc,PhoneMultiFactorGenerator:As,RecaptchaVerifier:Vc,TwitterAuthProvider:ra,Auth:Dc,AuthCredential:di,Error:Ce}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Fc.registerVersion("@firebase/auth-compat","0.2.14");var jc,Zc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Bc={},zc=zc||{},qc=Zc||self;function Kc(){}function Wc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Gc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Hc="closure_uid_"+(1e9*Math.random()>>>0),Qc=0;function $c(e,t,n){return e.call.apply(e.bind,arguments)}function Yc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Xc(e,t,n){return(Xc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$c:Yc).apply(null,arguments)}function Jc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function el(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function tl(){this.s=this.s,this.o=this.o}var nl={};tl.prototype.s=!1,tl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Hc)&&e[Hc]||(e[Hc]=++Qc)}(this);delete nl[e]}},tl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var rl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},il=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function al(e){return Array.prototype.concat.apply([],arguments)}function ol(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ul(e){return/^[\s\xa0]*$/.test(e)}var sl,cl=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ll(e,t){return-1!=e.indexOf(t)}function fl(e,t){return e<t?-1:e>t?1:0}e:{var hl=qc.navigator;if(hl){var dl=hl.userAgent;if(dl){sl=dl;break e}}sl=""}function pl(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function vl(e){var t={};for(var n in e)t[n]=e[n];return t}var ml="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yl(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<ml.length;a++)n=ml[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function gl(e){return gl[" "](e),e}gl[" "]=Kc;var kl,bl=ll(sl,"Opera"),wl=ll(sl,"Trident")||ll(sl,"MSIE"),xl=ll(sl,"Edge"),_l=xl||wl,Sl=ll(sl,"Gecko")&&!(ll(sl.toLowerCase(),"webkit")&&!ll(sl,"Edge"))&&!(ll(sl,"Trident")||ll(sl,"MSIE"))&&!ll(sl,"Edge"),Il=ll(sl.toLowerCase(),"webkit")&&!ll(sl,"Edge");function El(){var e=qc.document;return e?e.documentMode:void 0}e:{var Tl="",Cl=function(){var e=sl;return Sl?/rv:([^\);]+)(\)|;)/.exec(e):xl?/Edge\/([\d\.]+)/.exec(e):wl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Il?/WebKit\/(\S+)/.exec(e):bl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Cl&&(Tl=Cl?Cl[1]:""),wl){var Nl=El();if(null!=Nl&&Nl>parseFloat(Tl)){kl=String(Nl);break e}}kl=Tl}var Al,Pl={};function Rl(){return function(e){var t=Pl;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=cl(String(kl)).split("."),n=cl("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=fl(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||fl(0==a[2].length,0==o[2].length)||fl(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(qc.document&&wl){var Dl=El();Al=Dl||(parseInt(kl,10)||void 0)}else Al=void 0;var Ol=Al,Ll=function(){if(!qc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{qc.addEventListener("test",Kc,t),qc.removeEventListener("test",Kc,t)}catch(n){}return e}();function Ml(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Fl(e,t){if(Ml.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Sl){e:{try{gl(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ul[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Fl.Z.h.call(this)}}Ml.prototype.h=function(){this.defaultPrevented=!0},el(Fl,Ml);var Ul={2:"touch",3:"pen",4:"mouse"};Fl.prototype.h=function(){Fl.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Vl="closure_listenable_"+(1e6*Math.random()|0),jl=0;function Zl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++jl,this.ca=this.fa=!1}function Bl(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function zl(e){this.src=e,this.g={},this.h=0}function ql(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=rl(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Bl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Kl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}zl.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Kl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Zl(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Wl="closure_lm_"+(1e6*Math.random()|0),Gl={};function Hl(e,t,n,r,i){if(r&&r.once)return $l(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Hl(e,t[a],n,r,i);return null}return n=rf(n),e&&e[Vl]?e.N(t,n,Gc(r)?!!r.capture:!!r,i):Ql(e,t,n,!1,r,i)}function Ql(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Gc(i)?!!i.capture:!!i,u=tf(e);if(u||(e[Wl]=u=new zl(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ef;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ll||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Jl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function $l(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)$l(e,t[a],n,r,i);return null}return n=rf(n),e&&e[Vl]?e.O(t,n,Gc(r)?!!r.capture:!!r,i):Ql(e,t,n,!0,r,i)}function Yl(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Yl(e,t[a],n,r,i);else r=Gc(r)?!!r.capture:!!r,n=rf(n),e&&e[Vl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Kl(a=e.g[t],n,r,i))&&(Bl(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=tf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Kl(t,n,r,i)),(n=-1<e?t[e]:null)&&Xl(n))}function Xl(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Vl])ql(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Jl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=tf(t))?(ql(n,e),0==n.h&&(n.src=null,t[Wl]=null)):Bl(e)}}}function Jl(e){return e in Gl?Gl[e]:Gl[e]="on"+e}function ef(e,t){if(e.ca)e=!0;else{t=new Fl(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Xl(e),e=n.call(r,t)}return e}function tf(e){return(e=e[Wl])instanceof zl?e:null}var nf="__closure_events_fn_"+(1e9*Math.random()>>>0);function rf(e){return"function"===typeof e?e:(e[nf]||(e[nf]=function(t){return e.handleEvent(t)}),e[nf])}function af(){tl.call(this),this.i=new zl(this),this.P=this,this.I=null}function of(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Ml(t,e);else if(t instanceof Ml)t.target=t.target||e;else{var i=t;yl(t=new Ml(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=uf(o,r,!0,t)&&i}if(i=uf(o=t.g=e,r,!0,t)&&i,i=uf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=uf(o=t.g=n[a],r,!1,t)&&i}function uf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&ql(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}el(af,tl),af.prototype[Vl]=!0,af.prototype.removeEventListener=function(e,t,n,r){Yl(this,e,t,n,r)},af.prototype.M=function(){if(af.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bl(n[r]);delete t.g[e],t.h--}}this.I=null},af.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},af.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var sf=qc.JSON.stringify;function cf(){var e=yf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var lf,ff=function(){function e(){ee(this,e),this.h=this.g=null}return(0,te.Z)(e,[{key:"add",value:function(e,t){var n=hf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),hf=new(function(){function e(t,n){ee(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return(0,te.Z)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new df}),(function(e){return e.reset()})),df=function(){function e(){ee(this,e),this.next=this.g=this.h=null}return(0,te.Z)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function pf(e){qc.setTimeout((function(){throw e}),0)}function vf(e,t){lf||function(){var e=qc.Promise.resolve(void 0);lf=function(){e.then(gf)}}(),mf||(lf(),mf=!0),yf.add(e,t)}var mf=!1,yf=new ff;function gf(){for(var e;e=cf();){try{e.h.call(e.g)}catch(n){pf(n)}var t=hf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}mf=!1}function kf(e,t){af.call(this),this.h=e||1,this.g=t||qc,this.j=Xc(this.kb,this),this.l=Date.now()}function bf(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function wf(e,t,n){if("function"===typeof e)n&&(e=Xc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Xc(e.handleEvent,e)}return 2147483647<Number(t)?-1:qc.setTimeout(e,t||0)}function xf(e){e.g=wf((function(){e.g=null,e.i&&(e.i=!1,xf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}el(kf,af),(jc=kf.prototype).da=!1,jc.S=null,jc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),of(this,"tick"),this.da&&(bf(this),this.start()))}},jc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},jc.M=function(){kf.Z.M.call(this),bf(this),delete this.g};var _f=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return(0,te.Z)(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:xf(this)}},{key:"M",value:function(){Sn(ue(n.prototype),"M",this).call(this),this.g&&(qc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(tl);function Sf(e){tl.call(this),this.h=e,this.g={}}el(Sf,tl);var If=[];function Ef(e,t,n,r){Array.isArray(n)||(n&&(If[0]=n.toString()),n=If);for(var i=0;i<n.length;i++){var a=Hl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Tf(e){pl(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Xl(e)}),e),e.g={}}function Cf(){this.g=!0}function Nf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return sf(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Sf.prototype.M=function(){Sf.Z.M.call(this),Tf(this)},Sf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cf.prototype.Aa=function(){this.g=!1},Cf.prototype.info=function(){};var Af={},Pf=null;function Rf(){return Pf=Pf||new af}function Df(e){Ml.call(this,Af.Ma,e)}function Of(e){var t=Rf();of(t,new Df(t,e))}function Lf(e,t){Ml.call(this,Af.STAT_EVENT,e),this.stat=t}function Mf(e){var t=Rf();of(t,new Lf(t,e))}function Ff(e,t){Ml.call(this,Af.Na,e),this.size=t}function Uf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return qc.setTimeout((function(){e()}),t)}Af.Ma="serverreachability",el(Df,Ml),Af.STAT_EVENT="statevent",el(Lf,Ml),Af.Na="timingevent",el(Ff,Ml);var Vf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},jf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Zf(){}function Bf(e){return e.h||(e.h=e.i())}function zf(){}Zf.prototype.h=null;var qf,Kf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Wf(){Ml.call(this,"d")}function Gf(){Ml.call(this,"c")}function Hf(){}function Qf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Sf(this),this.P=Yf,e=_l?125:void 0,this.W=new kf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new $f}function $f(){this.i=null,this.g="",this.h=!1}el(Wf,Ml),el(Gf,Ml),el(Hf,Zf),Hf.prototype.g=function(){return new XMLHttpRequest},Hf.prototype.i=function(){return{}},qf=new Hf;var Yf=45e3,Xf={},Jf={};function eh(e,t,n){e.K=1,e.v=_h(yh(t)),e.s=n,e.U=!0,th(e,null)}function th(e,t){e.F=Date.now(),ah(e),e.A=yh(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Mh(n.h,"t",r),e.C=0,n=e.l.H,e.h=new $f,e.g=Ud(e.l,n?t:null,!e.s),0<e.O&&(e.L=new _f(Xc(e.Ia,e,e.g),e.O)),Ef(e.V,e.g,"readystatechange",e.gb),t=e.H?vl(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Of(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function nh(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function rh(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=ih(e,n))==Jf){4==t&&(e.o=4,Mf(14),i=!1),Nf(e.j,e.m,null,"[Incomplete Response]");break}if(r==Xf){e.o=4,Mf(15),Nf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Nf(e.j,e.m,r,null),lh(e,r)}nh(e)&&r!=Jf&&r!=Xf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Mf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ad(t),t.L=!0,Mf(11))):(Nf(e.j,e.m,n,"[Invalid Chunked Response]"),ch(e),sh(e))}function ih(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Jf:(n=Number(t.substring(n,r)),isNaN(n)?Xf:(r+=1)+n>t.length?Jf:(t=t.substr(r,n),e.C=r+n,t))}function ah(e){e.Y=Date.now()+e.P,oh(e,e.P)}function oh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Uf(Xc(e.eb,e),t)}function uh(e){e.B&&(qc.clearTimeout(e.B),e.B=null)}function sh(e){0==e.l.G||e.I||Dd(e.l,e)}function ch(e){uh(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,bf(e.W),Tf(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function lh(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||qh(n.i,e)))if(n.I=e.N,!e.J&&qh(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Rd(n),wd(n)}Nd(n),Mf(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Uf(Xc(n.ab,n),6e3));if(1>=zh(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Ld(n,11)}else if((e.J||n.g==e)&&Rd(n),!ul(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(ll(l,"spdy")||ll(l,"quic")||ll(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Kh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,xh(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Fd(r,r.H?r.la:null,r.W),d.J){Wh(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(uh(p),ah(p)),r.g=d}else Cd(r);0<n.l.length&&Sd(n)}else"stop"!=a[0]&&"close"!=a[0]||Ld(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ld(n,7):bd(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Of(4)}catch(a){}}function fh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Wc(e)||"string"===typeof e)il(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Wc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Wc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function hh(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof hh)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function dh(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];ph(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)ph(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function ph(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(jc=Qf.prototype).setTimeout=function(e){this.P=e},jc.gb=function(e){e=e.target;var t=this.L;t&&3==vd(e)?t.l():this.Ia(e)},jc.Ia=function(e){try{if(e==this.g)e:{var t=vd(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||_l||this.g&&(this.h.h||this.g.ga()||md(this.g)))){this.I||4!=t||7==n||Of(8==n||0>=r?3:2),uh(this);var i=this.g.ba();this.N=i;t:if(nh(this)){var a=md(this.g);e="";var o=a.length,u=4==vd(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ch(this),sh(this);var s="";break t}this.h.i=new qc.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ul(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Mf(12),ch(this),sh(this);break e}Nf(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,lh(this,i)}this.U?(rh(this,t,s),_l&&this.i&&3==t&&(Ef(this.V,this.W,"tick",this.fb),this.W.start())):(Nf(this.j,this.m,s,null),lh(this,s)),4==t&&ch(this),this.i&&!this.I&&(4==t?Dd(this.l,this):(this.i=!1,ah(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Mf(12)):(this.o=0,Mf(13)),ch(this),sh(this)}}}catch(t){}},jc.fb=function(){if(this.g){var e=vd(this.g),t=this.g.ga();this.C<t.length&&(uh(this),rh(this,e,t),this.i&&4!=e&&ah(this))}},jc.cancel=function(){this.I=!0,ch(this)},jc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Of(3),Mf(17)),ch(this),this.o=2,sh(this)):oh(this,this.Y-e)},(jc=hh.prototype).R=function(){dh(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},jc.T=function(){return dh(this),this.g.concat()},jc.get=function(e,t){return ph(this.h,e)?this.h[e]:t},jc.set=function(e,t){ph(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},jc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var vh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mh(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof mh){this.g=void 0!==t?t:e.g,gh(this,e.j),this.s=e.s,kh(this,e.i),bh(this,e.m),this.l=e.l,t=e.h;var n=new Rh;n.i=t.i,t.g&&(n.g=new hh(t.g),n.h=t.h),wh(this,n),this.o=e.o}else e&&(n=String(e).match(vh))?(this.g=!!t,gh(this,n[1]||"",!0),this.s=Sh(n[2]||""),kh(this,n[3]||"",!0),bh(this,n[4]),this.l=Sh(n[5]||"",!0),wh(this,n[6]||"",!0),this.o=Sh(n[7]||"")):(this.g=!!t,this.h=new Rh(null,this.g))}function yh(e){return new mh(e)}function gh(e,t,n){e.j=n?Sh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function kh(e,t,n){e.i=n?Sh(t,!0):t}function bh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function wh(e,t,n){t instanceof Rh?(e.h=t,function(e,t){t&&!e.j&&(Dh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Oh(this,t),Mh(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ih(t,Ah)),e.h=new Rh(t,e.g))}function xh(e,t,n){e.h.set(t,n)}function _h(e){return xh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Sh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ih(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Eh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Eh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ih(t,Th,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ih(t,Th,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ih(n,"/"==n.charAt(0)?Nh:Ch,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ih(n,Ph)),e.join("")};var Th=/[#\/\?@]/g,Ch=/[#\?:]/g,Nh=/[#\?]/g,Ah=/[#\?@]/g,Ph=/#/g;function Rh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Dh(e){e.g||(e.g=new hh,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Oh(e,t){Dh(e),t=Fh(e,t),ph(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,ph((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&dh(e)))}function Lh(e,t){return Dh(e),t=Fh(e,t),ph(e.g.h,t)}function Mh(e,t,n){Oh(e,t),0<n.length&&(e.i=null,e.g.set(Fh(e,t),ol(n)),e.h+=n.length)}function Fh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(jc=Rh.prototype).add=function(e,t){Dh(this),this.i=null,e=Fh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},jc.forEach=function(e,t){Dh(this),this.g.forEach((function(n,r){il(n,(function(n){e.call(t,n,r,this)}),this)}),this)},jc.T=function(){Dh(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},jc.R=function(e){Dh(this);var t=[];if("string"===typeof e)Lh(this,e)&&(t=al(t,this.g.get(Fh(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=al(t,e[n])}return t},jc.set=function(e,t){return Dh(this),this.i=null,Lh(this,e=Fh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},jc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},jc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Uh=(0,te.Z)((function e(t,n){ee(this,e),this.h=t,this.g=n}));function Vh(e){this.l=e||Zh,qc.PerformanceNavigationTiming?e=0<(e=qc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(qc.g&&qc.g.Ea&&qc.g.Ea()&&qc.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var jh,Zh=10;function Bh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function zh(e){return e.h?1:e.g?e.g.size:0}function qh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Kh(e,t){e.g?e.g.add(t):e.h=t}function Wh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Gh(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=re(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return ol(e.i)}function Hh(){}function Qh(){this.g=new Hh}function $h(e,t,n){var r=n||"";try{fh(e,(function(e,n){var i=e;Gc(e)&&(i=sf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Yh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Xh(e){this.l=e.$b||null,this.j=e.ib||!1}function Jh(e,t){af.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ed,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vh.prototype.cancel=function(){if(this.i=Gh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=re(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Hh.prototype.stringify=function(e){return qc.JSON.stringify(e,void 0)},Hh.prototype.parse=function(e){return qc.JSON.parse(e,void 0)},el(Xh,Zf),Xh.prototype.g=function(){return new Jh(this.l,this.j)},Xh.prototype.i=(jh={},function(){return jh}),el(Jh,af);var ed=0;function td(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function nd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,rd(e)}function rd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(jc=Jh.prototype).open=function(e,t){if(this.readyState!=ed)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,rd(this)},jc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||qc).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},jc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nd(this)),this.readyState=ed},jc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,rd(this)),this.g&&(this.readyState=3,rd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof qc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;td(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},jc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?nd(this):rd(this),3==this.readyState&&td(this)}},jc.Ua=function(e){this.g&&(this.response=this.responseText=e,nd(this))},jc.Ta=function(e){this.g&&(this.response=e,nd(this))},jc.ha=function(){this.g&&nd(this)},jc.setRequestHeader=function(e,t){this.v.append(e,t)},jc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},jc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Jh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var id=qc.JSON.parse;function ad(e){af.call(this),this.headers=new hh,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=od,this.K=this.L=!1}el(ad,af);var od="",ud=/^https?$/i,sd=["POST","PUT"];function cd(e){return"content-type"==e.toLowerCase()}function ld(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,fd(e),dd(e)}function fd(e){e.D||(e.D=!0,of(e,"complete"),of(e,"error"))}function hd(e){if(e.h&&"undefined"!=typeof zc&&(!e.C[1]||4!=vd(e)||2!=e.ba()))if(e.v&&4==vd(e))wf(e.Fa,0,e);else if(of(e,"readystatechange"),4==vd(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(vh)[1]||null;if(!a&&qc.self&&qc.self.location){var o=qc.self.location.protocol;a=o.substr(0,o.length-1)}i=!ud.test(a?a.toLowerCase():"")}t=i}if(t)of(e,"complete"),of(e,"success");else{e.m=6;try{var u=2<vd(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",fd(e)}}finally{dd(e)}}}function dd(e,t){if(e.g){pd(e);var n=e.g,r=e.C[0]?Kc:null;e.g=null,e.C=null,t||of(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function pd(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(qc.clearTimeout(e.A),e.A=null)}function vd(e){return e.g?e.g.readyState:0}function md(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case od:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function yd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return pl(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):xh(e,t,n))}function gd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function kd(e){this.za=0,this.l=[],this.h=new Cf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gd("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gd("baseRetryDelayMs",5e3,e),this.$a=gd("retryDelaySeedMs",1e4,e),this.Ya=gd("forwardChannelMaxRetries",2,e),this.ra=gd("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Vh(e&&e.concurrentRequestLimit),this.Ca=new Qh,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function bd(e){if(xd(e),3==e.G){var t=e.V++,n=yh(e.F);xh(n,"SID",e.J),xh(n,"RID",t),xh(n,"TYPE","terminate"),Ed(e,n),(t=new Qf(e,e.h,t,void 0)).K=2,t.v=_h(yh(n)),n=!1,qc.navigator&&qc.navigator.sendBeacon&&(n=qc.navigator.sendBeacon(t.v.toString(),"")),!n&&qc.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ud(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ah(t)}Md(e)}function wd(e){e.g&&(Ad(e),e.g.cancel(),e.g=null)}function xd(e){wd(e),e.u&&(qc.clearTimeout(e.u),e.u=null),Rd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&qc.clearTimeout(e.m),e.m=null)}function _d(e,t){e.l.push(new Uh(e.Za++,t)),3==e.G&&Sd(e)}function Sd(e){Bh(e.i)||e.m||(e.m=!0,vf(e.Ha,e),e.C=0)}function Id(e,t){var n;n=t?t.m:e.V++;var r=yh(e.F);xh(r,"SID",e.J),xh(r,"RID",n),xh(r,"AID",e.U),Ed(e,r),e.o&&e.s&&yd(r,e.o,e.s),n=new Qf(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Td(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Kh(e.i,n),eh(n,r,t)}function Ed(e,t){e.j&&fh({},(function(e,n){xh(t,n,e)}))}function Td(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Xc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{$h(l,o,"req"+c+"_")}catch(hp){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Cd(e){e.g||e.u||(e.Y=1,vf(e.Ga,e),e.A=0)}function Nd(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Uf(Xc(e.Ga,e),Od(e,e.A)),e.A++,!0)}function Ad(e){null!=e.B&&(qc.clearTimeout(e.B),e.B=null)}function Pd(e){e.g=new Qf(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=yh(e.oa);xh(t,"RID","rpc"),xh(t,"SID",e.J),xh(t,"CI",e.N?"0":"1"),xh(t,"AID",e.U),Ed(e,t),xh(t,"TYPE","xmlhttp"),e.o&&e.s&&yd(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=_h(yh(t)),n.s=null,n.U=!0,th(n,e)}function Rd(e){null!=e.v&&(qc.clearTimeout(e.v),e.v=null)}function Dd(e,t){var n=null;if(e.g==t){Rd(e),Ad(e),e.g=null;var r=2}else{if(!qh(e.i,t))return;n=t.D,Wh(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;of(r=Rf(),new Ff(r,n,t,i)),Sd(e)}else Cd(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(zh(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Uf(Xc(e.Ha,e,t),Od(e,e.C)),e.C++,!0))}(e,t)||2==r&&Nd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ld(e,5);break;case 4:Ld(e,10);break;case 3:Ld(e,6);break;default:Ld(e,2)}}function Od(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Ld(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Xc(e.jb,e);n||(n=new mh("//www.google.com/images/cleardot.gif"),qc.location&&"http"==qc.location.protocol||gh(n,"https"),_h(n)),function(e,t){var n=new Cf;if(qc.Image){var r=new Image;r.onload=Jc(Yh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Jc(Yh,n,r,"TestLoadImage: error",!1,t),r.onabort=Jc(Yh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Jc(Yh,n,r,"TestLoadImage: timeout",!1,t),qc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Mf(2);e.G=0,e.j&&e.j.va(t),Md(e),xd(e)}function Md(e){e.G=0,e.I=-1,e.j&&(0==Gh(e.i).length&&0==e.l.length||(e.i.i.length=0,ol(e.l),e.l.length=0),e.j.ua())}function Fd(e,t,n){var r=function(e){return e instanceof mh?yh(e):new mh(e,void 0)}(n);if(""!=r.i)t&&kh(r,t+"."+r.i),bh(r,r.m);else{var i=qc.location;r=function(e,t,n,r){var i=new mh(null,void 0);return e&&gh(i,e),t&&kh(i,t),n&&bh(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&pl(e.aa,(function(e,t){xh(r,t,e)})),t=e.D,n=e.sa,t&&n&&xh(r,t,n),xh(r,"VER",e.ma),Ed(e,r),r}function Ud(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new ad(new Xh({ib:!0})):new ad(e.qa)).L=e.H,t}function Vd(){}function jd(){if(wl&&!(10<=Number(Ol)))throw Error("Environmental error: no available transport.")}function Zd(e,t){af.call(this),this.g=new kd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ul(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ul(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new qd(this)}function Bd(e){Wf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function zd(){Gf.call(this),this.status=1}function qd(e){this.g=e}(jc=ad.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():qf.g(),this.C=this.u?Bf(this.u):Bf(qf),this.g.onreadystatechange=Xc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void ld(this,a)}e=n||"";var i=new hh(this.headers);r&&fh(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=cd,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=qc.FormData&&e instanceof qc.FormData,!(0<=rl(sd,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pd(this),0<this.B&&((this.K=function(e){return wl&&Rl()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xc(this.pa,this)):this.A=wf(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){ld(this,a)}},jc.pa=function(){"undefined"!=typeof zc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,of(this,"timeout"),this.abort(8))},jc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,of(this,"complete"),of(this,"abort"),dd(this))},jc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dd(this,!0)),ad.Z.M.call(this)},jc.Fa=function(){this.s||(this.F||this.v||this.l?hd(this):this.cb())},jc.cb=function(){hd(this)},jc.ba=function(){try{return 2<vd(this)?this.g.status:-1}catch(jh){return-1}},jc.ga=function(){try{return this.g?this.g.responseText:""}catch(jh){return""}},jc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),id(t)}},jc.Da=function(){return this.m},jc.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(jc=kd.prototype).ma=8,jc.G=1,jc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},jc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Qf(this,this.h,e,void 0),n=this.s;if(this.P&&(n?yl(n=vl(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Td(this,t,r),xh(i=yh(this.F),"RID",e),xh(i,"CVER",22),this.D&&xh(i,"X-HTTP-Session-Id",this.D),Ed(this,i),this.o&&n&&yd(i,this.o,n),Kh(this.i,t),this.Ra&&xh(i,"TYPE","init"),this.ja?(xh(i,"$req",r),xh(i,"SID","null"),t.$=!0,eh(t,i,null)):eh(t,i,r),this.G=2}}else 3==this.G&&(e?Id(this,e):0==this.l.length||Bh(this.i)||Id(this))},jc.Ga=function(){if(this.u=null,Pd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Uf(Xc(this.bb,this),e)}},jc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Mf(10),wd(this),Pd(this))},jc.ab=function(){null!=this.v&&(this.v=null,wd(this),Nd(this),Mf(19))},jc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Mf(2)):(this.h.info("Failed to ping google.com"),Mf(1))},(jc=Vd.prototype).xa=function(){},jc.wa=function(){},jc.va=function(){},jc.ua=function(){},jc.Oa=function(){},jd.prototype.g=function(e,t){return new Zd(e,t)},el(Zd,af),Zd.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),vf(Xc(e.hb,e,t))),Mf(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Fd(e,null,e.W),Sd(e)},Zd.prototype.close=function(){bd(this.g)},Zd.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,_d(this.g,t)}else this.v?((t={}).__data__=sf(e),_d(this.g,t)):_d(this.g,e)},Zd.prototype.M=function(){this.g.j=null,delete this.j,bd(this.g),delete this.g,Zd.Z.M.call(this)},el(Bd,Wf),el(zd,Gf),el(qd,Vd),qd.prototype.xa=function(){of(this.g,"a")},qd.prototype.wa=function(e){of(this.g,new Bd(e))},qd.prototype.va=function(e){of(this.g,new zd(e))},qd.prototype.ua=function(){of(this.g,"b")},jd.prototype.createWebChannel=jd.prototype.g,Zd.prototype.send=Zd.prototype.u,Zd.prototype.open=Zd.prototype.m,Zd.prototype.close=Zd.prototype.close,Vf.NO_ERROR=0,Vf.TIMEOUT=8,Vf.HTTP_ERROR=6,jf.COMPLETE="complete",zf.EventType=Kf,Kf.OPEN="a",Kf.CLOSE="b",Kf.ERROR="c",Kf.MESSAGE="d",af.prototype.listen=af.prototype.N,ad.prototype.listenOnce=ad.prototype.O,ad.prototype.getLastError=ad.prototype.La,ad.prototype.getLastErrorCode=ad.prototype.Da,ad.prototype.getStatus=ad.prototype.ba,ad.prototype.getResponseJson=ad.prototype.Qa,ad.prototype.getResponseText=ad.prototype.ga,ad.prototype.send=ad.prototype.ea;var Kd=Bc.createWebChannelTransport=function(){return new jd},Wd=Bc.getStatEventTarget=function(){return Rf()},Gd=Bc.ErrorCode=Vf,Hd=Bc.EventType=jf,Qd=Bc.Event=Af,$d=Bc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Yd=Bc.FetchXmlHttpFactory=Xh,Xd=Bc.WebChannel=zf,Jd=Bc.XhrIo=ad,ep="@firebase/firestore",tp=function(){function e(t){ee(this,e),this.uid=t}return(0,te.Z)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();tp.UNAUTHENTICATED=new tp(null),tp.GOOGLE_CREDENTIALS=new tp("google-credentials-uid"),tp.FIRST_PARTY=new tp("first-party-uid"),tp.MOCK_USER=new tp("mock-user");var np="9.8.0",rp=new it("@firebase/firestore");function ip(){return rp.logLevel}function ap(e){if(rp.logLevel<=Ye.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sp);rp.debug.apply(rp,["Firestore (".concat(np,"): ").concat(e)].concat((0,Be.Z)(i)))}}function op(e){if(rp.logLevel<=Ye.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sp);rp.error.apply(rp,["Firestore (".concat(np,"): ").concat(e)].concat((0,Be.Z)(i)))}}function up(e){if(rp.logLevel<=Ye.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sp);rp.warn.apply(rp,["Firestore (".concat(np,"): ").concat(e)].concat((0,Be.Z)(i)))}}function sp(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function cp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(np,") INTERNAL ASSERTION FAILED: ")+e;throw op(t),new Error(t)}function lp(e,t){e||cp()}function fp(e,t){return e}var hp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},dp=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return(0,te.Z)(n)}(Ce),pp=(0,te.Z)((function e(){var t=this;ee(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),vp=(0,te.Z)((function e(t,n){ee(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),mp=function(){function e(){ee(this,e)}return(0,te.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(tp.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),yp=function(){function e(t){ee(this,e),this.token=t,this.changeListener=null}return(0,te.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),gp=function(){function e(t){ee(this,e),this.t=t,this.currentUser=tp.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,te.Z)(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new pp;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new pp,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){ap("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(ap("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new pp)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ap("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(lp("string"==typeof n.accessToken),new vp(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return lp(null===e||"string"==typeof e),new tp(e)}}]),e}(),kp=(0,te.Z)((function e(t,n,r){ee(this,e),this.type="FirstParty",this.user=tp.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),bp=function(){function e(t,n,r){ee(this,e),this.h=t,this.l=n,this.m=r}return(0,te.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(new kp(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(tp.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),wp=(0,te.Z)((function e(t){ee(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),xp=function(){function e(t){ee(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return(0,te.Z)(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ap("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,ap("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ap("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):ap("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(lp("string"==typeof t.token),e.p=t.token,new wp(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),_p=function(){function e(t,n){var r=this;ee(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return(0,te.Z)(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Sp(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}_p.A=-1;var Ip=function(){function e(){ee(this,e)}return(0,te.Z)(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Sp(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ep(e,t){return e<t?-1:e>t?1:0}function Tp(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Cp(e){return e+"\0"}var Np=function(){function e(t,n){if(ee(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new dp(hp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new dp(hp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new dp(hp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new dp(hp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return(0,te.Z)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ep(this.nanoseconds,e.nanoseconds):Ep(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ap=function(){function e(t){ee(this,e),this.timestamp=t}return(0,te.Z)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Np(0,0))}},{key:"max",value:function(){return new e(new Np(253402300799,999999999))}}]),e}();function Pp(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rp(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Dp(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Op=function(){function e(t,n,r){ee(this,e),void 0===n?n=0:n>t.length&&cp(),void 0===r?r=t.length-n:r>t.length-n&&cp(),this.segments=t,this.offset=n,this.len=r}return(0,te.Z)(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Lp=function(e){oe(n,e);var t=fe(n);function n(){return ee(this,n),t.apply(this,arguments)}return(0,te.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new dp(hp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,(0,Be.Z)(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Op),Mp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fp=function(e){oe(n,e);var t=fe(n);function n(){return ee(this,n),t.apply(this,arguments)}return(0,te.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Mp.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new dp(hp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new dp(hp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new dp(hp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new dp(hp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Op),Up=function(){function e(t){ee(this,e),this.fields=t,t.sort(Fp.comparator)}return(0,te.Z)(e,[{key:"covers",value:function(e){var t,n=re(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Tp(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Vp=function(e){function t(e){ee(this,t),this.binaryString=e}return(0,te.Z)(t,[{key:e,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ep(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}(Symbol.iterator);Vp.EMPTY_BYTE_STRING=new Vp("");var jp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zp(e){if(lp(!!e),"string"==typeof e){var t=0,n=jp.exec(e);if(lp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Bp(e.seconds),nanos:Bp(e.nanos)}}function Bp(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function zp(e){return"string"==typeof e?Vp.fromBase64String(e):Vp.fromUint8Array(e)}function qp(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kp(e){var t=e.mapValue.fields.__previous_value__;return qp(t)?Kp(t):t}function Wp(e){var t=Zp(e.mapValue.fields.__local_write_time__.timestampValue);return new Np(t.seconds,t.nanos)}var Gp=(0,te.Z)((function e(t,n,r,i,a,o,u,s){ee(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Hp=function(){function e(t,n){ee(this,e),this.projectId=t,this.database=n||"(default)"}return(0,te.Z)(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Qp(e){return null==e}function $p(e){return 0===e&&1/e==-1/0}function Yp(e){return"number"==typeof e&&Number.isInteger(e)&&!$p(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Xp=function(){function e(t){ee(this,e),this.path=t}return(0,te.Z)(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Lp.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Lp.fromString(t))}},{key:"fromName",value:function(t){return new e(Lp.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Lp.emptyPath())}},{key:"comparator",value:function(e,t){return Lp.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Lp(t.slice()))}}]),e}(),Jp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ev={nullValue:"NULL_VALUE"};function tv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qp(e)?4:vv(e)?9007199254740991:10:cp()}function nv(e,t){if(e===t)return!0;var n=tv(e);if(n!==tv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Wp(e).isEqual(Wp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Zp(e.timestampValue),r=Zp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return zp(e.bytesValue).isEqual(zp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Bp(e.geoPointValue.latitude)===Bp(t.geoPointValue.latitude)&&Bp(e.geoPointValue.longitude)===Bp(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Bp(e.integerValue)===Bp(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Bp(e.doubleValue),r=Bp(t.doubleValue);return n===r?$p(n)===$p(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Tp(e.arrayValue.values||[],t.arrayValue.values||[],nv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Pp(n)!==Pp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!nv(n[i],r[i])))return!1;return!0}(e,t);default:return cp()}}function rv(e,t){return void 0!==(e.values||[]).find((function(e){return nv(e,t)}))}function iv(e,t){if(e===t)return 0;var n=tv(e),r=tv(t);if(n!==r)return Ep(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ep(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Bp(e.integerValue||e.doubleValue),r=Bp(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return av(e.timestampValue,t.timestampValue);case 4:return av(Wp(e),Wp(t));case 5:return Ep(e.stringValue,t.stringValue);case 6:return function(e,t){var n=zp(e),r=zp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ep(n[i],r[i]);if(0!==a)return a}return Ep(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ep(Bp(e.latitude),Bp(t.latitude));return 0!==n?n:Ep(Bp(e.longitude),Bp(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=iv(n[i],r[i]);if(a)return a}return Ep(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Jp.mapValue&&t===Jp.mapValue)return 0;if(e===Jp.mapValue)return 1;if(t===Jp.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Ep(r[o],a[o]);if(0!==u)return u;var s=iv(n[r[o]],i[a[o]]);if(0!==s)return s}return Ep(r.length,a.length)}(e.mapValue,t.mapValue);default:throw cp()}}function av(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ep(e,t);var n=Zp(e),r=Zp(t),i=Ep(n.seconds,r.seconds);return 0!==i?i:Ep(n.nanos,r.nanos)}function ov(e){return uv(e)}function uv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Zp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?zp(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Xp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=re(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=uv(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=re(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(uv(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):cp();var t,n}function sv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function cv(e){return!!e&&"integerValue"in e}function lv(e){return!!e&&"arrayValue"in e}function fv(e){return!!e&&"nullValue"in e}function hv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function dv(e){return!!e&&"mapValue"in e}function pv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Rp(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=pv(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=pv(e.arrayValue.values[r]);return n}return Object.assign({},e)}function vv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function mv(e){return"nullValue"in e?ev:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?sv(Hp.empty(),Xp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:cp()}function yv(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?sv(Hp.empty(),Xp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Jp:cp()}function gv(e,t){var n=iv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function kv(e,t){var n=iv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var bv=function(){function e(t){ee(this,e),this.value=t}return(0,te.Z)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!dv(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pv(t)}},{key:"setAll",value:function(e){var t=this,n=Fp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=pv(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());dv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return nv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];dv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Rp(t,(function(t,n){return e[t]=n}));var r,i=re(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(pv(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function wv(e){var t=[];return Rp(e.fields,(function(e,n){var r=new Fp([e]);if(dv(n)){var i=wv(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=re(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Up(t)}var xv=function(){function e(t,n,r,i,a,o){ee(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return(0,te.Z)(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=bv.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=bv.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ap.min(),Ap.min(),bv.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Ap.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ap.min(),bv.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ap.min(),bv.empty(),2)}}]),e}(),_v=(0,te.Z)((function e(t,n,r,i){ee(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Sv(e){return e.fields.find((function(e){return 2===e.kind}))}function Iv(e){return e.fields.filter((function(e){return 2!==e.kind}))}_v.UNKNOWN_ID=-1;var Ev=(0,te.Z)((function e(t,n){ee(this,e),this.fieldPath=t,this.kind=n})),Tv=function(){function e(t,n){ee(this,e),this.sequenceNumber=t,this.offset=n}return(0,te.Z)(e,null,[{key:"empty",value:function(){return new e(0,Av.min())}}]),e}();function Cv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ap.fromTimestamp(1e9===r?new Np(n+1,0):new Np(n,r));return new Av(i,Xp.empty(),t)}function Nv(e){return new Av(e.readTime,e.key,-1)}var Av=function(){function e(t,n,r){ee(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return(0,te.Z)(e,null,[{key:"min",value:function(){return new e(Ap.min(),Xp.empty(),-1)}},{key:"max",value:function(){return new e(Ap.max(),Xp.empty(),-1)}}]),e}();function Pv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Xp.comparator(e.documentKey,t.documentKey))?n:Ep(e.largestBatchId,t.largestBatchId)}var Rv=function(){function e(t,n){ee(this,e),this.comparator=t,this.root=n||Ov.EMPTY}return(0,te.Z)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ov.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ov.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Dv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Dv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Dv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Dv(this.root,e,this.comparator,!0)}}]),e}(),Dv=function(){function e(t,n,r,i){ee(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return(0,te.Z)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Ov=function(){function e(t,n,r,i,a){ee(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return(0,te.Z)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw cp();if(this.right.isRed())throw cp();var e=this.left.check();if(e!==this.right.check())throw cp();return e+(this.isRed()?0:1)}}]),e}();Ov.EMPTY=null,Ov.RED=!0,Ov.BLACK=!1,Ov.EMPTY=new(function(){function e(){ee(this,e),this.size=0}return(0,te.Z)(e,[{key:"key",get:function(){throw cp()}},{key:"value",get:function(){throw cp()}},{key:"color",get:function(){throw cp()}},{key:"left",get:function(){throw cp()}},{key:"right",get:function(){throw cp()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Ov(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Lv=function(){function e(t){ee(this,e),this.comparator=t,this.data=new Rv(this.comparator)}return(0,te.Z)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Mv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Mv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Mv=function(){function e(t){ee(this,e),this.iter=t}return(0,te.Z)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Fv(e){return e.hasNext()?e.getNext():void 0}var Uv=(0,te.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;ee(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function Vv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Uv(e,t,n,r,i,a,o)}function jv(e){var t=fp(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+ov(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Qp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ov(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ov(e)})).join(",")),t.P=n}return t.P}function Zv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!rm(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!nv(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!am(e.startAt,t.startAt)&&am(e.endAt,t.endAt)}function Bv(e){return Xp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function zv(e,t){return e.filters.filter((function(e){return e instanceof Wv&&e.field.isEqual(t)}))}function qv(e,t,n){var r,i=ev,a=!0,o=re(zv(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ev,c=!0;switch(u.op){case"<":case"<=":s=mv(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=ev}gv({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];gv({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Kv(e,t,n){var r,i=Jp,a=!0,o=re(zv(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Jp,c=!0;switch(u.op){case">=":case">":s=yv(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Jp}kv({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];kv({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Wv=function(e){oe(n,e);var t=fe(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return(0,te.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(iv(t,this.value)):null!==t&&tv(this.value)===tv(t)&&this.v(iv(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return cp()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Gv(e,t,r):"array-contains"===t?new Yv(e,r):"in"===t?new Xv(e,r):"not-in"===t?new Jv(e,r):"array-contains-any"===t?new em(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Hv(e,n):new Qv(e,n)}}]),n}(function(){return(0,te.Z)((function e(){ee(this,e)}))}()),Gv=function(e){oe(n,e);var t=fe(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this,e,r,i)).key=Xp.fromName(i.referenceValue),a}return(0,te.Z)(n,[{key:"matches",value:function(e){var t=Xp.comparator(e.key,this.key);return this.v(t)}}]),n}(Wv),Hv=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this,e,"in",r)).keys=$v("in",r),i}return(0,te.Z)(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Wv),Qv=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this,e,"not-in",r)).keys=$v("not-in",r),i}return(0,te.Z)(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Wv);function $v(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Xp.fromName(e.referenceValue)}))}var Yv=function(e){oe(n,e);var t=fe(n);function n(e,r){return ee(this,n),t.call(this,e,"array-contains",r)}return(0,te.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return lv(t)&&rv(t.arrayValue,this.value)}}]),n}(Wv),Xv=function(e){oe(n,e);var t=fe(n);function n(e,r){return ee(this,n),t.call(this,e,"in",r)}return(0,te.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&rv(this.value.arrayValue,t)}}]),n}(Wv),Jv=function(e){oe(n,e);var t=fe(n);function n(e,r){return ee(this,n),t.call(this,e,"not-in",r)}return(0,te.Z)(n,[{key:"matches",value:function(e){if(rv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!rv(this.value.arrayValue,t)}}]),n}(Wv),em=function(e){oe(n,e);var t=fe(n);function n(e,r){return ee(this,n),t.call(this,e,"array-contains-any",r)}return(0,te.Z)(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!lv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return rv(t.value.arrayValue,e)}))}}]),n}(Wv),tm=(0,te.Z)((function e(t,n){ee(this,e),this.position=t,this.inclusive=n})),nm=(0,te.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";ee(this,e),this.field=t,this.dir=n}));function rm(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function im(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Xp.comparator(Xp.fromName(o.referenceValue),n.key):iv(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function am(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!nv(e.position[n],t.position[n]))return!1;return!0}var om=(0,te.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;ee(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function um(e,t,n,r,i,a,o,u){return new om(e,t,n,r,i,a,o,u)}function sm(e){return new om(e)}function cm(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function lm(e){var t,n=re(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function fm(e){return null!==e.collectionGroup}function hm(e){var t=fp(e);if(null===t.D){t.D=[];var n=lm(t),r=cm(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new nm(n)),t.D.push(new nm(Fp.keyField(),"asc"));else{var i,a=!1,o=re(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new nm(Fp.keyField(),s))}}}return t.D}function dm(e){var t=fp(e);if(!t.C)if("F"===t.limitType)t.C=Vv(t.path,t.collectionGroup,hm(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=re(hm(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new nm(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new tm(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new tm(t.startAt.position,t.startAt.inclusive):null;t.C=Vv(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function pm(e,t,n){return new om(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function vm(e,t){return Zv(dm(e),dm(t))&&e.limitType===t.limitType}function mm(e){return"".concat(jv(dm(e)),"|lt:").concat(e.limitType)}function ym(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(ov(t.value));var t})).join(", "),"]")),Qp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ov(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ov(e)})).join(",")),"Target(".concat(t,")")}(dm(e)),"; limitType=").concat(e.limitType,")")}function gm(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Xp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=re(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=re(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=im(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,hm(e),t))&&!(e.endAt&&!function(e,t,n){var r=im(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,hm(e),t))}(e,t)}function km(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function bm(e){return function(t,n){var r,i=!1,a=re(hm(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=wm(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function wm(e,t,n){var r=e.field.isKeyField()?Xp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?iv(r,i):cp()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return cp()}}function xm(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$p(t)?"-0":t}}function _m(e){return{integerValue:""+e}}function Sm(e,t){return Yp(t)?_m(t):xm(e,t)}var Im=(0,te.Z)((function e(){ee(this,e),this._=void 0}));function Em(e,t,n){return e instanceof Nm?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Am?Pm(e,t):e instanceof Rm?Dm(e,t):function(e,t){var n=Cm(e,t),r=Lm(n)+Lm(e.k);return cv(n)&&cv(e.k)?_m(r):xm(e.M,r)}(e,t)}function Tm(e,t,n){return e instanceof Am?Pm(e,t):e instanceof Rm?Dm(e,t):n}function Cm(e,t){return e instanceof Om?cv(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Nm=function(e){oe(n,e);var t=fe(n);function n(){return ee(this,n),t.apply(this,arguments)}return(0,te.Z)(n)}(Im),Am=function(e){oe(n,e);var t=fe(n);function n(e){var r;return ee(this,n),(r=t.call(this)).elements=e,r}return(0,te.Z)(n)}(Im);function Pm(e,t){var n,r=Mm(t),i=re(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return nv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Rm=function(e){oe(n,e);var t=fe(n);function n(e){var r;return ee(this,n),(r=t.call(this)).elements=e,r}return(0,te.Z)(n)}(Im);function Dm(e,t){var n,r=Mm(t),i=re(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!nv(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Om=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this)).M=e,i.k=r,i}return(0,te.Z)(n)}(Im);function Lm(e){return Bp(e.integerValue||e.doubleValue)}function Mm(e){return lv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Fm=(0,te.Z)((function e(t,n){ee(this,e),this.field=t,this.transform=n}));var Um=(0,te.Z)((function e(t,n){ee(this,e),this.version=t,this.transformResults=n})),Vm=function(){function e(t,n){ee(this,e),this.updateTime=t,this.exists=n}return(0,te.Z)(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function jm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Zm=(0,te.Z)((function e(){ee(this,e)}));function Bm(e,t,n){e instanceof Gm?function(e,t,n){var r=e.value.clone(),i=$m(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Hm?function(e,t,n){if(jm(e.precondition,t)){var r=$m(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Qm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function zm(e,t,n){e instanceof Gm?function(e,t,n){if(jm(e.precondition,t)){var r=e.value.clone(),i=Ym(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Wm(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Hm?function(e,t,n){if(jm(e.precondition,t)){var r=Ym(e.fieldTransforms,n,t),i=t.data;i.setAll(Qm(e)),i.setAll(r),t.convertToFoundDocument(Wm(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){jm(e.precondition,t)&&t.convertToNoDocument(Ap.min())}(e,t)}function qm(e,t){var n,r=null,i=re(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Cm(a.transform,o||null);null!=u&&(null==r&&(r=bv.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Km(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Tp(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Am&&t instanceof Am||e instanceof Rm&&t instanceof Rm?Tp(e.elements,t.elements,nv):e instanceof Om&&t instanceof Om?nv(e.k,t.k):e instanceof Nm&&t instanceof Nm}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Wm(e){return e.isFoundDocument()?e.version:Ap.min()}var Gm=function(e){oe(n,e);var t=fe(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return ee(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return(0,te.Z)(n)}(Zm),Hm=function(e){oe(n,e);var t=fe(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return ee(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return(0,te.Z)(n)}(Zm);function Qm(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function $m(e,t,n){var r=new Map;lp(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Tm(o,u,n[i]))}return r}function Ym(e,t,n){var r,i=new Map,a=re(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Em(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Xm,Jm,ey=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return(0,te.Z)(n)}(Zm),ty=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return(0,te.Z)(n)}(Zm),ny=(0,te.Z)((function e(t){ee(this,e),this.count=t}));function ry(e){switch(e){default:return cp();case hp.CANCELLED:case hp.UNKNOWN:case hp.DEADLINE_EXCEEDED:case hp.RESOURCE_EXHAUSTED:case hp.INTERNAL:case hp.UNAVAILABLE:case hp.UNAUTHENTICATED:return!1;case hp.INVALID_ARGUMENT:case hp.NOT_FOUND:case hp.ALREADY_EXISTS:case hp.PERMISSION_DENIED:case hp.FAILED_PRECONDITION:case hp.ABORTED:case hp.OUT_OF_RANGE:case hp.UNIMPLEMENTED:case hp.DATA_LOSS:return!0}}function iy(e){if(void 0===e)return op("GRPC error has no .code"),hp.UNKNOWN;switch(e){case Xm.OK:return hp.OK;case Xm.CANCELLED:return hp.CANCELLED;case Xm.UNKNOWN:return hp.UNKNOWN;case Xm.DEADLINE_EXCEEDED:return hp.DEADLINE_EXCEEDED;case Xm.RESOURCE_EXHAUSTED:return hp.RESOURCE_EXHAUSTED;case Xm.INTERNAL:return hp.INTERNAL;case Xm.UNAVAILABLE:return hp.UNAVAILABLE;case Xm.UNAUTHENTICATED:return hp.UNAUTHENTICATED;case Xm.INVALID_ARGUMENT:return hp.INVALID_ARGUMENT;case Xm.NOT_FOUND:return hp.NOT_FOUND;case Xm.ALREADY_EXISTS:return hp.ALREADY_EXISTS;case Xm.PERMISSION_DENIED:return hp.PERMISSION_DENIED;case Xm.FAILED_PRECONDITION:return hp.FAILED_PRECONDITION;case Xm.ABORTED:return hp.ABORTED;case Xm.OUT_OF_RANGE:return hp.OUT_OF_RANGE;case Xm.UNIMPLEMENTED:return hp.UNIMPLEMENTED;case Xm.DATA_LOSS:return hp.DATA_LOSS;default:return cp()}}(Jm=Xm||(Xm={}))[Jm.OK=0]="OK",Jm[Jm.CANCELLED=1]="CANCELLED",Jm[Jm.UNKNOWN=2]="UNKNOWN",Jm[Jm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jm[Jm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jm[Jm.NOT_FOUND=5]="NOT_FOUND",Jm[Jm.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jm[Jm.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jm[Jm.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jm[Jm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jm[Jm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jm[Jm.ABORTED=10]="ABORTED",Jm[Jm.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jm[Jm.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jm[Jm.INTERNAL=13]="INTERNAL",Jm[Jm.UNAVAILABLE=14]="UNAVAILABLE",Jm[Jm.DATA_LOSS=15]="DATA_LOSS";var ay=function(){function e(t,n){ee(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return(0,te.Z)(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=re(n);try{for(i.s();!(r=i.n()).done;){var o=(0,a.Z)(r.value,2),u=o[0],s=o[1];if(this.equalsFn(u,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Rp(this.inner,(function(t,n){var r,i=re(n);try{for(i.s();!(r=i.n()).done;){var o=(0,a.Z)(r.value,2),u=o[0],s=o[1];e(u,s)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Dp(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),oy=new Rv(Xp.comparator);function uy(){return oy}var sy=new Rv(Xp.comparator);function cy(){for(var e=sy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function ly(){return new ay((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var fy=new Rv(Xp.comparator),hy=new Lv(Xp.comparator);function dy(){for(var e=hy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var py=new Lv(Ep);function vy(){return py}var my=function(){function e(t,n,r,i,a){ee(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return(0,te.Z)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,yy.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ap.min(),r,vy(),uy(),dy())}}]),e}(),yy=function(){function e(t,n,r,i,a){ee(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return(0,te.Z)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Vp.EMPTY_BYTE_STRING,n,dy(),dy(),dy())}}]),e}(),gy=(0,te.Z)((function e(t,n,r,i){ee(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),ky=(0,te.Z)((function e(t,n){ee(this,e),this.targetId=t,this.$=n})),by=(0,te.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ee(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),wy=function(){function e(){ee(this,e),this.B=0,this.L=Sy(),this.U=Vp.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return(0,te.Z)(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=dy(),t=dy(),n=dy();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:cp()}})),new yy(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Sy()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),xy=function(){function e(t){ee(this,e),this.nt=t,this.st=new Map,this.it=uy(),this.rt=_y(),this.ot=new Lv(Ep)}return(0,te.Z)(e,[{key:"ut",value:function(e){var t,n=re(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=re(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:cp()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Bv(i))if(0===n){var a=new Xp(i.path);this.ct(t,a,xv.newNoDocument(a,Ap.min()))}else lp(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Bv(a.target)){var o=new Xp(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,xv.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=dy();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new my(e,n,this.ot,this.it,r);return this.it=uy(),this.rt=_y(),this.ot=new Lv(Ep),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new wy,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Lv(Ep),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||ap("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new wy),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function _y(){return new Rv(Xp.comparator)}function Sy(){return new Rv(Xp.comparator)}var Iy={asc:"ASCENDING",desc:"DESCENDING"},Ey={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ty=(0,te.Z)((function e(t,n){ee(this,e),this.databaseId=t,this.N=n}));function Cy(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ny(e,t){return e.N?t.toBase64():t.toUint8Array()}function Ay(e,t){return Cy(e,t.toTimestamp())}function Py(e){return lp(!!e),Ap.fromTimestamp(function(e){var t=Zp(e);return new Np(t.seconds,t.nanos)}(e))}function Ry(e,t){return function(e){return new Lp(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Dy(e){var t=Lp.fromString(e);return lp(ng(t)),t}function Oy(e,t){return Ry(e.databaseId,t.path)}function Ly(e,t){var n=Dy(t);if(n.get(1)!==e.databaseId.projectId)throw new dp(hp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new dp(hp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Xp(Vy(n))}function My(e,t){return Ry(e.databaseId,t)}function Fy(e){var t=Dy(e);return 4===t.length?Lp.emptyPath():Vy(t)}function Uy(e){return new Lp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Vy(e){return lp(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function jy(e,t,n){return{name:Oy(e,t),fields:n.value.mapValue.fields}}function Zy(e,t,n){var r=Ly(e,t.name),i=Py(t.updateTime),a=new bv({mapValue:{fields:t.fields}}),o=xv.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function By(e,t){return"found"in t?function(e,t){lp(!!t.found),t.found.name,t.found.updateTime;var n=Ly(e,t.found.name),r=Py(t.found.updateTime),i=new bv({mapValue:{fields:t.found.fields}});return xv.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){lp(!!t.missing),lp(!!t.readTime);var n=Ly(e,t.missing),r=Py(t.readTime);return xv.newNoDocument(n,r)}(e,t):cp()}function zy(e,t){var n;if(t instanceof Gm)n={update:jy(e,t.key,t.value)};else if(t instanceof ey)n={delete:Oy(e,t.key)};else if(t instanceof Hm)n={update:jy(e,t.key,t.data),updateMask:tg(t.fieldMask)};else{if(!(t instanceof ty))return cp();n={verify:Oy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Nm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Am)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Rm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Om)return{fieldPath:t.field.canonicalString(),increment:n.k};throw cp()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ay(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:cp()}(e,t.precondition)),n}function qy(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Vm.updateTime(Py(e.updateTime)):void 0!==e.exists?Vm.exists(e.exists):Vm.none()}(t.currentDocument):Vm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)lp("REQUEST_TIME"===t.setToServerValue),n=new Nm;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Am(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Rm(i)}else"increment"in t?n=new Om(e,t.increment):cp();var a=Fp.fromServerFormat(t.fieldPath);return new Fm(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Ly(e,t.update.name),a=new bv({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Up(t.map((function(e){return Fp.fromServerFormat(e)})))}(t.updateMask);return new Hm(i,a,o,n,r)}return new Gm(i,a,n,r)}if(t.delete){var u=Ly(e,t.delete);return new ey(u,n)}if(t.verify){var s=Ly(e,t.verify);return new ty(s,n)}return cp()}function Ky(e,t){return{documents:[My(e,t.path)]}}function Wy(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=My(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=My(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(hv(e.value))return{unaryFilter:{field:Yy(e.field),op:"IS_NAN"}};if(fv(e.value))return{unaryFilter:{field:Yy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(hv(e.value))return{unaryFilter:{field:Yy(e.field),op:"IS_NOT_NAN"}};if(fv(e.value))return{unaryFilter:{field:Yy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yy(e.field),op:$y(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Yy(e.field),direction:Qy(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||Qp(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Gy(e){var t=Fy(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){lp(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Hy(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new nm(Xy(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Qp(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new tm(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new tm(n,t)}(n.endAt)),um(t,i,u,o,s,"F",c,l)}function Hy(e){return e?void 0!==e.unaryFilter?[eg(e)]:void 0!==e.fieldFilter?[Jy(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Hy(e)})).reduce((function(e,t){return e.concat(t)})):cp():[]}function Qy(e){return Iy[e]}function $y(e){return Ey[e]}function Yy(e){return{fieldPath:e.canonicalString()}}function Xy(e){return Fp.fromServerFormat(e.fieldPath)}function Jy(e){return Wv.create(Xy(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return cp()}}(e.fieldFilter.op),e.fieldFilter.value)}function eg(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Xy(e.unaryFilter.field);return Wv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Xy(e.unaryFilter.field);return Wv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Xy(e.unaryFilter.field);return Wv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Xy(e.unaryFilter.field);return Wv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return cp()}}function tg(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function ng(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function rg(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ag(t)),t=ig(e.get(n),t);return ag(t)}function ig(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function ag(e){return e+"\x01\x01"}function og(e){var t=e.length;if(lp(t>=2),2===t)return lp("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Lp.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&cp(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:cp()}a=o+2}return new Lp(r)}var ug=["userId","batchId"];function sg(e,t){return[e,rg(t)]}function cg(e,t,n){return[e,rg(t),n]}var lg={},fg=["prefixPath","collectionGroup","readTime","documentId"],hg=["prefixPath","collectionGroup","documentId"],dg=["collectionGroup","readTime","prefixPath","documentId"],pg=["canonicalId","targetId"],vg=["targetId","path"],mg=["path","targetId"],yg=["collectionId","parent"],gg=["indexId","uid"],kg=["uid","sequenceNumber"],bg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wg=["indexId","uid","orderedDocumentKey"],xg=["userId","collectionPath","documentId"],_g=["userId","collectionPath","largestBatchId"],Sg=["userId","collectionGroup","largestBatchId"],Ig=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Eg=[].concat((0,Be.Z)(Ig),["documentOverlays"]),Tg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Cg=[].concat(Tg,["indexConfiguration","indexState","indexEntries"]),Ng="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ag=function(){function e(){ee(this,e),this.onCommittedListeners=[]}return(0,te.Z)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Pg=function(){function e(t){var n=this;ee(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return(0,te.Z)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&cp(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=re(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Rg=function(){function e(t,n){var r=this;ee(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new pp,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Lg(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=jg(e.target.error);r.At.reject(new Lg(t,n))}}return(0,te.Z)(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(ap("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Fg(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Lg(n,t)}}}]),e}(),Dg=function(){function e(t,n,r){ee(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(we())&&op("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return(0,te.Z)(e,[{key:"Nt",value:function(){var e=qe(We().mark((function e(t){var n=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ap("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Lg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new dp(hp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new dp(hp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Lg(t,n))},i.onupgradeneeded=function(e){ap("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){ap("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=qe(We().mark((function e(t,n,r,i){var a,o,u,s,c=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(We().mark((function e(){var n,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=Rg.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),Pg.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,ap("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ap("SimpleDb","Removing database:",e),Ug(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Te())return!1;if(e.St())return!0;var t=we(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Og=function(){function e(t){ee(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return(0,te.Z)(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Ug(this.Ft.delete())}}]),e}(),Lg=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this,hp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return(0,te.Z)(n)}(dp);function Mg(e){return"IndexedDbTransactionError"===e.name}var Fg=function(){function e(t){ee(this,e),this.store=t}return(0,te.Z)(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ap("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ap("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ug(n)}},{key:"add",value:function(e){return ap("SimpleDb","ADD",this.store.name,e,e),Ug(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ug(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ap("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ap("SimpleDb","DELETE",this.store.name,e),Ug(this.store.delete(e))}},{key:"count",value:function(){return ap("SimpleDb","COUNT",this.store.name),Ug(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Pg((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Pg((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){ap("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Pg((function(n,r){t.onerror=function(e){var t=jg(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Pg((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Og(i),o=t(i.primaryKey,i.value,a);if(o instanceof Pg){var u=o.catch((function(e){return a.done(),Pg.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Pg.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Ug(e){return new Pg((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=jg(e.target.error);n(t)}}))}var Vg=!1;function jg(e){var t=Dg.Vt(we());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new dp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Vg||(Vg=!0,setTimeout((function(){throw r}),0)),r}}return e}var Zg=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return(0,te.Z)(n)}(Ag);function Bg(e,t){var n=fp(e);return Dg.xt(n.Ht,t)}var zg=function(){function e(t,n,r,i){ee(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return(0,te.Z)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Bm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=re(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&zm(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=re(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&zm(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ap.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),dy())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Tp(this.mutations,e.mutations,(function(e,t){return Km(e,t)}))&&Tp(this.baseMutations,e.baseMutations,(function(e,t){return Km(e,t)}))}}]),e}(),qg=function(){function e(t,n,r,i){ee(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return(0,te.Z)(e,null,[{key:"from",value:function(t,n,r){lp(t.mutations.length===r.length);for(var i=fy,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Kg=function(){function e(t,n){ee(this,e),this.largestBatchId=t,this.mutation=n}return(0,te.Z)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Wg=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ap.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ap.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Vp.EMPTY_BYTE_STRING;ee(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return(0,te.Z)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Gg=(0,te.Z)((function e(t){ee(this,e),this.Jt=t}));function Hg(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Qg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Oy(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Cy(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:$g(t.version)};else{if(!t.isUnknownDocument())return cp();r.unknownDocument={path:n.path.toArray(),version:$g(t.version)}}return r}function Qg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function $g(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Yg(e){var t=new Np(e.seconds,e.nanoseconds);return Ap.fromTimestamp(t)}function Xg(e,t){for(var n=(t.baseMutations||[]).map((function(t){return qy(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return qy(e.Jt,t)})),u=Np.fromMillis(t.localWriteTimeMs);return new zg(t.batchId,u,n,o)}function Jg(e){var t,n,r=Yg(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Yg(e.lastLimboFreeSnapshotVersion):Ap.min();return void 0!==e.query.documents?(lp(1===(n=e.query).documents.length),t=dm(sm(Fy(n.documents[0])))):t=function(e){return dm(Gy(e))}(e.query),new Wg(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Vp.fromBase64String(e.resumeToken))}function ek(e,t){var n,r=$g(t.snapshotVersion),i=$g(t.lastLimboFreeSnapshotVersion);n=Bv(t.target)?Ky(e.Jt,t.target):Wy(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:jv(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function tk(e){var t=Gy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?pm(t,t.limit,"L"):t}function nk(e,t){return new Kg(t.largestBatchId,qy(e.Jt,t.overlayMutation))}function rk(e,t){var n=t.path.lastSegment();return[e,rg(t.path.popLast()),n]}var ik=function(){function e(){ee(this,e)}return(0,te.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return ak(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Yg(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return ak(e).put({bundleId:(n=t).id,createTime:$g(Py(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return ok(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:tk(t.bundledQuery),readTime:Yg(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return ok(e).put(function(e){return{name:e.name,readTime:$g(Py(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function ak(e){return Bg(e,"bundles")}function ok(e){return Bg(e,"namedQueries")}var uk=function(){function e(t,n){ee(this,e),this.M=t,this.userId=n}return(0,te.Z)(e,[{key:"getOverlay",value:function(e,t){var n=this;return sk(e).get(rk(this.userId,t)).next((function(e){return e?nk(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Kg(t,a);i.push(r.Xt(e,o))})),Pg.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(rg(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(sk(e).Qt("collectionPathOverlayIndex",i))})),Pg.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=ly(),a=rg(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return sk(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=re(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=nk(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=ly(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sk(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=nk(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return sk(e).put(function(e,t,n){var r=rk(t,n.mutation.key),i=(0,a.Z)(r,3);i[0];return{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:zy(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function sk(e){return Bg(e,"documentOverlays")}var ck=function(){function e(){ee(this,e)}return(0,te.Z)(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Bp(e.integerValue));else if("doubleValue"in e){var n=Bp(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),$p(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(zp(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?vv(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):cp()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=re(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Xp.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function lk(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function fk(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=lk(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ck.fe=new ck;var hk=function(){function e(){ee(this,e),this.buffer=new Uint8Array(1024),this.position=0}return(0,te.Z)(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=re(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=re(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=fk(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=fk(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),dk=function(){function e(t){ee(this,e),this.De=t}return(0,te.Z)(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),pk=function(){function e(t){ee(this,e),this.De=t}return(0,te.Z)(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),vk=function(){function e(){ee(this,e),this.De=new hk,this.Ce=new dk(this.De),this.xe=new pk(this.De)}return(0,te.Z)(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),mk=function(){function e(t,n,r,i){ee(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return(0,te.Z)(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function yk(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=gk(e.arrayValue,t.arrayValue))?n:0!==(n=gk(e.directionalValue,t.directionalValue))?n:Xp.comparator(e.documentKey,t.documentKey)}function gk(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var kk=function(){function e(t){ee(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=re(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return(0,te.Z)(e,[{key:"$e",value:function(e){var t=Sv(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Iv(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=re(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),bk=function(){function e(){ee(this,e),this.qe=new wk}return(0,te.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Pg.resolve()}},{key:"getCollectionParents",value:function(e,t){return Pg.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Pg.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Pg.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Pg.resolve(null)}},{key:"getIndexType",value:function(e,t){return Pg.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Pg.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Pg.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Pg.resolve(Av.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Pg.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Pg.resolve()}}]),e}(),wk=function(){function e(){ee(this,e),this.index={}}return(0,te.Z)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Lv(Lp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Lv(Lp.comparator)).toArray()}}]),e}(),xk=new Uint8Array(0),_k=function(){function e(t,n){ee(this,e),this.user=t,this.databaseId=n,this.Ke=new wk,this.Ge=new ay((function(e){return jv(e)}),(function(e,t){return Zv(e,t)})),this.uid=t.uid||""}return(0,te.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:rg(i)};return Sk(e).put(a)}return Pg.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Cp(t),""],!1,!0);return Sk(e).qt(r).next((function(e){var r,i=re(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(og(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Ek(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Ek(e),r=Tk(e),i=Ik(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Ik(e),i=!0,a=new Map;return Pg.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=dy(),o=[];return Pg.forEach(a,(function(i,a){var u;ap("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(jv(t)));var s=function(e,t){var n=Sv(t);if(void 0===n)return null;var r,i=re(zv(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=re(Iv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=re(zv(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=re(Iv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?qv(e,o.fieldPath,e.startAt):Kv(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new tm(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=re(Iv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Kv(e,o.fieldPath,e.endAt):qv(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new tm(r,i)}(a,i),h=n.We(i,a,l),d=n.We(i,a,f),p=n.ze(i,a,c),v=n.He(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Pg.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=Xp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Pg.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.Je(t[s/c]):xk,h=u.Ye(e,f,n[s%c],r),d=u.Xe(e,f,i[s%c],a),p=o.map((function(t){return u.Ye(e,f,t,!0)}));l.push.apply(l,(0,Be.Z)(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"Ye",value:function(e,t,n,r){var i=new mk(e,Xp.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new mk(e,Xp.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new kk(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=re(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Pg.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Lv(Fp.comparator),r=!1,i=re(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=re(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new vk,i=re(Iv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);ck.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new vk;return ck.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new vk;return ck.fe.Zt(sv(this.databaseId,t),n.Ne(function(e){var t=Iv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new vk);var i,a=0,o=re(Iv(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=re(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&lv(c))r=this.nn(r,s,c);else{var h=f.Ne(s.kind);ck.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=(0,Be.Z)(e),a=[],o=re(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=re(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new vk;f.seed(l.Se()),ck.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Wv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Ek(e),i=Tk(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Pg.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Tv(t.sequenceNumber,new Av(Yg(t.readTime),new Xp(og(t.documentKey)),t.largestBatchId)):Tv.empty(),r=e.fields.map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return new Ev(Fp.fromServerFormat(n),r)}));return new _v(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ep(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Ek(e),a=Tk(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Pg.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:$g(r.readTime),documentKey:rg(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Pg.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Pg.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Pg.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?Pg.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return Ik(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return Ik(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=Ik(e),i=new Lv(yk);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new mk(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new Lv(yk),r=this.Ze(t,e);if(null==r)return n;var i=Sv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(lv(a)){var o,u=re(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new mk(t.indexId,e.key,this.Je(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new mk(t.indexId,e.key,xk,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;ap("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Fv(a),s=Fv(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Fv(o)):l?(i(u),u=Fv(a)):(u=Fv(a),s=Fv(o))}}(r,i,yk,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),Pg.waitFor(o)}},{key:"rn",value:function(e){var t=1;return Tk(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return yk(e,t)})).filter((function(e,t,n){return!t||0!==yk(e,n[t-1])}));var r=[];r.push(e);var i,a=re(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=yk(o,e),s=yk(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,xk,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,xk,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return Pg.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||Pv(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=Av.min()}))})).next((function(){return n}))}}]),e}();function Sk(e){return Bg(e,"collectionParents")}function Ik(e){return Bg(e,"indexEntries")}function Ek(e){return Bg(e,"indexConfiguration")}function Tk(e){return Bg(e,"indexState")}var Ck={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nk=function(){function e(t,n,r){ee(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return(0,te.Z)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ak(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){lp(1===u)})));var c,l=[],f=re(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=cg(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Pg.waitFor(a).next((function(){return l}))}function Pk(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw cp();t=e.noDocument}return JSON.stringify(t).length}Nk.DEFAULT_COLLECTION_PERCENTILE=10,Nk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nk.DEFAULT=new Nk(41943040,Nk.DEFAULT_COLLECTION_PERCENTILE,Nk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nk.DISABLED=new Nk(-1,0,0);var Rk=function(){function e(t,n,r,i){ee(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return(0,te.Z)(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ok(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Lk(e),o=Ok(e);return o.add({}).next((function(u){lp("number"==typeof u);var s,c=new zg(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return zy(e.Jt,t)})),i=n.mutations.map((function(t){return zy(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new Lv((function(e,t){return Ep(e.canonicalString(),t.canonicalString())})),d=re(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=cg(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,lg))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),Pg.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Ok(e).get(t).next((function(e){return e?(lp(e.userId===n.userId),Xg(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?Pg.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Ok(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(lp(t.batchId>=r),a=Xg(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ok(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ok(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return Xg(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=sg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Lk(e).Wt({range:i},(function(r,i,u){var s=(0,a.Z)(r,3),c=s[0],l=s[1],f=s[2],h=og(l);if(c===n.userId&&t.path.isEqual(h))return Ok(e).get(f).next((function(e){if(!e)throw cp();lp(e.userId===n.userId),o.push(Xg(n.M,e))}));u.done()})).next((function(){return o}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Lv(Ep),i=[];return t.forEach((function(t){var o=sg(n.userId,t.path),u=IDBKeyRange.lowerBound(o),s=Lk(e).Wt({range:u},(function(e,i,o){var u=(0,a.Z)(e,3),s=u[0],c=u[1],l=u[2],f=og(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):o.done()}));i.push(s)})),Pg.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,o=sg(this.userId,r),u=IDBKeyRange.lowerBound(o),s=new Lv(Ep);return Lk(e).Wt({range:u},(function(e,t,o){var u=(0,a.Z)(e,3),c=u[0],l=u[1],f=u[2],h=og(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):o.done()})).next((function(){return n.dn(e,s)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Ok(e).get(t).next((function(e){if(null===e)throw cp();lp(e.userId===n.userId),r.push(Xg(n.M,e))})))})),Pg.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ak(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),Pg.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Pg.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Lk(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=og(e[1]);i.push(a)}else r.done()})).next((function(){lp(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Dk(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return Mk(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return lp(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Dk(e,t,n){var r=sg(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),u=!1;return Lk(e).Wt({range:o,jt:!0},(function(e,n,r){var o=(0,a.Z)(e,3),s=o[0],c=o[1];o[2];s===t&&c===i&&(u=!0),r.done()})).next((function(){return u}))}function Ok(e){return Bg(e,"mutations")}function Lk(e){return Bg(e,"documentMutations")}function Mk(e){return Bg(e,"mutationQueues")}var Fk=function(){function e(t){ee(this,e),this.mn=t}return(0,te.Z)(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),Uk=function(){function e(t,n){ee(this,e),this.referenceDelegate=t,this.M=n}return(0,te.Z)(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new Fk(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return Ap.fromTimestamp(new Np(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Vk(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return lp(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Vk(e).Wt((function(o,u){var s=Jg(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Pg.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Vk(e).Wt((function(e,n){var r=Jg(n);t(r)}))}},{key:"pn",value:function(e){return jk(e).get("targetGlobalKey").next((function(e){return lp(null!==e),e}))}},{key:"In",value:function(e,t){return jk(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Vk(e).put(ek(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=jv(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Vk(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Jg(n);Zv(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Zk(e);return t.forEach((function(t){var o=rg(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Pg.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Zk(e);return Pg.forEach(t,(function(t){var a=rg(t.path);return Pg.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Zk(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Zk(e),i=dy();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=og(e[1]),a=new Xp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=rg(t.path),r=IDBKeyRange.bound([n],[Cp(n)],!1,!0),i=0;return Zk(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=(0,a.Z)(e,2),o=r[0];r[1];0!==o&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Vk(e).get(t).next((function(e){return e?Jg(e):null}))}}]),e}();function Vk(e){return Bg(e,"targets")}function jk(e){return Bg(e,"targetGlobal")}function Zk(e){return Bg(e,"targetDocuments")}function Bk(e){return zk.apply(this,arguments)}function zk(){return zk=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===hp.FAILED_PRECONDITION&&t.message===Ng){e.next=2;break}throw t;case 2:ap("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),zk.apply(this,arguments)}function qk(e,t){var n=(0,a.Z)(e,2),r=n[0],i=n[1],o=(0,a.Z)(t,2),u=o[0],s=o[1],c=Ep(r,u);return 0===c?Ep(i,s):c}var Kk=function(){function e(t){ee(this,e),this.An=t,this.buffer=new Lv(qk),this.Rn=0}return(0,te.Z)(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();qk(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Wk=function(){function e(t,n){ee(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return(0,te.Z)(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;ap("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,qe(We().mark((function n(){return We().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Mg(n.t0)){n.next=12;break}ap("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Bk(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Gk=function(){function e(t,n){ee(this,e),this.Dn=t,this.params=n}return(0,te.Z)(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Pg.resolve(_p.A);var r=new Kk(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ap("LruGarbageCollector","Garbage collection skipped; disabled"),Pg.resolve(Ck)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ap("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Ck):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ap("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),ip()<=Ye.DEBUG&&ap("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Pg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Hk=function(){function e(t,n){ee(this,e),this.db=t,this.garbageCollector=function(e,t){return new Gk(e,t)}(this,n)}return(0,te.Z)(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Qk(e,n)}},{key:"removeReference",value:function(e,t,n){return Qk(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Qk(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return Mk(e).zt((function(r){return Dk(e,r,t).next((function(e){return e&&(n=!0),Pg.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Ap.min()),Zk(e).delete([0,rg(o.path)])}))}));i.push(s)}})).next((function(){return Pg.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Qk(e,t)}},{key:"Mn",value:function(e,t){var n,r=Zk(e),i=_p.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var o=(0,a.Z)(e,2),u=o[0],s=(o[1],r.path),c=r.sequenceNumber;0===u?(i!==_p.A&&t(new Xp(og(n)),i),i=c,n=s):i=_p.A})).next((function(){i!==_p.A&&t(new Xp(og(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Qk(e,t){return Zk(e).put(function(e,t){return{targetId:0,path:rg(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var $k=function(){function e(){ee(this,e),this.changes=new ay((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return(0,te.Z)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,xv.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Pg.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Yk=function(){function e(t){ee(this,e),this.M=t}return(0,te.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return eb(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return eb(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Qg(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=xv.newInvalidDocument(t);return eb(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(tb(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:xv.newInvalidDocument(t)};return eb(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(tb(t))},(function(e,i){r={document:n.$n(t,i),size:Pk(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=uy();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=uy(),i=new Rv(Xp.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,Pk(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return Pg.resolve();var r=new Lv(rb);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(tb(r.first()),tb(r.last())),a=r.getIterator(),o=a.getNext();return eb(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Xp.fromSegments([].concat((0,Be.Z)(t.prefixPath),[t.collectionGroup,t.documentId]));o&&rb(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(tb(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Qg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return eb(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=uy(),i=re(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(Xp.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=uy(),o=nb(t,n),u=nb(t,Av.max());return eb(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(Xp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Xk(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Jk(e).get("remoteDocumentGlobalKey").next((function(e){return lp(!!e),e}))}},{key:"Fn",value:function(e,t){return Jk(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Zy(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Xp.fromSegments(t.noDocument.path),i=Yg(t.noDocument.readTime);n=xv.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return cp();var a=Xp.fromSegments(t.unknownDocument.path),o=Yg(t.unknownDocument.version);n=xv.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Np(e[0],e[1]);return Ap.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Ap.min()))return n}return xv.newInvalidDocument(e)}}]),e}(),Xk=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new ay((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return(0,te.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Lv((function(e,t){return Ep(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Hg(t.Kn.M,o);i=i.add(a.path.popLast());var c=Pk(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Hg(t.Kn.M,o.convertToNoDocument(Ap.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),Pg.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}($k);function Jk(e){return Bg(e,"remoteDocumentGlobal")}function eb(e){return Bg(e,"remoteDocumentsV14")}function tb(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function nb(e,t){var n=t.documentKey.path.toArray();return[e,Qg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function rb(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Ep(n[a],r[a]))return i;return(i=Ep(n.length,r.length))||((i=Ep(n[n.length-2],r[r.length-2]))||Ep(n[n.length-1],r[r.length-1]))}var ib=function(){function e(t){ee(this,e),this.M=t}return(0,te.Z)(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Rg("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ug,{unique:!0}),e.createObjectStore("documentMutations")}(e),ab(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Pg.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),ab(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ap.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ug,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Pg.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:xg});t.createIndex("collectionPathOverlayIndex",_g,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Sg,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:fg});t.createIndex("documentKeyIndex",hg),t.createIndex("collectionGroupIndex",dg)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:gg}).createIndex("sequenceNumberIndex",kg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:bg}).createIndex("documentKeyIndex",wg,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=Pk(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return Pg.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return Pg.forEach(r,(function(r){lp(r.userId===n.userId);var i=Xg(t.M,r);return Ak(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Lp(n),o=function(e){return[0,rg(e)]}(a);r.push(t.get(o).next((function(n){return n?Pg.resolve():function(n){return t.put({targetId:0,path:rg(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Pg.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:yg});var n=t.store("collectionParents"),r=new wk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:rg(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Lp(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=(0,a.Z)(e,3),r=(n[0],n[1]),o=(n[2],og(r));return i(o.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=Jg(r),a=ek(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Xp(Lp.fromString(i.document.name).popFirst(5)):i.noDocument?Xp.fromSegments(i.noDocument.path):i.unknownDocument?Xp.fromSegments(i.unknownDocument.path):cp()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Pg.waitFor(r)}))}}]),e}();function ab(e){e.createObjectStore("targetDocuments",{keyPath:vg}).createIndex("documentTargetsIndex",mg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pg,{unique:!0}),e.createObjectStore("targetGlobal")}var ob="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ub=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(ee(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new dp(hp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hk(this,i),this.hs=n+"main",this.M=new Gg(s),this.ls=new Dg(this.hs,this.ts,new ib(this.M)),this.fs=new Uk(this.referenceDelegate,this.M),this.ds=function(e){return new Yk(e)}(this.M),this._s=new ik,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&op("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return(0,te.Z)(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new dp(hp.FAILED_PRECONDITION,ob);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new _p(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=qe(We().mark((function n(r){return We().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=qe(We().mark((function t(n){return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return cb(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(Mg(t))return ap("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ap("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return sb(e).get("owner").next((function(e){return Pg.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return cb(e).delete(this.clientId)}},{key:"vs",value:function(){var e=qe(We().mark((function e(){var t,n,r,i,a=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Bg(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Pg.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=re(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?Pg.resolve(!0):sb(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new dp(hp.FAILED_PRECONDITION,ob);return!1}}return!(!t.networkEnabled||!t.inForeground)||cb(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ap("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=qe(We().mark((function e(){var t=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Zg(e,_p.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return cb(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Rk.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new _k(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return uk.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;ap("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?Cg:13===i?Tg:12===i?Eg:11===i?Ig:void cp();return this.ls.runTransaction(e,o,u,(function(i){return a=new Zg(i,r.es?r.es.next():_p.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw op("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new dp(hp.FAILED_PRECONDITION,Ng);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return sb(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new dp(hp.FAILED_PRECONDITION,ob)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sb(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=sb(e);return n.get("owner").next((function(e){return t.Ps(e)?(ap("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Pg.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(op("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ap("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return op("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(el){op("Failed to set zombie client id.",el)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(el){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Dg.vt()}}]),e}();function sb(e){return Bg(e,"owner")}function cb(e){return Bg(e,"clientMetadata")}function lb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var fb=function(){function e(t,n,r){ee(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return(0,te.Z)(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=re(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=re(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return Xp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):fm(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new Xp(t)).next((function(e){var t=cy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=cy();return this.indexManager.getCollectionParents(e,i).next((function(o){return Pg.forEach(o,(function(o){var u=function(e,t){return new om(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=re(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=re(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=xv.newInvalidDocument(s),r=r.insert(s,c)),zm(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){gm(t,n)||(r=r.remove(e))})),r}))}}]),e}(),hb=function(){function e(t,n,r,i){ee(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return(0,te.Z)(e,null,[{key:"Ys",value:function(t,n){var r,i=dy(),a=dy(),o=re(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),db=function(){function e(){ee(this,e),this.Xs=!1}return(0,te.Z)(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return Pg.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Ap.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(ip()<=Ye.DEBUG&&ap("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ym(t)),i.ri(e,o,t,Cv(r,-1)))}))}},{key:"si",value:function(e,t){var n=new Lv(bm(e));return t.forEach((function(t,r){gm(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return ip()<=Ye.DEBUG&&ap("QueryEngine","Using full collection scan to execute query:",ym(t)),this.Zs.Qs(e,t,Av.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),pb=function(){function e(t,n,r,i){ee(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new Rv(Ep),this.ai=new ay((function(e){return jv(e)}),Zv),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return(0,te.Z)(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new fb(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function vb(e,t,n,r){return new pb(e,t,n,r)}function mb(e,t){return yb.apply(this,arguments)}function yb(){return yb=qe(We().mark((function e(t,n){var r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=dy(),s=re(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=re(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=re(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=re(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.fi.Ks(e,u).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),yb.apply(this,arguments)}function gb(e,t){var n=fp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Pg.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);lp(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}function kb(e){var t=fp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function bb(e,t){var n=fp(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Vp.EMPTY_BYTE_STRING,Ap.min()).withLastLimboFreeSnapshotVersion(Ap.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=uy();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(wb(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Ap.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Pg.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ui=i,e}))}function wb(e,t,n){var r=dy();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=uy();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Ap.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):ap("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function xb(e,t){var n=fp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function _b(e,t){var n=fp(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,Pg.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new Wg(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function Sb(e,t,n){return Ib.apply(this,arguments)}function Ib(){return Ib=qe(We().mark((function e(t,n,r){var i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=fp(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Mg(e.t1)){e.next=12;break}throw e.t1;case 12:ap("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Ib.apply(this,arguments)}function Eb(e,t,n){var r=fp(e),i=Ap.min(),a=dy();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=fp(e),i=r.ai.get(n);return void 0!==i?Pg.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,dm(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:Ap.min(),n?a:dy())})).next((function(e){return Nb(r,km(t),e),{documents:e,_i:a}}))}))}function Tb(e,t){var n=fp(e),r=fp(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Cb(e,t){var n=fp(e),r=n.ci.get(t)||Ap.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,Cv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Nb(n,t,e),e}))}function Nb(e,t,n){var r=Ap.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function Ab(e,t,n,r){return Pb.apply(this,arguments)}function Pb(){return Pb=qe(We().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=fp(t),o=dy(),u=uy(),s=re(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.mi(l)).setReadTime(n.gi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,_b(a,function(e){return dm(sm(Lp.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return wb(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Pb.apply(this,arguments)}function Rb(e,t){return Db.apply(this,arguments)}function Db(){return Db=qe(We().mark((function e(t,n){var r,i,a,o=arguments;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:dy(),e.next=3,_b(t,dm(tk(n.bundledQuery)));case 3:return i=e.sent,a=fp(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Py(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Vp.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Db.apply(this,arguments)}var Ob=function(){function e(t){ee(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return(0,te.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return Pg.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:Py(n.createTime)}),Pg.resolve()}},{key:"getNamedQuery",value:function(e,t){return Pg.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:tk(e.bundledQuery),readTime:Py(e.readTime)}}(t)),Pg.resolve()}}]),e}(),Lb=function(){function e(){ee(this,e),this.overlays=new Rv(Xp.comparator),this.Ii=new Map}return(0,te.Z)(e,[{key:"getOverlay",value:function(e,t){return Pg.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),Pg.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),Pg.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=ly(),i=t.length+1,a=new Xp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Pg.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Rv((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=ly(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=ly(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Pg.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Kg(t,n));var a=this.Ii.get(t);void 0===a&&(a=dy(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),Mb=function(){function e(){ee(this,e),this.Ti=new Lv(Fb.Ei),this.Ai=new Lv(Fb.Ri)}return(0,te.Z)(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Fb(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new Fb(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new Xp(new Lp([])),r=new Fb(n,e),i=new Fb(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new Xp(new Lp([])),n=new Fb(t,e),r=new Fb(t,e+1),i=dy();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Fb(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Fb=function(){function e(t,n){ee(this,e),this.key=t,this.Ci=n}return(0,te.Z)(e,null,[{key:"Ei",value:function(e,t){return Xp.comparator(e.key,t.key)||Ep(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return Ep(e.Ci,t.Ci)||Xp.comparator(e.key,t.key)}}]),e}(),Ub=function(){function e(t,n){ee(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new Lv(Fb.Ei)}return(0,te.Z)(e,[{key:"checkEmpty",value:function(e){return Pg.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new zg(i,t,n,r);this.Bs.push(a);var o,u=re(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Ni=this.Ni.add(new Fb(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Pg.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Pg.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return Pg.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Pg.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return Pg.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Fb(t,0),i=new Fb(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),Pg.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Lv(Ep);return t.forEach((function(e){var t=new Fb(e,0),i=new Fb(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),Pg.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Xp.isDocumentKey(i)||(i=i.child(""));var a=new Fb(new Xp(i),0),o=new Lv(Ep);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),Pg.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;lp(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return Pg.forEach(t.mutations,(function(i){var a=new Fb(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Fb(t,0),r=this.Ni.firstAfterOrEqual(n);return Pg.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,Pg.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),Vb=function(){function e(t){ee(this,e),this.$i=t,this.docs=new Rv(Xp.comparator),this.size=0}return(0,te.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Pg.resolve(n?n.document.mutableCopy():xv.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=uy();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():xv.newInvalidDocument(e))})),Pg.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=uy(),i=new Xp(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Pv(Nv(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Pg.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){cp()}},{key:"Bi",value:function(e,t){return Pg.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new jb(this)}},{key:"getSize",value:function(e){return Pg.resolve(this.size)}}]),e}(),jb=function(e){oe(n,e);var t=fe(n);function n(e){var r;return ee(this,n),(r=t.call(this)).Kn=e,r}return(0,te.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),Pg.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}($k),Zb=function(){function e(t){ee(this,e),this.persistence=t,this.Li=new ay((function(e){return jv(e)}),Zv),this.lastRemoteSnapshotVersion=Ap.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Mb,this.targetCount=0,this.Ki=Fk.gn()}return(0,te.Z)(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),Pg.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Pg.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Pg.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),Pg.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),Pg.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new Fk(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,Pg.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),Pg.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Pg.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Pg.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Pg.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return Pg.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),Pg.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Pg.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),Pg.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return Pg.resolve(n)}},{key:"containsKey",value:function(e,t){return Pg.resolve(this.qi.containsKey(t))}}]),e}(),Bb=function(){function e(t,n){var r=this;ee(this,e),this.Gi={},this.overlays={},this.es=new _p(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Zb(this),this.indexManager=new bk,this.ds=new Vb((function(e){return r.referenceDelegate.Qi(e)})),this.M=new Gg(n),this._s=new Ob(this.M)}return(0,te.Z)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Lb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new Ub(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;ap("MemoryPersistence","Starting transaction:",e);var i=new zb(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return Pg.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),zb=function(e){oe(n,e);var t=fe(n);function n(e){var r;return ee(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return(0,te.Z)(n)}(Ag),qb=function(){function e(t){ee(this,e),this.persistence=t,this.Hi=new Mb,this.Ji=null}return(0,te.Z)(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw cp()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),Pg.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),Pg.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),Pg.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pg.forEach(this.Xi,(function(r){var i=Xp.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,Ap.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return Pg.or([function(){return Pg.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function Kb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Wb(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Gb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Hb=function(){function e(t,n,r,i){ee(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return(0,te.Z)(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new dp(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(op("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Qb=function(){function e(t,n,r){ee(this,e),this.targetId=t,this.state=n,this.error=r}return(0,te.Z)(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new dp(i.error.code,i.error.message))),a?new e(t,i.state,r):(op("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),$b=function(){function e(t,n){ee(this,e),this.clientId=t,this.activeTargetIds=n}return(0,te.Z)(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=vy(),o=0;i&&o<r.activeTargetIds.length;++o)i=Yp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(op("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Yb=function(){function e(t,n){ee(this,e),this.clientId=t,this.onlineState=n}return(0,te.Z)(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(op("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Xb=function(){function e(){ee(this,e),this.activeTargetIds=vy()}return(0,te.Z)(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Jb=function(){function e(t,n,r,i,a){ee(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Rv(Ep),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=Kb(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new Xb),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return(0,te.Z)(e,[{key:"start",value:function(){var e=qe(We().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=re(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Kb(this.persistenceKey,i)))&&(o=$b.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(u=this.storage.getItem(this.mr))&&(s=this.pr(u))&&this.Ir(s),c=re(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ur(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Gb(this.persistenceKey,e));if(n){var r=Qb.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Gb(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ap("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ap("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ap("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ap("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void op("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(qe(We().mark((function e(){var r,i,a,o,u,s,c;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(u));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}s=function(e){var t=_p.A;if(null!=e)try{var n=JSON.parse(e);lp("number"==typeof n),t=n}catch(e){op("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==_p.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new Hb(this.currentUser,e,t,n),i=Wb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=Wb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=Gb(this.persistenceKey,e),i=new Qb(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return $b.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Hb.tr(new tp(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return Qb.tr(r,t)}},{key:"pr",value:function(e){return Yb.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:ap("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Lr(o,u).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=vy();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ew=function(){function e(){ee(this,e),this.Ur=new Xb,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,te.Z)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new Xb,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),tw=function(){function e(){ee(this,e)}return(0,te.Z)(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),nw=function(){function e(){var t=this;ee(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return(0,te.Z)(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){ap("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=re(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){ap("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=re(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),rw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},iw=function(){function e(t){ee(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return(0,te.Z)(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),aw=function(e){oe(n,e);var t=fe(n);function n(e){var r;return ee(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return(0,te.Z)(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Jd;o.listenOnce(Hd.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Gd.NO_ERROR:var t=o.getResponseJson();ap("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Gd.TIMEOUT:ap("Connection",'RPC "'+e+'" timed out'),a(new dp(hp.DEADLINE_EXCEEDED,"Request time out"));break;case Gd.HTTP_ERROR:var n=o.getStatus();if(ap("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(hp).indexOf(t)>=0?t:hp.UNKNOWN}(r.status);a(new dp(u,r.message))}else a(new dp(hp.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new dp(hp.UNAVAILABLE,"Connection failed."));break;default:cp()}}finally{ap("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Kd(),a=Wd(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Yd({})),this.lo(o.initMessageHeaders,t,n),xe()||Ie()||we().indexOf("Electron/")>=0||Ee()||we().indexOf("MSAppHost/")>=0||Se()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");ap("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new iw({Jr:function(e){l?ap("Connection","Not sending because WebChannel is closed:",e):(c||(ap("Connection","Opening WebChannel transport."),s.open(),c=!0),ap("Connection","WebChannel sending:",e),s.send(e))},Yr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Xd.EventType.OPEN,(function(){l||ap("Connection","WebChannel transport opened.")})),h(s,Xd.EventType.CLOSE,(function(){l||(l=!0,ap("Connection","WebChannel transport closed"),f.ro())})),h(s,Xd.EventType.ERROR,(function(e){l||(l=!0,up("Connection","WebChannel transport errored:",e),f.ro(new dp(hp.UNAVAILABLE,"The operation could not be completed")))})),h(s,Xd.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];lp(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){ap("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Xm[e];if(void 0!==t)return iy(t)}(a),u=i.message;void 0===o&&(o=hp.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.ro(new dp(o,u)),s.close()}else ap("Connection","WebChannel received:",n),f.oo(n)}})),h(a,Qd.STAT_EVENT,(function(e){e.stat===$d.PROXY?ap("Connection","Detected buffering proxy"):e.stat===$d.NOPROXY&&ap("Connection","Detected no buffering proxy")})),setTimeout((function(){f.io()}),0),f}}]),n}(function(){function e(t){ee(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return(0,te.Z)(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);ap("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return ap("RestConnection","Received: ",e),e}),(function(t){throw up("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+np,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=rw[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function ow(){return"undefined"!=typeof window?window:null}function uw(){return"undefined"!=typeof document?document:null}function sw(e){return new Ty(e,!0)}var cw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;ee(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return(0,te.Z)(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&ap("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),lw=function(){function e(t,n,r,i,a,o,u,s){ee(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new cw(t,n)}return(0,te.Z)(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===hp.RESOURCE_EXHAUSTED?(op(n.toString()),op("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===hp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,a.Z)(t,2),i=r[0],o=r[1];e.Do===n&&e.Qo(i,o)}),(function(n){t((function(){var t=new dp(hp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(qe(We().mark((function t(){return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return ap("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(ap("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),fw=function(e){oe(n,e);var t=fe(n);function n(e,r,i,a,o,u){var s;return ee(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return(0,te.Z)(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:cp()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(lp(void 0===t||"string"==typeof t),Vp.fromBase64String(t||"")):(lp(void 0===t||t instanceof Uint8Array),Vp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?hp.UNKNOWN:iy(e.code);return new dp(t,e.message||"")}(o);n=new by(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Ly(e,s.document.name),l=Py(s.document.updateTime),f=new bv({mapValue:{fields:s.document.fields}}),h=xv.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new gy(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Ly(e,v.document),y=v.readTime?Py(v.readTime):Ap.min(),g=xv.newNoDocument(m,y),k=v.removedTargetIds||[];n=new gy([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Ly(e,b.document),x=b.removedTargetIds||[];n=new gy([],x,w,null)}else{if(!("filter"in t))return cp();t.filter;var _=t.filter;_.targetId;var S=_.count||0,I=new ny(S),E=_.targetId;n=new ky(E,I)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Ap.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ap.min():t.readTime?Py(t.readTime):Ap.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=Uy(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Bv(r)?{documents:Ky(e,r)}:{query:Wy(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Ny(e,t.resumeToken):t.snapshotVersion.compareTo(Ap.min())>0&&(n.readTime=Cy(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return cp()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=Uy(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(lw),hw=function(e){oe(n,e);var t=fe(n);function n(e,r,i,a,o,u){var s;return ee(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.Yo=!1,s}return(0,te.Z)(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,Sn(ue(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(lp(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(lp(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Py(e.updateTime):Py(t);return n.isEqual(Ap.min())&&(n=Py(t)),new Um(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Py(e.commitTime);return this.listener.tu(n,t)}return lp(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=Uy(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return zy(t.M,e)}))};this.Lo(n)}}]),n}(lw),dw=function(e){oe(n,e);var t=fe(n);function n(e,r,i,a){var o;return ee(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return(0,te.Z)(n,[{key:"iu",value:function(){if(this.su)throw new dp(hp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var o=(0,a.Z)(i,2),u=o[0],s=o[1];return r.So.co(e,t,n,u,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===hp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new dp(hp.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var o=(0,a.Z)(i,2),u=o[0],s=o[1];return r.So._o(e,t,n,u,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===hp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new dp(hp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return(0,te.Z)((function e(){ee(this,e)}))}()),pw=function(){function e(t,n){ee(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return(0,te.Z)(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(op(t),this.uu=!1):ap("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),vw=(0,te.Z)((function e(t,n,r,i,a){var o=this;ee(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr((function(e){r.enqueueAndForget(qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Ew(o),!e.t0){e.next=5;break}return ap("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=fp(t)).wu.add(4),e.next=4,gw(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,mw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new pw(r,i)}));function mw(e){return yw.apply(this,arguments)}function yw(){return yw=qe(We().mark((function e(t){var n,r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ew(t)){e.next=18;break}n=re(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),yw.apply(this,arguments)}function gw(e){return kw.apply(this,arguments)}function kw(){return kw=qe(We().mark((function e(t){var n,r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=re(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),kw.apply(this,arguments)}function bw(e,t){var n=fp(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),Iw(n)?Sw(n):tx(n).Mo()&&xw(n,t))}function ww(e,t){var n=fp(e),r=tx(n);n._u.delete(t),r.Mo()&&_w(n,t),0===n._u.size&&(r.Mo()?r.$o():Ew(n)&&n.yu.set("Unknown"))}function xw(e,t){e.pu.Z(t.targetId),tx(e).Ho(t)}function _w(e,t){e.pu.Z(t),tx(e).Jo(t)}function Sw(e){e.pu=new xy({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),tx(e).start(),e.yu.au()}function Iw(e){return Ew(e)&&!tx(e).ko()&&e._u.size>0}function Ew(e){return 0===fp(e).wu.size}function Tw(e){e.pu=void 0}function Cw(e){return Nw.apply(this,arguments)}function Nw(){return Nw=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){xw(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Nw.apply(this,arguments)}function Aw(e,t){return Pw.apply(this,arguments)}function Pw(){return Pw=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Tw(t),Iw(t)?(t.yu.lu(n),Sw(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Pw.apply(this,arguments)}function Rw(e,t,n){return Dw.apply(this,arguments)}function Dw(){return Dw=qe(We().mark((function e(t,n,r){var i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof by&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=qe(We().mark((function e(t,n){var r,i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=re(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ap("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Ow(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof gy?t.pu.ut(n):n instanceof ky?t.pu._t(n):t.pu.ht(n),r.isEqual(Ap.min())){e.next=29;break}return e.prev=14,e.next=17,kb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(Vp.EMPTY_BYTE_STRING,n.snapshotVersion)),_w(e,t);var r=new Wg(n.target,t,1,n.sequenceNumber);xw(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ap("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Ow(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Dw.apply(this,arguments)}function Ow(e,t,n){return Lw.apply(this,arguments)}function Lw(){return Lw=qe(We().mark((function e(t,n,r){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Mg(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,gw(t);case 5:t.yu.set("Offline"),r||(r=function(){return kb(t.localStore)}),t.asyncQueue.enqueueRetryable(qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ap("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,mw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Lw.apply(this,arguments)}function Mw(e,t){return t().catch((function(n){return Ow(e,n,t)}))}function Fw(e){return Uw.apply(this,arguments)}function Uw(){return Uw=qe(We().mark((function e(t){var n,r,i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=fp(t),r=nx(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!Vw(n)){e.next=19;break}return e.prev=3,e.next=6,xb(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,jw(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Ow(n,e.t0);case 17:e.next=2;break;case 19:Zw(n)&&Bw(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Uw.apply(this,arguments)}function Vw(e){return Ew(e)&&e.du.length<10}function jw(e,t){e.du.push(t);var n=nx(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function Zw(e){return Ew(e)&&!nx(e).ko()&&e.du.length>0}function Bw(e){nx(e).start()}function zw(e){return qw.apply(this,arguments)}function qw(){return qw=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nx(t).nu();case 1:case"end":return e.stop()}}),e)}))),qw.apply(this,arguments)}function Kw(e){return Ww.apply(this,arguments)}function Ww(){return Ww=qe(We().mark((function e(t){var n,r,i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=nx(t),r=re(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Ww.apply(this,arguments)}function Gw(e,t,n){return Hw.apply(this,arguments)}function Hw(){return Hw=qe(We().mark((function e(t,n,r){var i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=qg.from(i,n,r),e.next=3,Mw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Fw(t);case 5:case"end":return e.stop()}}),e)}))),Hw.apply(this,arguments)}function Qw(e,t){return $w.apply(this,arguments)}function $w(){return $w=qe(We().mark((function e(t,n){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&nx(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=qe(We().mark((function e(t,n){var r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ry(i=n.code)||i===hp.ABORTED){e.next=7;break}return r=t.du.shift(),nx(t).Fo(),e.next=5,Mw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Fw(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Zw(t)&&Bw(t);case 5:case"end":return e.stop()}}),e)}))),$w.apply(this,arguments)}function Yw(e,t){return Xw.apply(this,arguments)}function Xw(){return Xw=qe(We().mark((function e(t,n){var r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=fp(t)).asyncQueue.verifyOperationInProgress(),ap("RemoteStore","RemoteStore received new credentials"),i=Ew(r),r.wu.add(3),e.next=6,gw(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,mw(r);case 12:case"end":return e.stop()}}),e)}))),Xw.apply(this,arguments)}function Jw(e,t){return ex.apply(this,arguments)}function ex(){return ex=qe(We().mark((function e(t,n){var r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fp(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,mw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,gw(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),ex.apply(this,arguments)}function tx(e){return e.Iu||(e.Iu=function(e,t,n){var r=fp(e);return r.iu(),new fw(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Cw.bind(null,e),eo:Aw.bind(null,e),zo:Rw.bind(null,e)}),e.mu.push(function(){var t=qe(We().mark((function t(n){return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),Iw(e)?Sw(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:Tw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function nx(e){return e.Tu||(e.Tu=function(e,t,n){var r=fp(e);return r.iu(),new hw(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:zw.bind(null,e),eo:Qw.bind(null,e),eu:Kw.bind(null,e),tu:Gw.bind(null,e)}),e.mu.push(function(){var t=qe(We().mark((function t(n){return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,Fw(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(ap("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var rx=function(){function e(t,n,r,i,a){ee(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new pp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return(0,te.Z)(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dp(hp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ix(e,t){if(op("AsyncQueue","".concat(t,": ").concat(e)),Mg(e))return new dp(hp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ax=function(){function e(t){ee(this,e),this.comparator=t?function(e,n){return t(e,n)||Xp.comparator(e.key,n.key)}:function(e,t){return Xp.comparator(e.key,t.key)},this.keyedMap=cy(),this.sortedSet=new Rv(this.comparator)}return(0,te.Z)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),ox=function(){function e(){ee(this,e),this.Eu=new Rv(Xp.comparator)}return(0,te.Z)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):cp():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),ux=function(){function e(t,n,r,i,a,o,u,s){ee(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return(0,te.Z)(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,ax.emptySet(n),a,r,i,!0,!1)}}]),e}(),sx=(0,te.Z)((function e(){ee(this,e),this.Ru=void 0,this.listeners=[]})),cx=(0,te.Z)((function e(){ee(this,e),this.queries=new ay((function(e){return mm(e)}),vm),this.onlineState="Unknown",this.bu=new Set}));function lx(e,t){return fx.apply(this,arguments)}function fx(){return fx=qe(We().mark((function e(t,n){var r,i,a,o,u;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fp(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new sx),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=ix(e.t0,"Initialization of query '".concat(ym(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&mx(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),fx.apply(this,arguments)}function hx(e,t){return dx.apply(this,arguments)}function dx(){return dx=qe(We().mark((function e(t,n){var r,i,a,o,u;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fp(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),dx.apply(this,arguments)}function px(e,t){var n,r=fp(e),i=!1,a=re(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=re(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&mx(r)}function vx(e,t,n){var r=fp(e),i=r.queries.get(t);if(i){var a,o=re(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function mx(e){e.bu.forEach((function(e){e.next()}))}var yx=function(){function e(t,n,r){ee(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return(0,te.Z)(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=re(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new ux(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=ux.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),gx=function(){function e(t,n){ee(this,e),this.payload=t,this.byteLength=n}return(0,te.Z)(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),kx=function(){function e(t){ee(this,e),this.M=t}return(0,te.Z)(e,[{key:"wi",value:function(e){return Ly(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?Zy(this.M,e.document,!1):xv.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return Py(e)}}]),e}(),bx=function(){function e(t,n,r){ee(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wx(t)}return(0,te.Z)(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Lp.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new kx(this.M),i=re(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.wi(a.metadata.name),s=re(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||dy()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=qe(We().mark((function e(){var t,n,r,i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ab(this.localStore,new kx(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=re(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Rb(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function wx(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var xx=(0,te.Z)((function e(t){ee(this,e),this.key=t})),_x=(0,te.Z)((function e(t){ee(this,e),this.key=t})),Sx=function(){function e(t,n){ee(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=dy(),this.mutatedKeys=dy(),this.Gu=bm(t),this.Qu=new ax(this.Gu)}return(0,te.Z)(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new ox,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=gm(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cp()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new ux(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ox,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=dy(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new _x(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new xx(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=dy();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return ux.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),Ix=(0,te.Z)((function e(t,n,r){ee(this,e),this.query=t,this.targetId=n,this.view=r})),Ex=(0,te.Z)((function e(t){ee(this,e),this.key=t,this.na=!1})),Tx=function(){function e(t,n,r,i,a,o){ee(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new ay((function(e){return mm(e)}),vm),this.ra=new Map,this.oa=new Set,this.ua=new Rv(Xp.comparator),this.aa=new Map,this.ca=new Mb,this.ha={},this.la=new Map,this.fa=Fk.yn(),this.onlineState="Unknown",this.da=void 0}return(0,te.Z)(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function Cx(e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=qe(We().mark((function e(t,n){var r,i,a,o,u,s;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=w_(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,_b(r.localStore,dm(n));case 8:return u=e.sent,r.isPrimaryClient&&bw(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Ax(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Ax(e,t,n,r){return Px.apply(this,arguments)}function Px(){return Px=qe(We().mark((function e(t,n,r,i){var a,o,u,s,c,l;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=qe(We().mark((function e(t,n,r,i){var a,o,u;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,Eb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Yx(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Eb(t.localStore,n,!0);case 3:return a=e.sent,o=new Sx(n,a._i),u=o.Wu(a.documents),s=yy.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Yx(t,r,c.Xu),l=new Ix(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Px.apply(this,arguments)}function Rx(e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=qe(We().mark((function e(t,n){var r,i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fp(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!vm(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Sb(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),ww(r.remoteStore,i.targetId),Qx(r,i.targetId)})).catch(Bk);case 9:e.next=14;break;case 11:return Qx(r,i.targetId),e.next=14,Sb(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Dx.apply(this,arguments)}function Ox(e,t,n){return Lx.apply(this,arguments)}function Lx(){return Lx=qe(We().mark((function e(t,n,r){var i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=x_(t),e.prev=1,e.next=4,function(e,t){var n,r=fp(e),i=Np.now(),a=t.reduce((function(e,t){return e.add(t.key)}),dy());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,u=[],s=re(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=qm(c,n.get(c.key));null!=l&&u.push(new Hm(c.key,l,wv(l.value.mapValue),Vm.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new Rv(Ep)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,e_(i,a.changes);case 9:return e.next=11,Fw(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ix(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Lx.apply(this,arguments)}function Mx(e,t){return Fx.apply(this,arguments)}function Fx(){return Fx=qe(We().mark((function e(t,n){var r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),e.prev=1,e.next=4,bb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(lp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?lp(n.na):e.removedDocuments.size>0&&(lp(n.na),n.na=!1))})),e.next=8,e_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Bk(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Fx.apply(this,arguments)}function Ux(e,t,n){var r=fp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=fp(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=re(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&mx(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Vx(e,t,n){return jx.apply(this,arguments)}function jx(){return jx=qe(We().mark((function e(t,n,r){var i,a,o,u,s,c;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=fp(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Rv(Xp.comparator)).insert(o,xv.newNoDocument(o,Ap.min())),s=dy().add(o),c=new my(Ap.min(),new Map,new Lv(Ep),u,s),e.next=9,Mx(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),Jx(i),e.next=16;break;case 14:return e.next=16,Sb(i.localStore,n,!1).then((function(){return Qx(i,n,r)})).catch(Bk);case 16:case"end":return e.stop()}}),e)}))),jx.apply(this,arguments)}function Zx(e,t){return Bx.apply(this,arguments)}function Bx(){return Bx=qe(We().mark((function e(t,n){var r,i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),i=n.batch.batchId,e.prev=1,e.next=4,gb(r.localStore,n);case 4:return a=e.sent,Hx(r,i,null),Gx(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,e_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Bk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Bx.apply(this,arguments)}function zx(e,t,n){return qx.apply(this,arguments)}function qx(){return qx=qe(We().mark((function e(t,n,r){var i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fp(t),e.prev=1,e.next=4,function(e,t){var n=fp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return lp(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Hx(i,n,r),Gx(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,e_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Bk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),qx.apply(this,arguments)}function Kx(e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=qe(We().mark((function e(t,n){var r,i,a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ew((r=fp(t)).remoteStore)||ap("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=fp(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ix(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Wx.apply(this,arguments)}function Gx(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function Hx(e,t,n){var r=fp(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function Qx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=re(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||$x(e,t)}))}function $x(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(ww(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),Jx(e))}function Yx(e,t,n){var r,i=re(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof xx?(e.ca.addReference(a.key,t),Xx(e,a)):a instanceof _x?(ap("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||$x(e,a.key)):cp()}}catch(o){i.e(o)}finally{i.f()}}function Xx(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(ap("SyncEngine","New document in limbo: "+n),e.oa.add(r),Jx(e))}function Jx(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new Xp(Lp.fromString(t)),r=e.fa.next();e.aa.set(r,new Ex(n)),e.ua=e.ua.insert(n,r),bw(e.remoteStore,new Wg(dm(sm(n.path)),r,2,_p.A))}}function e_(e,t,n){return t_.apply(this,arguments)}function t_(){return t_=qe(We().mark((function e(t,n,r){var i,a,o,u;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=fp(t),a=[],o=[],u=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){u.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=hb.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sa.zo(a),e.next=9,function(){var e=qe(We().mark((function e(t,n){var r,i,a,o,u,s,c,l;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Pg.forEach(n,(function(t){return Pg.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Pg.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Mg(e.t0)){e.next=10;break}throw e.t0;case 10:ap("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=re(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),t_.apply(this,arguments)}function n_(e,t){return r_.apply(this,arguments)}function r_(){return r_=qe(We().mark((function e(t,n){var r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=fp(t)).currentUser.isEqual(n)){e.next=11;break}return ap("SyncEngine","User change. New user:",n.toKey()),e.next=5,mb(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new dp(hp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,e_(r,i.di);case 11:case"end":return e.stop()}}),e)}))),r_.apply(this,arguments)}function i_(e,t){var n=fp(e),r=n.aa.get(t);if(r&&r.na)return dy().add(r.key);var i=dy(),a=n.ra.get(t);if(!a)return i;var o,u=re(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ia.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function a_(e,t){return o_.apply(this,arguments)}function o_(){return o_=qe(We().mark((function e(t,n){var r,i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),e.next=3,Eb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&Yx(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),o_.apply(this,arguments)}function u_(e,t){return s_.apply(this,arguments)}function s_(){return s_=qe(We().mark((function e(t,n){var r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),e.abrupt("return",Cb(r.localStore,n).then((function(e){return e_(r,e)})));case 2:case"end":return e.stop()}}),e)}))),s_.apply(this,arguments)}function c_(e,t,n,r){return l_.apply(this,arguments)}function l_(){return l_=qe(We().mark((function e(t,n,r,i){var a,o;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=fp(t),e.next=3,function(e,t){var n=fp(e),r=fp(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):Pg.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Fw(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Hx(a,n,i||null),Gx(a,n),function(e,t){fp(fp(e).Bs)._n(t)}(a.localStore,n)):cp();case 11:return e.next=13,e_(a,o);case 13:e.next=16;break;case 15:ap("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),l_.apply(this,arguments)}function f_(e,t){return h_.apply(this,arguments)}function h_(){return h_=qe(We().mark((function e(t,n){var r,i,a,o,u,s,c,l;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w_(r=fp(t)),x_(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,d_(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,Jw(r.remoteStore,!0);case 9:o=re(a);try{for(o.s();!(u=o.n()).done;)s=u.value,bw(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],l=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Qx(r,t),Sb(r.localStore,t,!0)})),ww(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,d_(r,c);case 21:return function(e){var t=fp(e);t.aa.forEach((function(e,n){ww(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new Rv(Xp.comparator)}(r),r.da=!1,e.next=25,Jw(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),h_.apply(this,arguments)}function d_(e,t,n){return p_.apply(this,arguments)}function p_(){return p_=qe(We().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=fp(t),a=[],o=[],u=re(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ra.get(c))||0===f.length){e.next=34;break}return e.next=11,_b(i.localStore,dm(f[0]));case 11:l=e.sent,h=re(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ia.get(p),e.next=20,a_(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Tb(i.localStore,c);case 36:return y=e.sent,e.next=39,_b(i.localStore,y);case 39:return l=e.sent,e.next=42,Ax(i,v_(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),p_.apply(this,arguments)}function v_(e){return um(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function m_(e){var t=fp(e);return fp(fp(t.localStore).persistence).Fs()}function y_(e,t,n,r){return g_.apply(this,arguments)}function g_(){return g_=qe(We().mark((function e(t,n,r,i){var a,o,u,s;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=fp(t)).da){e.next=3;break}return e.abrupt("return",void ap("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Cb(a.localStore,km(o[0]));case 10:return u=e.sent,s=my.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,e_(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Sb(a.localStore,n,!0);case 17:return Qx(a,n,i),e.abrupt("break",20);case 19:cp();case 20:case"end":return e.stop()}}),e)}))),g_.apply(this,arguments)}function k_(e,t,n){return b_.apply(this,arguments)}function b_(){return b_=qe(We().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=w_(t)).da){e.next=45;break}a=re(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ra.has(u)){e.next=10;break}return ap("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Tb(i.localStore,u);case 12:return s=e.sent,e.next=15,_b(i.localStore,s);case 15:return c=e.sent,e.next=18,Ax(i,v_(s),c.targetId,!1);case 18:bw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=re(r),e.prev=30,h=We().mark((function e(){var t;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,Sb(i.localStore,t,!1).then((function(){ww(i.remoteStore,t),Qx(i,t)})).catch(Bk);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),b_.apply(this,arguments)}function w_(e){var t=fp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Mx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=i_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Vx.bind(null,t),t.sa.zo=px.bind(null,t.eventManager),t.sa.wa=vx.bind(null,t.eventManager),t}function x_(e){var t=fp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Zx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zx.bind(null,t),t}function __(e,t,n){var r=fp(e);(function(){var e=qe(We().mark((function e(t,n,r){var i,a,o,u,s;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=fp(e),r=Py(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(wx(i)),a=new bx(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,e_(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=fp(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(up("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var S_=function(){function e(){ee(this,e),this.synchronizeTabs=!1}return(0,te.Z)(e,[{key:"initialize",value:function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=sw(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return vb(this.persistence,new db,e.initialUser,this.M)}},{key:"ya",value:function(e){return new Bb(qb.Yi,this.M)}},{key:"ga",value:function(e){return new ew}},{key:"terminate",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),I_=function(e){oe(n,e);var t=fe(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return(0,te.Z)(n,[{key:"initialize",value:function(){var e=qe(We().mark((function e(t){var r=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(ue(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,x_(this.Ta.syncEngine);case 6:return e.next=8,Fw(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){return vb(this.persistence,new db,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Wk(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=lb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Nk.withCacheSize(this.cacheSizeBytes):Nk.DEFAULT;return new ub(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ow(),uw(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new ew}}]),n}(S_),E_=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return(0,te.Z)(n,[{key:"initialize",value:function(){var e=qe(We().mark((function e(t){var r,i=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(ue(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof Jb,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:c_.bind(null,r),Br:y_.bind(null,r),Lr:k_.bind(null,r),Fs:m_.bind(null,r),Fr:u_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f_(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){var t=ow();if(!Jb.vt(t))throw new dp(hp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=lb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(I_),T_=function(){function e(){ee(this,e)}return(0,te.Z)(e,[{key:"initialize",value:function(){var e=qe(We().mark((function e(t,n){var r=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Ux(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=n_.bind(null,this.syncEngine),e.next=12,Jw(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new cx}},{key:"createDatastore",value:function(e){var t,n=sw(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new aw(t));return function(e,t,n,r){return new dw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Ux(o.syncEngine,e,0)},a=nw.vt()?new nw:new tw,new vw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Tx(e,t,n,r,i,a);return o&&(u.da=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fp(t),ap("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,gw(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function C_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return qe(We().mark((function r(){var i;return We().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var N_=function(){function e(t){ee(this,e),this.observer=t,this.muted=!1}return(0,te.Z)(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),A_=function(){function e(t,n){var r=this;ee(this,e),this.Ra=t,this.M=n,this.metadata=new pp,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return(0,te.Z)(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ma",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){var e=qe(We().mark((function e(){var t,n,r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new gx(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=qe(We().mark((function e(){var t,n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Da()<0)){e.next=7;break}return e.next=3,this.Ca();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=qe(We().mark((function e(){var t,n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),P_=function(){function e(t){ee(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return(0,te.Z)(e,[{key:"lookup",value:function(){var e=qe(We().mark((function e(t){var n,r=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new dp(hp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=qe(We().mark((function e(t,n){var r,i,a,o,u,s;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),i=Uy(r.M)+"/documents",a={documents:n.map((function(e){return Oy(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=By(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());lp(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new ey(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=qe(We().mark((function e(){var t,n=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Xp.fromPath(t);n.mutations.push(new ty(r,n.precondition(r)))})),e.next=7,function(){var e=qe(We().mark((function e(t,n){var r,i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),i=Uy(r.M)+"/documents",a={writes:n.map((function(e){return zy(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw cp();t=Ap.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new dp(hp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Vm.updateTime(t):Vm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ap.min()))throw new dp(hp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vm.updateTime(t)}return Vm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),R_=function(){function e(t,n,r,i,a){ee(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new cw(this.asyncQueue,"transaction_retry")}return(0,te.Z)(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(qe(We().mark((function t(){var n,r;return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new P_(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!Qp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!ry(t)}return!1}}]),e}(),D_=function(){function e(t,n,r,i){var a=this;ee(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=tp.UNAUTHENTICATED,this.clientId=Ip.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ap("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ap("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return(0,te.Z)(e,[{key:"getConfiguration",value:function(){var e=qe(We().mark((function e(){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new dp(hp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new pp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(qe(We().mark((function n(){var r;return We().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ix(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function O_(e,t){return L_.apply(this,arguments)}function L_(){return L_=qe(We().mark((function e(t,n){var r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ap("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,mb(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),L_.apply(this,arguments)}function M_(e,t){return F_.apply(this,arguments)}function F_(){return F_=qe(We().mark((function e(t,n){var r,i;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,U_(t);case 3:return r=e.sent,ap("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Yw(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Yw(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),F_.apply(this,arguments)}function U_(e){return V_.apply(this,arguments)}function V_(){return V_=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ap("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,O_(t,new S_);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),V_.apply(this,arguments)}function j_(e){return Z_.apply(this,arguments)}function Z_(){return Z_=qe(We().mark((function e(t){return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ap("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,M_(t,new T_);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Z_.apply(this,arguments)}function B_(e){return U_(e).then((function(e){return e.persistence}))}function z_(e){return U_(e).then((function(e){return e.localStore}))}function q_(e){return j_(e).then((function(e){return e.remoteStore}))}function K_(e){return j_(e).then((function(e){return e.syncEngine}))}function W_(e){return G_.apply(this,arguments)}function G_(){return G_=qe(We().mark((function e(t){var n,r;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j_(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Cx.bind(null,n.syncEngine),r.onUnlisten=Rx.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),G_.apply(this,arguments)}function H_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new pp;return e.asyncQueue.enqueueAndForget(qe(We().mark((function i(){return We().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new N_({next:function(a){t.enqueueAndForget((function(){return hx(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new dp(hp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new dp(hp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new yx(sm(n.path),a,{includeMetadataChanges:!0,ku:!0});return lx(e,o)},i.next=3,W_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Q_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new pp;return e.asyncQueue.enqueueAndForget(qe(We().mark((function i(){return We().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new N_({next:function(n){t.enqueueAndForget((function(){return hx(e,o)})),n.fromCache&&"server"===r.source?i.reject(new dp(hp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new yx(n,a,{includeMetadataChanges:!0,ku:!0});return lx(e,o)},i.next=3,W_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var $_=new Map;function Y_(e,t,n){if(!n)throw new dp(hp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function X_(e,t,n,r){if(!0===t&&!0===r)throw new dp(hp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function J_(e){if(!Xp.isDocumentKey(e))throw new dp(hp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function eS(e){if(Xp.isDocumentKey(e))throw new dp(hp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function tS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":cp()}function nS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new dp(hp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=tS(e);throw new dp(hp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function rS(e,t){if(t<=0)throw new dp(hp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var iS=function(){function e(t){var n;if(ee(this,e),void 0===t.host){if(void 0!==t.ssl)throw new dp(hp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new dp(hp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,X_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return(0,te.Z)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),aS=function(){function e(t,n,r){ee(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iS({}),this._settingsFrozen=!1,t instanceof Hp?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new dp(hp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hp(e.options.projectId)}(t))}return(0,te.Z)(e,[{key:"app",get:function(){if(!this._app)throw new dp(hp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new dp(hp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iS(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new mp;switch(e.type){case"gapi":var t=e.client;return lp(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new bp(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new dp(hp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=$_.get(e);t&&(ap("ComponentProvider","Removing Datastore"),$_.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function oS(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=nS(e,aS))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&up("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=tp.MOCK_USER;else{o=be(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new dp(hp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new tp(s)}e._authCredentials=new yp(new vp(o,u))}}var uS=function(){function e(t,n,r){ee(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return(0,te.Z)(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new cS(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),sS=function(){function e(t,n,r){ee(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return(0,te.Z)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),cS=function(e){oe(n,e);var t=fe(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this,e,r,sm(i)))._path=i,a.type="collection",a}return(0,te.Z)(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new uS(this.firestore,null,new Xp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(sS);function lS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ze(e),Y_("collection","path",t),e instanceof aS){var a=Lp.fromString.apply(Lp,[t].concat(r));return eS(a),new cS(e,null,a)}if(!(e instanceof uS||e instanceof cS))throw new dp(hp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Lp.fromString.apply(Lp,[t].concat(r)));return eS(o),new cS(e.firestore,null,o)}function fS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ze(e),1===arguments.length&&(t=Ip.R()),Y_("doc","path",t),e instanceof aS){var a=Lp.fromString.apply(Lp,[t].concat(r));return J_(a),new uS(e,null,new Xp(a))}if(!(e instanceof uS||e instanceof cS))throw new dp(hp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Lp.fromString.apply(Lp,[t].concat(r)));return J_(o),new uS(e.firestore,e instanceof cS?e.converter:null,new Xp(o))}function hS(e,t){return e=Ze(e),t=Ze(t),(e instanceof uS||e instanceof cS)&&(t instanceof uS||t instanceof cS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function dS(e,t){return e=Ze(e),t=Ze(t),e instanceof sS&&t instanceof sS&&e.firestore===t.firestore&&vm(e._query,t._query)&&e.converter===t.converter}var pS=function(){function e(){var t=this;ee(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new cw(this,"async_queue_retry"),this.Qa=function(){var e=uw();e&&ap("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=uw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return(0,te.Z)(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=uw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new pp;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=qe(We().mark((function e(){var t=this;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Mg(e.t0)){e.next=12;break}throw e.t0;case 12:ap("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw op("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=rx.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&cp()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=qe(We().mark((function e(){var t;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=re(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=re(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function vS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=re(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var mS=function(){function e(){ee(this,e),this._progressObserver={},this._taskCompletionResolver=new pp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return(0,te.Z)(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),yS=function(e){oe(n,e);var t=fe(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new pS,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return(0,te.Z)(n,[{key:"_terminate",value:function(){return this._firestoreClient||kS(this),this._firestoreClient.terminate()}}]),n}(aS);function gS(e){return e._firestoreClient||kS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function kS(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Gp(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new D_(e._authCredentials,e._appCheckCredentials,e._queue,r)}function bS(e,t,n){var r=new pp;return e.asyncQueue.enqueue(qe(We().mark((function i(){return We().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,O_(e,n);case 3:return i.next=5,M_(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===hp.FAILED_PRECONDITION||e.code===hp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function wS(e){return function(e){return e.asyncQueue.enqueue(qe(We().mark((function t(){var n,r;return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B_(e);case 2:return n=t.sent,t.next=5,q_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=fp(e);return t.wu.delete(0),mw(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(gS(e=nS(e,yS)))}function xS(e){return function(e){return e.asyncQueue.enqueue(qe(We().mark((function t(){var n,r;return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B_(e);case 2:return n=t.sent,t.next=5,q_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=fp(t)).wu.add(0),e.next=4,gw(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(gS(e=nS(e,yS)))}function _S(e,t){var n=gS(e=nS(e,yS)),r=new mS;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new A_(e,t)}(function(e,t){if(e instanceof Uint8Array)return C_(e,t);if(e instanceof ArrayBuffer)return C_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,sw(t));e.asyncQueue.enqueueAndForget(qe(We().mark((function t(){return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=__,t.next=3,K_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function SS(e,t){return function(e,t){return e.asyncQueue.enqueue(qe(We().mark((function n(){return We().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=fp(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,z_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(gS(e=nS(e,yS)),t).then((function(t){return t?new sS(e,null,t.query):null}))}function IS(e){if(e._initialized||e._terminated)throw new dp(hp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ES=function(){function e(){ee(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new dp(hp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fp(n)}return(0,te.Z)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var TS=function(){function e(t){ee(this,e),this._byteString=t}return(0,te.Z)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Vp.fromBase64String(t))}catch(t){throw new dp(hp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Vp.fromUint8Array(t))}}]),e}(),CS=(0,te.Z)((function e(t){ee(this,e),this._methodName=t})),NS=function(){function e(t,n){if(ee(this,e),!isFinite(t)||t<-90||t>90)throw new dp(hp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new dp(hp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return(0,te.Z)(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ep(this._lat,e._lat)||Ep(this._long,e._long)}}]),e}(),AS=/^__.*__$/,PS=function(){function e(t,n,r){ee(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,te.Z)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Hm(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gm(e,this.data,t,this.fieldTransforms)}}]),e}(),RS=function(){function e(t,n,r){ee(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,te.Z)(e,[{key:"toMutation",value:function(e,t){return new Hm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function DS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cp()}}var OS=function(){function e(t,n,r,i,a,o){ee(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return(0,te.Z)(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return eI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(DS(this.ec)&&AS.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),LS=function(){function e(t,n,r){ee(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||sw(t)}return(0,te.Z)(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new OS({ec:e,methodName:t,hc:n,path:Fp.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function MS(e){var t=e._freezeSettings(),n=sw(e._databaseId);return new LS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function FS(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);$S("Data must be an object, but it was:",o,r);var u,s,c=HS(r,o);if(a.merge)u=new Up(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=re(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=YS(t,d,n);if(!o.contains(p))throw new dp(hp.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));tI(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Up(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new PS(new bv(c),u,s)}var US=function(e){oe(n,e);var t=fe(n);function n(){return ee(this,n),t.apply(this,arguments)}return(0,te.Z)(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(CS);function VS(e,t,n){return new OS({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var jS=function(e){oe(n,e);var t=fe(n);function n(){return ee(this,n),t.apply(this,arguments)}return(0,te.Z)(n,[{key:"_toFieldTransform",value:function(e){return new Fm(e.path,new Nm)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(CS),ZS=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this,e)).fc=r,i}return(0,te.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=VS(this,e,!0),n=this.fc.map((function(e){return GS(e,t)})),r=new Am(n);return new Fm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(CS),BS=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this,e)).fc=r,i}return(0,te.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=VS(this,e,!0),n=this.fc.map((function(e){return GS(e,t)})),r=new Rm(n);return new Fm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(CS),zS=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this,e)).dc=r,i}return(0,te.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=new Om(e.M,Sm(e.M,this.dc));return new Fm(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(CS);function qS(e,t,n,r){var i=e.lc(1,t,n);$S("Data must be an object, but it was:",i,r);var a=[],o=bv.empty();Rp(r,(function(e,r){var u=JS(t,e,n);r=Ze(r);var s=i.oc(u);if(r instanceof US)a.push(u);else{var c=GS(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Up(a);return new RS(o,u,i.fieldTransforms)}function KS(e,t,n,r,i,a){var o=e.lc(1,t,n),u=[YS(t,r,n)],s=[i];if(a.length%2!=0)throw new dp(hp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(YS(t,a[c])),s.push(a[c+1]);for(var l=[],f=bv.empty(),h=u.length-1;h>=0;--h)if(!tI(l,u[h])){var d=u[h],p=s[h];p=Ze(p);var v=o.oc(d);if(p instanceof US)l.push(d);else{var m=GS(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Up(l);return new RS(f,y,o.fieldTransforms)}function WS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return GS(n,e.lc(r?4:3,t))}function GS(e,t){if(QS(e=Ze(e)))return $S("Unsupported field value:",t,e),HS(e,t);if(e instanceof CS)return function(e,t){if(!DS(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=re(e);try{for(a.s();!(n=a.n()).done;){var o=GS(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ze(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Sm(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Np.fromDate(e);return{timestampValue:Cy(t.M,n)}}if(e instanceof Np){var r=new Np(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Cy(t.M,r)}}if(e instanceof NS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof TS)return{bytesValue:Ny(t.M,e._byteString)};if(e instanceof uS){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Ry(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(tS(e)))}(e,t)}function HS(e,t){var n={};return Dp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rp(e,(function(e,r){var i=GS(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function QS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Np||e instanceof NS||e instanceof TS||e instanceof uS||e instanceof CS)}function $S(e,t,n){if(!QS(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=tS(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function YS(e,t,n){if((t=Ze(t))instanceof ES)return t._internalPath;if("string"==typeof t)return JS(e,t);throw eI("Field path arguments must be of type string or ",e,!1,void 0,n)}var XS=new RegExp("[~\\*/\\[\\]]");function JS(e,t,n){if(t.search(XS)>=0)throw eI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return he(ES,(0,Be.Z)(t.split(".")))._internalPath}catch(r){throw eI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function eI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new dp(hp.INVALID_ARGUMENT,u+e+s)}function tI(e,t){return e.some((function(e){return e.isEqual(t)}))}var nI=function(){function e(t,n,r,i,a){ee(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return(0,te.Z)(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new uS(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new rI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(iI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),rI=function(e){oe(n,e);var t=fe(n);function n(){return ee(this,n),t.apply(this,arguments)}return(0,te.Z)(n,[{key:"data",value:function(){return Sn(ue(n.prototype),"data",this).call(this)}}]),n}(nI);function iI(e,t){return"string"==typeof t?JS(e,t):t instanceof ES?t._internalPath:t._delegate._internalPath}var aI=function(){function e(t,n){ee(this,e),this.hasPendingWrites=t,this.fromCache=n}return(0,te.Z)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),oI=function(e){oe(n,e);var t=fe(n);function n(e,r,i,a,o,u){var s;return ee(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return(0,te.Z)(n,[{key:"exists",value:function(){return Sn(ue(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new uI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(iI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(nI),uI=function(e){oe(n,e);var t=fe(n);function n(){return ee(this,n),t.apply(this,arguments)}return(0,te.Z)(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Sn(ue(n.prototype),"data",this).call(this,e)}}]),n}(oI),sI=function(){function e(t,n,r,i){ee(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new aI(i.hasPendingWrites,i.fromCache),this.query=r}return(0,te.Z)(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new uI(n._firestore,n._userDataWriter,r.key,r,new aI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new dp(hp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new uI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new aI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new uI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new aI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:cI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function cI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cp()}}function lI(e,t){return e instanceof oI&&t instanceof oI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof sI&&t instanceof sI&&e._firestore===t._firestore&&dS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function fI(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new dp(hp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hI=(0,te.Z)((function e(){ee(this,e)}));function dI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var pI=function(e){oe(n,e);var t=fe(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return(0,te.Z)(n,[{key:"_apply",value:function(e){var t=MS(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new dp(hp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){II(o,a);var s,c=[],l=re(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(SI(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=SI(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||II(o,a),u=WS(n,"where",o,"in"===a||"not-in"===a);var h=Wv.create(i,a,u);return function(e,t){if(t.S()){var n=lm(e);if(null!==n&&!n.isEqual(t.field))throw new dp(hp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=cm(e);null!==r&&EI(e,t.field,r)}var i=function(e,t){var n,r=re(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new dp(hp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new dp(hp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new sS(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new om(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(hI);var vI=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return(0,te.Z)(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new dp(hp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new dp(hp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new nm(t,n);return function(e,t){if(null===cm(e)){var n=lm(e);null!==n&&EI(e,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new sS(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new om(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(hI);var mI=function(e){oe(n,e);var t=fe(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return(0,te.Z)(n,[{key:"_apply",value:function(e){return new sS(e.firestore,e.converter,pm(e._query,this.yc,this.Ic))}}]),n}(hI);var yI=function(e){oe(n,e);var t=fe(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return(0,te.Z)(n,[{key:"_apply",value:function(e){var t=_I(e,this.type,this.Tc,this.Ec);return new sS(e.firestore,e.converter,function(e,t){return new om(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(hI);function gI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new yI("startAt",t,!0)}function kI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new yI("startAfter",t,!1)}var bI=function(e){oe(n,e);var t=fe(n);function n(e,r,i){var a;return ee(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return(0,te.Z)(n,[{key:"_apply",value:function(e){var t=_I(e,this.type,this.Tc,this.Ec);return new sS(e.firestore,e.converter,function(e,t){return new om(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(hI);function wI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bI("endBefore",t,!1)}function xI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bI("endAt",t,!0)}function _I(e,t,n,r){if(n[0]=Ze(n[0]),n[0]instanceof nI)return function(e,t,n,r,i){if(!r)throw new dp(hp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=re(hm(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(sv(t,r.key));else{var c=r.data.field(s.field);if(qp(c))throw new dp(hp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new dp(hp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new tm(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=MS(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new dp(hp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new dp(hp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!fm(e)&&-1!==c.indexOf("/"))throw new dp(hp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Lp.fromString(c));if(!Xp.isDocumentKey(l))throw new dp(hp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Xp(l);u.push(sv(t,f))}else{var h=WS(n,r,c);u.push(h)}}return new tm(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function SI(e,t,n){if("string"==typeof(n=Ze(n))){if(""===n)throw new dp(hp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fm(t)&&-1!==n.indexOf("/"))throw new dp(hp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Lp.fromString(n));if(!Xp.isDocumentKey(r))throw new dp(hp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return sv(e,new Xp(r))}if(n instanceof uS)return sv(e,n._key);throw new dp(hp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(tS(n),"."))}function II(e,t){if(!Array.isArray(e)||0===e.length)throw new dp(hp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new dp(hp.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function EI(e,t,n){if(!n.isEqual(t))throw new dp(hp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var TI={maxAttempts:5},CI=function(){function e(){ee(this,e)}return(0,te.Z)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(tv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bp(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw cp()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Rp(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new NS(Bp(e.latitude),Bp(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Kp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Wp(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Zp(e);return new Np(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Lp.fromString(e);lp(ng(n));var r=new Hp(n.get(1),n.get(3)),i=new Xp(n.popFirst(5));return r.isEqual(t)||op("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function NI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var AI=function(e){oe(n,e);var t=fe(n);function n(e){var r;return ee(this,n),(r=t.call(this)).firestore=e,r}return(0,te.Z)(n,[{key:"convertBytes",value:function(e){return new TS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new uS(this.firestore,null,t)}}]),n}(CI),PI=function(){function e(t,n){ee(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=MS(t)}return(0,te.Z)(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=RI(e,this._firestore),i=NI(r.converter,t,n),a=FS(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Vm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=RI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ze(t))||t instanceof ES?KS(this._dataReader,"WriteBatch.update",i._key,t,n,o):qS(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Vm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=RI(e,this._firestore);return this._mutations=this._mutations.concat(new ey(t._key,Vm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new dp(hp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function RI(e,t){if((e=Ze(e)).firestore!==t)throw new dp(hp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var DI=function(e){oe(n,e);var t=fe(n);function n(e){var r;return ee(this,n),(r=t.call(this)).firestore=e,r}return(0,te.Z)(n,[{key:"convertBytes",value:function(e){return new TS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new uS(this.firestore,null,t)}}]),n}(CI);function OI(e){e=nS(e,uS);var t=nS(e.firestore,yS),n=gS(t),r=new DI(t);return function(e,t){var n=new pp;return e.asyncQueue.enqueueAndForget(qe(We().mark((function r(){return We().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=qe(We().mark((function e(t,n,r){var i,a;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=fp(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new dp(hp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ix(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,z_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new oI(t,r,e._key,n,new aI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function LI(e){e=nS(e,sS);var t=nS(e.firestore,yS),n=gS(t),r=new DI(t);return function(e,t){var n=new pp;return e.asyncQueue.enqueueAndForget(qe(We().mark((function r(){return We().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=qe(We().mark((function e(t,n,r){var i,a,o,u,s;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Eb(t,n,!0);case 3:i=e.sent,a=new Sx(n,i._i),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=ix(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,z_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new sI(t,r,e,n)}))}function MI(e,t,n){e=nS(e,uS);var r=nS(e.firestore,yS),i=NI(e.converter,t,n);return jI(r,[FS(MS(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Vm.none())])}function FI(e,t,n){e=nS(e,uS);for(var r=nS(e.firestore,yS),i=MS(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return jI(r,[("string"==typeof(t=Ze(t))||t instanceof ES?KS(i,"updateDoc",e._key,t,n,o):qS(i,"updateDoc",e._key,t)).toMutation(e._key,Vm.exists(!0))])}function UI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Ze(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||vS(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(vS(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof uS)l=nS(e.firestore,yS),f=sm(e._key.path),c={next:function(t){n[s]&&n[s](ZI(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=nS(e,sS);l=nS(p.firestore,yS),f=p._query;var v=new DI(l);c={next:function(e){n[s]&&n[s](new sI(l,v,p,e))},error:n[s+1],complete:n[s+2]},fI(e._query)}return function(e,t,n,r){var i=new N_(r),a=new yx(t,i,n);return e.asyncQueue.enqueueAndForget(qe(We().mark((function t(){return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=lx,t.next=3,W_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(qe(We().mark((function t(){return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=hx,t.next=3,W_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(gS(l),f,h,c)}function VI(e,t){return function(e,t){var n=new N_(t);return e.asyncQueue.enqueueAndForget(qe(We().mark((function t(){return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){fp(e).bu.add(t),t.next()},t.next=3,W_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(qe(We().mark((function t(){return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){fp(e).bu.delete(t)},t.next=3,W_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(gS(e=nS(e,yS)),vS(t)?t:{next:t})}function jI(e,t){return function(e,t){var n=new pp;return e.asyncQueue.enqueueAndForget(qe(We().mark((function r(){return We().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Ox,r.next=3,K_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(gS(e),t)}function ZI(e,t,n){var r=n.docs.get(t._key),i=new DI(e);return new oI(e,i,t._key,r,new aI(n.hasPendingWrites,n.fromCache),t.converter)}var BI=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this,e,r))._firestore=e,i}return(0,te.Z)(n,[{key:"get",value:function(e){var t=this,r=RI(e,this._firestore),i=new DI(this._firestore);return Sn(ue(n.prototype),"get",this).call(this,e).then((function(e){return new oI(t._firestore,i,r._key,e._document,new aI(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){ee(this,e),this._firestore=t,this._transaction=n,this._dataReader=MS(t)}return(0,te.Z)(e,[{key:"get",value:function(e){var t=this,n=RI(e,this._firestore),r=new AI(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return cp();var i=e[0];if(i.isFoundDocument())return new nI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new nI(t._firestore,r,n._key,null,n.converter);throw cp()}))}},{key:"set",value:function(e,t,n){var r=RI(e,this._firestore),i=NI(r.converter,t,n),a=FS(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=RI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ze(t))||t instanceof ES?KS(this._dataReader,"Transaction.update",i._key,t,n,o):qS(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=RI(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function zI(e,t,n){e=nS(e,yS);var r=Object.assign(Object.assign({},TI),n);return function(e){if(e.maxAttempts<1)throw new dp(hp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new pp;return e.asyncQueue.enqueueAndForget(qe(We().mark((function i(){var a;return We().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return j_(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new R_(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(gS(e),(function(n){return t(new BI(e,n))}),r)}function qI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ZS("arrayUnion",t)}function KI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new BS("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){np=e}(Bt),Lt(new Ge("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new yS(i,new gp(e.getProvider("auth-internal")),new xp(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Ht(ep,"3.4.9",e),Ht(ep,"3.4.9","esm2017")}();function WI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new dp("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function GI(){if("undefined"===typeof Uint8Array)throw new dp("unimplemented","Uint8Arrays are not available in this environment.")}function HI(){if("undefined"==typeof atob)throw new dp("unimplemented","Blobs are unavailable in Firestore in this environment.")}var QI=function(){function e(t){ee(this,e),this._delegate=t}return(0,te.Z)(e,[{key:"toBase64",value:function(){return HI(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return GI(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return HI(),new e(TS.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return GI(),new e(TS.fromUint8Array(t))}}]),e}();function $I(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=re(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var YI=function(){function e(){ee(this,e)}return(0,te.Z)(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){IS(e=nS(e,yS));var n=gS(e),r=e._freezeSettings(),i=new T_;return bS(n,i,new I_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){IS(e=nS(e,yS));var t=gS(e),n=e._freezeSettings(),r=new T_;return bS(t,r,new E_(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new dp(hp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new pp;return e._queue.enqueueAndForgetEvenWhileRestricted(qe(We().mark((function n(){return We().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=qe(We().mark((function e(t){var n;return We().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Dg.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Dg.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(lb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),XI=function(){function e(t,n,r){var i=this;ee(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Hp||(this._appCompat=t)}return(0,te.Z)(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||up("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};oS(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return wS(this._delegate)}},{key:"disableNetwork",value:function(){return xS(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&X_("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new pp;return e.asyncQueue.enqueueAndForget(qe(We().mark((function n(){return We().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Kx,n.next=3,K_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(gS(e=nS(e,yS)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return VI(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new dp("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new hE(this,lS(this._delegate,e))}catch(t){throw iE(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new rE(this,fS(this._delegate,e))}catch(t){throw iE(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new cE(this,function(e,t){if(e=nS(e,aS),Y_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new dp(hp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new sS(e,null,function(e){return new om(Lp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw iE(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return zI(this._delegate,(function(n){return e(new eE(t,n))}))}},{key:"batch",value:function(){var e=this;return gS(this._delegate),new tE(new PI(this._delegate,(function(t){return jI(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return _S(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return SS(this._delegate,e).then((function(e){return e?new cE(t,e):null}))}}]),e}(),JI=function(e){oe(n,e);var t=fe(n);function n(e){var r;return ee(this,n),(r=t.call(this)).firestore=e,r}return(0,te.Z)(n,[{key:"convertBytes",value:function(e){return new QI(new TS(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return rE.forKey(t,this.firestore,null)}}]),n}(CI);var eE=function(){function e(t,n){ee(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new JI(t)}return(0,te.Z)(e,[{key:"get",value:function(e){var t=this,n=dE(e);return this._delegate.get(n).then((function(e){return new uE(t._firestore,new oI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=dE(e);return n?(WI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dE(e);return this._delegate.delete(t),this}}]),e}(),tE=function(){function e(t){ee(this,e),this._delegate=t}return(0,te.Z)(e,[{key:"set",value:function(e,t,n){var r=dE(e);return n?(WI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),nE=function(){function e(t,n,r){ee(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return(0,te.Z)(e,[{key:"fromFirestore",value:function(e,t){var n=new uI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sE(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new JI(t),n),i.set(n,a)),a}}]),e}();nE.INSTANCES=new WeakMap;var rE=function(){function e(t,n){ee(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new JI(t)}return(0,te.Z)(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new hE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new hE(this.firestore,lS(this._delegate,e))}catch(t){throw iE(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ze(e))instanceof uS&&hS(this._delegate,e)}},{key:"set",value:function(e,t){t=WI("DocumentReference.set",t);try{return t?MI(this._delegate,e,t):MI(this._delegate,e)}catch(n){throw iE(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?FI(this._delegate,e):FI.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw iE(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return jI(nS(e.firestore,yS),[new ey(e._key,Vm.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=aE(n),a=oE(n,(function(t){return new uE(e.firestore,new oI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return UI(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?OI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=nS(e,uS);var t=nS(e.firestore,yS);return H_(gS(t),e._key,{source:"server"}).then((function(n){return ZI(t,e,n)}))}(this._delegate):function(e){e=nS(e,uS);var t=nS(e.firestore,yS);return H_(gS(t),e._key).then((function(n){return ZI(t,e,n)}))}(this._delegate),t.then((function(e){return new uE(n.firestore,new oI(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(nE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new dp("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new uS(n._delegate,r,new Xp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new uS(n._delegate,r,t))}}]),e}();function iE(e,t,n){return e.message=e.message.replace(t,n),e}function aE(e){var t,n=re(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!$I(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function oE(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=$I(e[0])?e[0]:$I(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var uE=function(){function e(t,n){ee(this,e),this._firestore=t,this._delegate=n}return(0,te.Z)(e,[{key:"ref",get:function(){return new rE(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return lI(this._delegate,e._delegate)}}]),e}(),sE=function(e){oe(n,e);var t=fe(n);function n(){return ee(this,n),t.apply(this,arguments)}return(0,te.Z)(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||cp()}(void 0!==t),t}}]),n}(uE),cE=function(){function e(t,n){ee(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new JI(t)}return(0,te.Z)(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,dI(this._delegate,function(e,t,n){var r=t,i=iI("where",e);return new pI(i,r,n)}(t,n,r)))}catch(i){throw iE(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,dI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=iI("orderBy",e);return new vI(n,t)}(t,n)))}catch(r){throw iE(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,dI(this._delegate,function(e){return rS("limit",e),new mI("limit",e,"F")}(t)))}catch(n){throw iE(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,dI(this._delegate,function(e){return rS("limitToLast",e),new mI("limitToLast",e,"L")}(t)))}catch(n){throw iE(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,dI(this._delegate,gI.apply(void 0,arguments)))}catch(t){throw iE(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,dI(this._delegate,kI.apply(void 0,arguments)))}catch(t){throw iE(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,dI(this._delegate,wI.apply(void 0,arguments)))}catch(t){throw iE(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,dI(this._delegate,xI.apply(void 0,arguments)))}catch(t){throw iE(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return dS(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?LI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=nS(e,sS);var t=nS(e.firestore,yS),n=gS(t),r=new DI(t);return Q_(n,e._query,{source:"server"}).then((function(n){return new sI(t,r,e,n)}))}(this._delegate):function(e){e=nS(e,sS);var t=nS(e.firestore,yS),n=gS(t),r=new DI(t);return fI(e._query),Q_(n,e._query).then((function(n){return new sI(t,r,e,n)}))}(this._delegate),t.then((function(e){return new fE(n.firestore,new sI(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=aE(n),a=oE(n,(function(t){return new fE(e.firestore,new sI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return UI(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(nE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),lE=function(){function e(t,n){ee(this,e),this._firestore=t,this._delegate=n}return(0,te.Z)(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new sE(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),fE=function(){function e(t,n){ee(this,e),this._firestore=t,this._delegate=n}return(0,te.Z)(e,[{key:"query",get:function(){return new cE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new sE(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new lE(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new sE(n._firestore,r))}))}},{key:"isEqual",value:function(e){return lI(this._delegate,e._delegate)}}]),e}(),hE=function(e){oe(n,e);var t=fe(n);function n(e,r){var i;return ee(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return(0,te.Z)(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new rE(this.firestore,e):null}},{key:"doc",value:function(e){try{return new rE(this.firestore,void 0===e?fS(this._delegate):fS(this._delegate,e))}catch(t){throw iE(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=nS(e.firestore,yS),r=fS(e),i=NI(e.converter,t);return jI(n,[FS(MS(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Vm.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new rE(t.firestore,e)}))}},{key:"isEqual",value:function(e){return hS(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(nE.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(cE);function dE(e){return nS(e,uS)}var pE=function(){function e(){ee(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=he(ES,n)}return(0,te.Z)(e,[{key:"isEqual",value:function(e){return(e=Ze(e))instanceof ES&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Fp.keyField().canonicalString())}}]),e}(),vE=function(){function e(t){ee(this,e),this._delegate=t}return(0,te.Z)(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new jS("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new US("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=qI.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=KI.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new zS("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),mE={Firestore:XI,GeoPoint:NS,Timestamp:Np,Blob:QI,Transaction:eE,WriteBatch:tE,DocumentReference:rE,DocumentSnapshot:uE,Query:cE,QueryDocumentSnapshot:sE,QuerySnapshot:fE,CollectionReference:hE,FieldPath:pE,FieldValue:vE,setLogLevel:function(e){!function(e){rp.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ge("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},mE)))}(e,(function(e,t){return new XI(e,t,new YI)})),e.registerVersion("@firebase/firestore-compat","0.1.18")}(kn);kn.initializeApp({apiKey:"AIzaSyD7hmOr80ObLc-U1ZIPC0DSoHaIXtGsLtc",authDomain:"clone-b91d2.firebaseapp.com",projectId:"clone-b91d2",storageBucket:"clone-b91d2.appspot.com",messagingSenderId:"541435796527",appId:"1:541435796527:web:a7bf1835f63c57a5cc7ada",measurementId:"G-L7997PBE5K"}).firestore();var yE=kn.auth();var gE=function(){var e=X(),t=(0,a.Z)(e,2),n=t[0],r=n.basket,i=n.user;return t[1],(0,Q.jsxs)("div",{className:"header",children:[(0,Q.jsx)(H,{to:"/",children:(0,Q.jsx)("img",{className:"header__logo",src:"https://jitsvinger.co.za/wp-content/uploads/2018/04/Amazon-Logo-1024x373.png",alt:"amazon-png"})}),(0,Q.jsxs)("div",{className:"header__search",children:[(0,Q.jsx)("input",{className:"header__searchInput",type:"text"}),(0,Q.jsx)(o.Z,{className:"header__searchIcon"})]}),(0,Q.jsxs)("div",{className:"header__nav",children:[(0,Q.jsx)(H,{to:!i&&"/login",style:{textDecoration:"none"},children:(0,Q.jsxs)("div",{onClick:function(){i&&yE.signOut()},className:"header__option",children:[(0,Q.jsxs)("span",{className:"header__optionLineOne",children:["Hello ",i?i.email:"Guest"]}),(0,Q.jsx)("span",{className:"header__optionLineTwo",children:i?"Sign Out":"Sign In"})]})}),(0,Q.jsxs)("div",{className:"header__option",children:[(0,Q.jsx)("span",{className:"header__optionLineOne",children:"Returns"}),(0,Q.jsx)("span",{className:"header__optionLineTwo",children:"& Orders"})]}),(0,Q.jsxs)("div",{className:"header__option",children:[(0,Q.jsx)("span",{className:"header__optionLineOne",children:"Your"}),(0,Q.jsx)("span",{className:"header__optionLineTwo",children:"Prime"})]}),(0,Q.jsx)(H,{to:"/checkout",style:{textDecoration:"none"},children:(0,Q.jsxs)("div",{className:"header__optionBasket",children:[(0,Q.jsx)(u.Z,{}),(0,Q.jsx)("span",{className:"header__optionLineTwo header__basketCount",children:null===r||void 0===r?void 0:r.length})]})})]})]})};var kE=function(e){var t=e.id,n=e.title,r=e.image,i=e.price,o=e.rating,u=X(),s=(0,a.Z)(u,2),c=(s[0].basket,s[1]);return(0,Q.jsxs)("div",{className:"product",children:[(0,Q.jsxs)("div",{className:"product__info",children:[(0,Q.jsx)("p",{children:n}),(0,Q.jsxs)("p",{className:"product__price",children:[(0,Q.jsx)("small",{children:"\u20b9"}),(0,Q.jsx)("strong",{children:i})]}),(0,Q.jsx)("p",{children:o})]}),(0,Q.jsx)("img",{src:r,alt:"product"}),(0,Q.jsx)("button",{className:"btn",onClick:function(){c({type:"ADD_TO_BASKET",item:{id:t,title:n,image:r,price:i,rating:o}})},children:"Add to basket"})]})};var bE=function(){return(0,Q.jsx)("div",{className:"home",children:(0,Q.jsxs)("div",{className:"home__container",children:[(0,Q.jsx)("img",{src:"https://m.media-amazon.com/images/I/61DUO0NqyyL._SX3000_.jpg",alt:"amazon-backgorund",className:"home__image"}),(0,Q.jsxs)("div",{className:"home__row",children:[(0,Q.jsx)(kE,{id:1,title:"Echo Dot (4th Gen) | Smart speaker with Alexa | Glacier White",image:"https://m.media-amazon.com/images/I/51mXq6pWMYL.jpg",price:6999.99,rating:"\u2b50\u2b50\u2b50\u2b50"}),(0,Q.jsx)(kE,{id:2,title:"2021 Apple iPad Pro with Apple M1 chip (11-inch/27.96 cm, Wi-Fi, 128GB) - Space Grey (3rd Generation)",image:"https://m.media-amazon.com/images/I/81Y5WuARqpS._SX679_.jpg",price:68390.55,rating:"\u2b50\u2b50\u2b50\u2b50\u2b50"}),(0,Q.jsx)(kE,{id:3,title:"OnePlus 10 Pro 5G (Volcanic Black, 8GB RAM, 128GB Storage)",image:"https://images-eu.ssl-images-amazon.com/images/I/41hbeJ-SaUL._SX300_SY300_QL70_FMwebp_.jpg",price:66999.81,rating:"\u2b50\u2b50\u2b50\u2b50"})]}),(0,Q.jsxs)("div",{className:"home__row",children:[(0,Q.jsx)(kE,{id:4,title:"Do It Today: Overcome procrastination and achieve more meaningful things",image:"https://images-na.ssl-images-amazon.com/images/I/41W-o6xu2bL._SX323_BO1,204,203,200_.jpg",price:191.37,rating:"\u2b50\u2b50\u2b50\u2b50\u2b50"}),(0,Q.jsx)(kE,{id:5,title:"Sony WH-1000XM4 Wireless Noise Cancellation Bluetooth Headphones",image:"https://images-eu.ssl-images-amazon.com/images/I/3199GnRGuML._SX300_SY300_QL70_FMwebp_.jpg",price:24990.99,rating:"\u2b50\u2b50\u2b50\u2b50"}),(0,Q.jsx)(kE,{id:6,title:"Nike Men's Air Zoom Structure 21 Running Shoe",image:"https://m.media-amazon.com/images/I/61n9lsvTyAL._UY695_.jpg",price:7011.49,rating:"\u2b50\u2b50\u2b50\u2b50"}),(0,Q.jsx)(kE,{id:7,title:"Samsung Galaxy Watch 3 45mm Bluetooth (Mystic Black),SM-R840NZKAINS",image:"https://m.media-amazon.com/images/I/61w674PbGRL._SX679_.jpg",price:15999,rating:"\u2b50\u2b50\u2b50"})]}),(0,Q.jsxs)("div",{className:"home__row",children:[(0,Q.jsx)(kE,{id:8,title:"Samsung LC49HG90DMUXEN 48.9-inch Ultra Wide Curved Monitor (Black)",image:"https://m.media-amazon.com/images/I/71MlcO29QOL._SX679_.jpg",price:149990.99,rating:"\u2b50\u2b50\u2b50\u2b50"}),(0,Q.jsx)(kE,{id:9,title:"The Cozy Couch - Presly Solid Wood U Shape Wide Suede Velvet Chesterfield Design Sofa & Chaise with Chrome Legs - (White).",image:"https://m.media-amazon.com/images/I/81W6xcgpUjL._SX679_.jpg",price:61499.99,rating:"\u2b50\u2b50\u2b50"})]})]})})},wE=n(482),xE=n.n(wE),_E=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price+e}),0)},SE=function(e,t){switch(t.type){case"ADD_TO_BASKET":return ot(ot({},e),{},{basket:[].concat((0,Be.Z)(e.basket),[t.item])});case"REMOVE_FROM_BASKET":var n=e.basket.findIndex((function(e){return e.id===t.id}));console.log(n);var r=(0,Be.Z)(e.basket);return n>=0?r.splice(n,1):console.warn("Can't remove product (id: ${action.id}) as its not in basket"),ot(ot({},e),{},{basket:r});case"SET_USER":return ot(ot({},e),{},{user:t.user});default:return e}};var IE=function(){var e=X(),t=(0,a.Z)(e,2),n=t[0].basket;return t[1],(0,Q.jsxs)("div",{className:"subtotal",children:[(0,Q.jsx)(xE(),{renderText:function(e){return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)("p",{children:["Subtotal (",null===n||void 0===n?void 0:n.length," items): ",(0,Q.jsx)("strong",{children:e})]}),(0,Q.jsxs)("small",{className:"subtotal__gift",children:[(0,Q.jsx)("input",{type:"checkbox"})," This order contains a gift"]})]})},decimalScale:2,value:_E(n),displayType:"text",thousandSeparator:!0,prefix:"\u20b9"}),(0,Q.jsx)("button",{className:"btn2",children:"Proceed to Checkout"})]})};var EE=function(e){var t=e.id,n=e.title,r=e.image,i=e.price,o=e.rating,u=X(),s=(0,a.Z)(u,2),c=(s[0].basket,s[1]);return(0,Q.jsxs)("div",{className:"checkoutProduct",children:[(0,Q.jsx)("img",{className:"checkoutProduct__image",src:r}),(0,Q.jsxs)("div",{className:"checkoutProduct__info",children:[(0,Q.jsx)("p",{className:"checkoutProduct__title",children:n}),(0,Q.jsxs)("p",{className:"checkoutProduct__price",children:[(0,Q.jsx)("small",{children:"\u20b9"}),(0,Q.jsx)("strong",{children:i})]}),(0,Q.jsx)("p",{className:"checkoutProduct__rating",children:o}),(0,Q.jsx)("button",{className:"btn3",onClick:function(){c({type:"REMOVE_FROM_BASKET",id:t})},children:"Remove from basket"})]})]})};var TE=function(){var e=X(),t=(0,a.Z)(e,2),n=t[0],r=n.basket;return n.user,t[1],(0,Q.jsxs)("div",{className:"checkout",children:[(0,Q.jsxs)("div",{className:"checkout__left",children:[(0,Q.jsx)("img",{className:"checkout__ad",src:"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.jpg",alt:"ad"}),(0,Q.jsxs)("div",{children:[(0,Q.jsx)("h2",{className:"checkout__title",children:"Your shopping basket"}),r.map((function(e){return(0,Q.jsx)(EE,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})}))]})]}),(0,Q.jsx)("div",{className:"checkout__right",children:(0,Q.jsx)(IE,{})})]})};var CE=function(){var e=F(),n=(0,t.useState)(""),r=(0,a.Z)(n,2),i=r[0],o=r[1],u=(0,t.useState)(""),s=(0,a.Z)(u,2),c=s[0],l=s[1];return(0,Q.jsxs)("div",{className:"login",children:[(0,Q.jsx)(H,{to:"/",children:(0,Q.jsx)("img",{className:"login__logo",src:"https://logos-world.net/wp-content/uploads/2020/04/Amazon-Logo.png",alt:"amazon-logo"})}),(0,Q.jsxs)("div",{className:"login__container",children:[(0,Q.jsx)("h1",{children:"Sign-in"}),(0,Q.jsxs)("form",{children:[(0,Q.jsx)("h5",{className:"email",children:"E-mail"}),(0,Q.jsx)("input",{type:"text",value:i,onChange:function(e){return o(e.target.value)}}),(0,Q.jsx)("h5",{className:"password",children:"Password"}),(0,Q.jsx)("input",{type:"password",value:c,onChange:function(e){return l(e.target.value)}}),(0,Q.jsx)("button",{className:"btn__login",type:"submit",onClick:function(t){t.preventDefault(),yE.signInWithEmailAndPassword(i,c).then((function(t){e("/")})).catch((function(e){return alert(e.message)}))},children:"Sign In"})]}),(0,Q.jsx)("p",{children:"By continuing, you agree to Amazon's Conditions of Use and Privacy Notice."}),(0,Q.jsx)("button",{className:"btn__register",onClick:function(t){t.preventDefault(),yE.createUserWithEmailAndPassword(i,c).then((function(t){t&&e("/")})).catch((function(e){return alert(e.message)}))},children:"Create your Amazon account"})]})]})};var NE=function(){var e=X(),n=(0,a.Z)(e,2);!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(n[0]);var r=n[1];return(0,t.useEffect)((function(){yE.onAuthStateChanged((function(e){console.log("User >>>",e),r(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[]),(0,Q.jsx)(G,{children:(0,Q.jsx)("div",{className:"app",children:(0,Q.jsxs)(B,{children:[(0,Q.jsx)(j,{path:"/checkout",element:(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(gE,{}),(0,Q.jsx)(TE,{})]})}),(0,Q.jsx)(j,{path:"/login",element:(0,Q.jsx)(Q.Fragment,{children:(0,Q.jsx)(CE,{})})}),(0,Q.jsx)(j,{path:"/",element:(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(gE,{}),(0,Q.jsx)(bE,{})]})})]})})})};r.createRoot(document.getElementById("root")).render((0,Q.jsx)(t.StrictMode,{children:(0,Q.jsx)(Y,{initialState:{basket:[],user:null},reducer:SE,children:(0,Q.jsx)(NE,{})})}))}()}();
//# sourceMappingURL=main.c046a5ac.js.map